{"version":3,"file":"new.svelte-35a45175.js","sources":["../../../../../../../src/routes/admin/sml-versions/new.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { mutation } from '@urql/svelte';\n  import { NewSmlVersionDocument } from '$lib/generated';\n  import Toast from '$lib/components/general/Toast.svelte';\n  import { goto } from '$app/navigation';\n  import type { SMLVersionData } from '$lib/models/sml-versions';\n  import SMLVersionForm from '$lib/components/sml-versions/SMLVersionForm.svelte';\n  import { base } from '$app/paths';\n  import MetaDescriptors from '$lib/components/utils/MetaDescriptors.svelte';\n\n  let errorMessage = '';\n  let errorToast = false;\n\n  const newVersion = mutation({\n    query: NewSmlVersionDocument\n  });\n\n  const onSubmit = (data: SMLVersionData) => {\n    newVersion({\n      smlVersion: data\n    }).then((value) => {\n      if (value.error) {\n        console.error(value.error.message);\n        errorMessage = 'Error creating mod: ' + value.error.message;\n        errorToast = true;\n      } else {\n        // TODO Toast or something\n        goto(base + '/admin/sml-versions');\n      }\n    });\n  };\n\n  $: if (!errorToast) errorMessage = '';\n</script>\n\n<svelte:head>\n  <MetaDescriptors description=\"New SML Version\" title=\"Admin: New SML Version\" />\n</svelte:head>\n\n<h1 class=\"text-4xl my-4 font-bold\">New SML Version</h1>\n\n<SMLVersionForm {onSubmit} />\n\n<Toast bind:running={errorToast}>\n  <span>{errorMessage}</span>\n</Toast>\n"],"names":["ctx","ctx2","errorMessage","errorToast","newVersion","mutation","query","NewSmlVersionDocument","smlVersion","data","then","value","error","message","base"],"mappings":"syBA4CSA,8CAAAA,4DAAAC,iQADYD,iBAAAA,kGAJe,yNAAA,2TAIfC,4PAjCfC,EAAe,GACfC,GAAa,QAEXC,EAAaC,GACjBC,MAAOC,2CAkBDJ,OAAYD,EAAe,kBAb/BM,WAAYC,IACXC,UACGC,EAAMC,eACAA,MAAMD,EAAMC,MAAMC,aAC1BX,EAAe,uBAAyBS,EAAMC,MAAMC,aACpDV,GAAa,MAGRW,EAAO"}