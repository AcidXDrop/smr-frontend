import{S as A,i as G,s as H,j as E,m as j,o as w,x as g,u as $,v as S,as as J,K,L as Q,l as P,k as y,e as D,t as v,a0 as X,d as m,n as C,c as I,a as N,g as T,b as B,V as k,f as h,w as L,M as R,P as U,N as W,O as Y,Q as Z,at as x,r as O,h as F,X as q}from"../../../chunks/vendor-1349e522.js";import{p as ee}from"../../../chunks/routing-1d144003.js";import{v as te,J as oe}from"../../../chunks/graphql-06a000cd.js";import{T as ne}from"../../../chunks/Toast-5e88bfe6.js";import{g as re}from"../../../chunks/navigation-51f4a605.js";import{M as se}from"../../../chunks/ModForm-8e6bbdc6.js";import{b as ae}from"../../../chunks/paths-6758d194.js";import{M as ie}from"../../../chunks/MetaDescriptors-f7c013cb.js";import"../../../chunks/singletons-12a22614.js";import"../../../chunks/forms-8d025218.js";import"../../../chunks/markdown-295ff412.js";import"../../../chunks/stores-6d06ecdd.js";function z(s){let t,o;return t=new ie({props:{description:"Editing mod "+s[1].data.getMod.name,title:"Edit mod "+s[1].data.getMod.name,image:s[1].data.getMod.logo}}),{c(){E(t.$$.fragment)},l(e){j(t.$$.fragment,e)},m(e,n){w(t,e,n),o=!0},p(e,n){const a={};n&2&&(a.description="Editing mod "+e[1].data.getMod.name),n&2&&(a.title="Edit mod "+e[1].data.getMod.name),n&2&&(a.image=e[1].data.getMod.logo),t.$set(a)},i(e){o||(g(t.$$.fragment,e),o=!0)},o(e){$(t.$$.fragment,e),o=!1},d(e){S(t,e)}}}function fe(s){let t,o;return t=new se({props:{onSubmit:s[5],initialValues:s[3],editing:!0,submitText:"Save"}}),{c(){E(t.$$.fragment)},l(e){j(t.$$.fragment,e)},m(e,n){w(t,e,n),o=!0},p(e,n){const a={};n&8&&(a.initialValues=e[3]),t.$set(a)},i(e){o||(g(t.$$.fragment,e),o=!0)},o(e){$(t.$$.fragment,e),o=!1},d(e){S(t,e)}}}function le(s){let t,o,e=s[1].error.message+"",n;return{c(){t=D("p"),o=v("Oh no... "),n=v(e)},l(a){t=I(a,"P",{});var f=N(t);o=T(f,"Oh no... "),n=T(f,e),f.forEach(m)},m(a,f){h(a,t,f),k(t,o),k(t,n)},p(a,f){f&2&&e!==(e=a[1].error.message+"")&&F(n,e)},i:q,o:q,d(a){a&&m(t)}}}function de(s){let t,o;return{c(){t=D("p"),o=v("Loading...")},l(e){t=I(e,"P",{});var n=N(t);o=T(n,"Loading..."),n.forEach(m)},m(e,n){h(e,t,n),k(t,o)},p:q,i:q,o:q,d(e){e&&m(t)}}}function me(s){let t,o,e,n;const a=[de,le,fe],f=[];function c(i,u){return i[1].fetching?0:i[1].error?1:2}return t=c(s),o=f[t]=a[t](s),{c(){o.c(),e=P()},l(i){o.l(i),e=P()},m(i,u){f[t].m(i,u),h(i,e,u),n=!0},p(i,u){let p=t;t=c(i),t===p?f[t].p(i,u):(O(),$(f[p],1,1,()=>{f[p]=null}),L(),o=f[t],o?o.p(i,u):(o=f[t]=a[t](i),o.c()),g(o,1),o.m(e.parentNode,e))},i(i){n||(g(o),n=!0)},o(i){$(o),n=!1},d(i){f[t].d(i),i&&m(e)}}}function ce(s){let t,o;return t=new x({props:{$$slots:{default:[me]},$$scope:{ctx:s}}}),{c(){E(t.$$.fragment)},l(e){j(t.$$.fragment,e)},m(e,n){w(t,e,n),o=!0},p(e,n){const a={};n&522&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){o||(g(t.$$.fragment,e),o=!0)},o(e){$(t.$$.fragment,e),o=!1},d(e){S(t,e)}}}function ue(s){let t,o;return{c(){t=D("span"),o=v(s[2])},l(e){t=I(e,"SPAN",{});var n=N(t);o=T(n,s[2]),n.forEach(m)},m(e,n){h(e,t,n),k(t,o)},p(e,n){n&4&&F(o,e[2])},d(e){e&&m(t)}}}function pe(s){let t,o,e,n,a,f,c,i,u,p,l=!s[1].fetching&&!s[1].error&&s[1].data.getMod&&z(s);f=new J({props:{$$slots:{default:[ce]},$$scope:{ctx:s}}});function _(r){s[7](r)}let b={$$slots:{default:[ue]},$$scope:{ctx:s}};return s[0]!==void 0&&(b.running=s[0]),i=new ne({props:b}),K.push(()=>Q(i,"running",_)),{c(){l&&l.c(),t=P(),o=y(),e=D("h1"),n=v("Edit Mod"),a=y(),E(f.$$.fragment),c=y(),E(i.$$.fragment),this.h()},l(r){const d=X('[data-svelte="svelte-1pecnpz"]',document.head);l&&l.l(d),t=P(),d.forEach(m),o=C(r),e=I(r,"H1",{class:!0});var M=N(e);n=T(M,"Edit Mod"),M.forEach(m),a=C(r),j(f.$$.fragment,r),c=C(r),j(i.$$.fragment,r),this.h()},h(){B(e,"class","text-4xl my-4 font-bold")},m(r,d){l&&l.m(document.head,null),k(document.head,t),h(r,o,d),h(r,e,d),k(e,n),h(r,a,d),w(f,r,d),h(r,c,d),w(i,r,d),p=!0},p(r,[d]){!r[1].fetching&&!r[1].error&&r[1].data.getMod?l?(l.p(r,d),d&2&&g(l,1)):(l=z(r),l.c(),g(l,1),l.m(t.parentNode,t)):l&&(O(),$(l,1,1,()=>{l=null}),L());const M={};d&522&&(M.$$scope={dirty:d,ctx:r}),f.$set(M);const V={};d&516&&(V.$$scope={dirty:d,ctx:r}),!u&&d&1&&(u=!0,V.running=r[0],R(()=>u=!1)),i.$set(V)},i(r){p||(g(l),g(f.$$.fragment,r),g(i.$$.fragment,r),p=!0)},o(r){$(l),$(f.$$.fragment,r),$(i.$$.fragment,r),p=!1},d(r){l&&l.d(r),m(t),r&&m(o),r&&m(e),r&&m(a),S(f,r),r&&m(c),S(i,r)}}}const qe=ee();function _e(s,t,o){let e,n,{modId:a}=t,f="",c=!1;const i=U(te,{mod:a});W(s,i,_=>o(1,n=_));const u=Y({query:oe}),p=_=>{u({modId:a,mod:_}).then(b=>{b.error?(console.error(b.error.message),o(2,f="Error editing mod: "+b.error.message),o(0,c=!0)):re(ae+"/mod/"+b.data.updateMod.id)})};Z(i);function l(_){c=_,o(0,c)}return s.$$set=_=>{"modId"in _&&o(6,a=_.modId)},s.$$.update=()=>{s.$$.dirty&1&&(c||o(2,f="")),s.$$.dirty&2&&o(3,e=n.data?{...n.data.getMod,logo:void 0}:void 0)},[c,n,f,e,i,p,a,l]}class Pe extends A{constructor(t){super();G(this,t,_e,pe,H,{modId:6})}}export{Pe as default,qe as load};
//# sourceMappingURL=edit.svelte-45b90f33.js.map
