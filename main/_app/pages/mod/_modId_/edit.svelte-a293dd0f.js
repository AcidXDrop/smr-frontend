import{S as K,i as Q,s as R,j as I,m as D,o as N,x as _,u as h,v as P,J as B,K as U,l as z,k as V,e as q,t as j,_ as W,d as f,n as L,c as v,a as w,g as S,b as X,R as $,f as b,w as A,L as Y,N as Z,M as x,Q as ee,O as te,r as C,h as G,V as T}from"../../../chunks/vendor-5e5b2079.js";import{p as oe}from"../../../chunks/routing-1d144003.js";import{u as se,I as ne}from"../../../chunks/graphql-8fe081d6.js";import{T as re}from"../../../chunks/Toast-c7c36427.js";import{g as ae}from"../../../chunks/navigation-51f4a605.js";import{M as ie}from"../../../chunks/ModForm-b20dae4f.js";import{b as de}from"../../../chunks/paths-6758d194.js";import{M as me}from"../../../chunks/MetaDescriptors-20105bba.js";import"../../../chunks/singletons-12a22614.js";import"../../../chunks/forms-8d025218.js";import"../../../chunks/markdown-e6b630bd.js";import"../../../chunks/stores-0968c272.js";function H(r){let t,s;return t=new me({props:{description:"Editing mod "+r[1].data.getMod.name,title:"Edit mod "+r[1].data.getMod.name,image:r[1].data.getMod.logo}}),{c(){I(t.$$.fragment)},l(e){D(t.$$.fragment,e)},m(e,n){N(t,e,n),s=!0},p(e,n){const i={};n&2&&(i.description="Editing mod "+e[1].data.getMod.name),n&2&&(i.title="Edit mod "+e[1].data.getMod.name),n&2&&(i.image=e[1].data.getMod.logo),t.$set(i)},i(e){s||(_(t.$$.fragment,e),s=!0)},o(e){h(t.$$.fragment,e),s=!1},d(e){P(t,e)}}}function le(r){let t,s;return t=new ie({props:{onSubmit:r[5],initialValues:r[3],editing:!0,submitText:"Save"}}),{c(){I(t.$$.fragment)},l(e){D(t.$$.fragment,e)},m(e,n){N(t,e,n),s=!0},p(e,n){const i={};n&8&&(i.initialValues=e[3]),t.$set(i)},i(e){s||(_(t.$$.fragment,e),s=!0)},o(e){h(t.$$.fragment,e),s=!1},d(e){P(t,e)}}}function fe(r){let t,s,e=r[1].error.message+"",n;return{c(){t=q("p"),s=j("Oh no... "),n=j(e)},l(i){t=v(i,"P",{});var d=w(t);s=S(d,"Oh no... "),n=S(d,e),d.forEach(f)},m(i,d){b(i,t,d),$(t,s),$(t,n)},p(i,d){d&2&&e!==(e=i[1].error.message+"")&&G(n,e)},i:T,o:T,d(i){i&&f(t)}}}function ue(r){let t,s;return{c(){t=q("p"),s=j("Loading...")},l(e){t=v(e,"P",{});var n=w(t);s=S(n,"Loading..."),n.forEach(f)},m(e,n){b(e,t,n),$(t,s)},p:T,i:T,o:T,d(e){e&&f(t)}}}function ce(r){let t,s;return{c(){t=q("span"),s=j(r[2])},l(e){t=v(e,"SPAN",{});var n=w(t);s=S(n,r[2]),n.forEach(f)},m(e,n){b(e,t,n),$(t,s)},p(e,n){n&4&&G(s,e[2])},d(e){e&&f(t)}}}function pe(r){let t,s,e,n,i,d,m,c,u,E,k,a=!r[1].fetching&&!r[1].error&&r[1].data.getMod&&H(r);const g=[ue,fe,le],p=[];function O(o,l){return o[1].fetching?0:o[1].error?1:2}d=O(r),m=p[d]=g[d](r);function J(o){r[7](o)}let F={$$slots:{default:[ce]},$$scope:{ctx:r}};return r[0]!==void 0&&(F.running=r[0]),u=new re({props:F}),B.push(()=>U(u,"running",J)),{c(){a&&a.c(),t=z(),s=V(),e=q("h1"),n=j("Edit Mod"),i=V(),m.c(),c=V(),I(u.$$.fragment),this.h()},l(o){const l=W('[data-svelte="svelte-1pecnpz"]',document.head);a&&a.l(l),t=z(),l.forEach(f),s=L(o),e=v(o,"H1",{class:!0});var M=w(e);n=S(M,"Edit Mod"),M.forEach(f),i=L(o),m.l(o),c=L(o),D(u.$$.fragment,o),this.h()},h(){X(e,"class","text-4xl my-4 font-bold")},m(o,l){a&&a.m(document.head,null),$(document.head,t),b(o,s,l),b(o,e,l),$(e,n),b(o,i,l),p[d].m(o,l),b(o,c,l),N(u,o,l),k=!0},p(o,[l]){!o[1].fetching&&!o[1].error&&o[1].data.getMod?a?(a.p(o,l),l&2&&_(a,1)):(a=H(o),a.c(),_(a,1),a.m(t.parentNode,t)):a&&(C(),h(a,1,1,()=>{a=null}),A());let M=d;d=O(o),d===M?p[d].p(o,l):(C(),h(p[M],1,1,()=>{p[M]=null}),A(),m=p[d],m?m.p(o,l):(m=p[d]=g[d](o),m.c()),_(m,1),m.m(c.parentNode,c));const y={};l&516&&(y.$$scope={dirty:l,ctx:o}),!E&&l&1&&(E=!0,y.running=o[0],Y(()=>E=!1)),u.$set(y)},i(o){k||(_(a),_(m),_(u.$$.fragment,o),k=!0)},o(o){h(a),h(m),h(u.$$.fragment,o),k=!1},d(o){a&&a.d(o),f(t),o&&f(s),o&&f(e),o&&f(i),p[d].d(o),o&&f(c),P(u,o)}}}const we=oe();function _e(r,t,s){let e,n,{modId:i}=t,d="",m=!1;const c=Z(se,{mod:i});x(r,c,a=>s(1,n=a));const u=ee({query:ne}),E=a=>{u({modId:i,mod:a}).then(g=>{g.error?(console.error(g.error.message),s(2,d="Error editing mod: "+g.error.message),s(0,m=!0)):ae(de+"/mod/"+g.data.updateMod.id)})};te(c);function k(a){m=a,s(0,m)}return r.$$set=a=>{"modId"in a&&s(6,i=a.modId)},r.$$.update=()=>{r.$$.dirty&1&&(m||s(2,d="")),r.$$.dirty&2&&s(3,e=n.data?{...n.data.getMod,logo:void 0}:void 0)},[m,n,d,e,c,E,i,k]}class ye extends K{constructor(t){super();Q(this,t,_e,pe,R,{modId:6})}}export{ye as default,we as load};
//# sourceMappingURL=edit.svelte-a293dd0f.js.map
