import{S as A,i as B,s as G,w as M,x as j,y as w,q as g,o as $,B as S,az as H,M as J,N as K,l as I,k as N,e as P,t as T,ab as Q,d as c,m as O,c as y,a as C,h as q,b as R,X as k,g as h,p as V,O as X,R as Z,P as U,Q as W,T as Y,aC as x,n as F,K as ee,j as L,Z as v}from"../../../chunks/vendor-2ce7ccec.js";import{p as te}from"../../../chunks/routing-689f9c1f.js";import{v as oe,J as ne}from"../../../chunks/graphql-4793b2e5.js";import{T as se}from"../../../chunks/Toast-cfd5b391.js";import{g as re}from"../../../chunks/navigation-ca50617e.js";import{M as ae}from"../../../chunks/ModForm-4d522c47.js";import{b as ie}from"../../../chunks/paths-396f020f.js";import{M as me}from"../../../chunks/MetaDescriptors-a70b0a0c.js";import"../../../chunks/singletons-4fc5a6de.js";import"../../../chunks/forms-a065d303.js";import"../../../chunks/markdown-b4f4b87c.js";import"../../../chunks/stores-3b01ec45.js";function z(r){let t,o;return t=new me({props:{description:"Editing mod "+r[1].data.mod.name,title:"Edit mod "+r[1].data.mod.name,image:r[1].data.mod.logo}}),{c(){M(t.$$.fragment)},l(e){j(t.$$.fragment,e)},m(e,n){w(t,e,n),o=!0},p(e,n){const i={};n&2&&(i.description="Editing mod "+e[1].data.mod.name),n&2&&(i.title="Edit mod "+e[1].data.mod.name),n&2&&(i.image=e[1].data.mod.logo),t.$set(i)},i(e){o||(g(t.$$.fragment,e),o=!0)},o(e){$(t.$$.fragment,e),o=!1},d(e){S(t,e)}}}function fe(r){let t,o;return t=new ae({props:{onSubmit:r[5],initialValues:r[3],editing:!0,submitText:"Save"}}),{c(){M(t.$$.fragment)},l(e){j(t.$$.fragment,e)},m(e,n){w(t,e,n),o=!0},p(e,n){const i={};n&8&&(i.initialValues=e[3]),t.$set(i)},i(e){o||(g(t.$$.fragment,e),o=!0)},o(e){$(t.$$.fragment,e),o=!1},d(e){S(t,e)}}}function le(r){let t,o,e=r[1].error.message+"",n;return{c(){t=P("p"),o=T("Oh no... "),n=T(e)},l(i){t=y(i,"P",{});var m=C(t);o=q(m,"Oh no... "),n=q(m,e),m.forEach(c)},m(i,m){h(i,t,m),k(t,o),k(t,n)},p(i,m){m&2&&e!==(e=i[1].error.message+"")&&L(n,e)},i:v,o:v,d(i){i&&c(t)}}}function ce(r){let t,o;return{c(){t=P("p"),o=T("Loading...")},l(e){t=y(e,"P",{});var n=C(t);o=q(n,"Loading..."),n.forEach(c)},m(e,n){h(e,t,n),k(t,o)},p:v,i:v,o:v,d(e){e&&c(t)}}}function de(r){let t,o,e,n;const i=[ce,le,fe],m=[];function d(a,u){return a[1].fetching?0:a[1].error?1:2}return t=d(r),o=m[t]=i[t](r),{c(){o.c(),e=I()},l(a){o.l(a),e=I()},m(a,u){m[t].m(a,u),h(a,e,u),n=!0},p(a,u){let p=t;t=d(a),t===p?m[t].p(a,u):(F(),$(m[p],1,1,()=>{m[p]=null}),V(),o=m[t],o?o.p(a,u):(o=m[t]=i[t](a),o.c()),g(o,1),o.m(e.parentNode,e))},i(a){n||(g(o),n=!0)},o(a){$(o),n=!1},d(a){m[t].d(a),a&&c(e)}}}function ue(r){let t,o;return t=new x({props:{$$slots:{default:[de]},$$scope:{ctx:r}}}),{c(){M(t.$$.fragment)},l(e){j(t.$$.fragment,e)},m(e,n){w(t,e,n),o=!0},p(e,n){const i={};n&522&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){o||(g(t.$$.fragment,e),o=!0)},o(e){$(t.$$.fragment,e),o=!1},d(e){S(t,e)}}}function pe(r){let t,o;return{c(){t=P("span"),o=T(r[2])},l(e){t=y(e,"SPAN",{});var n=C(t);o=q(n,r[2]),n.forEach(c)},m(e,n){h(e,t,n),k(t,o)},p(e,n){n&4&&L(o,e[2])},d(e){e&&c(t)}}}function _e(r){let t,o,e,n,i,m,d,a,u,p,f=!r[1].fetching&&!r[1].error&&r[1].data.mod&&z(r);m=new H({props:{$$slots:{default:[ue]},$$scope:{ctx:r}}});function _(s){r[7](s)}let b={$$slots:{default:[pe]},$$scope:{ctx:r}};return r[0]!==void 0&&(b.running=r[0]),a=new se({props:b}),J.push(()=>K(a,"running",_)),{c(){f&&f.c(),t=I(),o=N(),e=P("h1"),n=T("Edit Mod"),i=N(),M(m.$$.fragment),d=N(),M(a.$$.fragment),this.h()},l(s){const l=Q('[data-svelte="svelte-mi1wi5"]',document.head);f&&f.l(l),t=I(),l.forEach(c),o=O(s),e=y(s,"H1",{class:!0});var E=C(e);n=q(E,"Edit Mod"),E.forEach(c),i=O(s),j(m.$$.fragment,s),d=O(s),j(a.$$.fragment,s),this.h()},h(){R(e,"class","text-4xl my-4 font-bold")},m(s,l){f&&f.m(document.head,null),k(document.head,t),h(s,o,l),h(s,e,l),k(e,n),h(s,i,l),w(m,s,l),h(s,d,l),w(a,s,l),p=!0},p(s,[l]){!s[1].fetching&&!s[1].error&&s[1].data.mod?f?(f.p(s,l),l&2&&g(f,1)):(f=z(s),f.c(),g(f,1),f.m(t.parentNode,t)):f&&(F(),$(f,1,1,()=>{f=null}),V());const E={};l&522&&(E.$$scope={dirty:l,ctx:s}),m.$set(E);const D={};l&516&&(D.$$scope={dirty:l,ctx:s}),!u&&l&1&&(u=!0,D.running=s[0],X(()=>u=!1)),a.$set(D)},i(s){p||(g(f),g(m.$$.fragment,s),g(a.$$.fragment,s),p=!0)},o(s){$(f),$(m.$$.fragment,s),$(a.$$.fragment,s),p=!1},d(s){f&&f.d(s),c(t),s&&c(o),s&&c(e),s&&c(i),S(m,s),s&&c(d),S(a,s)}}}const Ie=te();function ge(r,t,o){let e,n,{modId:i}=t,m="",d=!1;const a=Z(oe,{mod:i});U(r,a,_=>o(1,n=_));const u=W({query:ne}),p=_=>{u({modId:ee(a).data.mod.id,mod:_}).then(b=>{b.error?(console.error(b.error.message),o(2,m="Error editing mod: "+b.error.message),o(0,d=!0)):re(ie+"/mod/"+b.data.updateMod.id)})};Y(a);function f(_){d=_,o(0,d)}return r.$$set=_=>{"modId"in _&&o(6,i=_.modId)},r.$$.update=()=>{r.$$.dirty&1&&(d||o(2,m="")),r.$$.dirty&2&&o(3,e=n.data?{...n.data.mod,logo:void 0}:void 0)},[d,n,m,e,a,p,i,f]}class Pe extends A{constructor(t){super();B(this,t,ge,_e,G,{modId:6})}}export{Pe as default,Ie as load};
//# sourceMappingURL=edit.svelte-5945114a.js.map
