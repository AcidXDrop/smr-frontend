import{S as J,i as K,s as Q,j as q,m as w,o as D,x as g,u as h,v as N,J as U,K as X,l as F,k as P,e as S,t as E,$ as z,d as c,n as L,c as y,a as M,g as $,b as W,R as V,f as b,w as A,L as Y,N as Z,M as x,Q as ee,O as ne,r as B,h as C,X as I}from"../../../../../chunks/vendor-bd04eeb5.js";import{p as te}from"../../../../../chunks/routing-1d144003.js";import{B as oe,I as re}from"../../../../../chunks/graphql-44245247.js";import{T as se}from"../../../../../chunks/Toast-cf8cd1a0.js";import{g as ie}from"../../../../../chunks/navigation-51f4a605.js";import{V as ae}from"../../../../../chunks/VersionForm-b4d37417.js";import{b as me}from"../../../../../chunks/paths-6758d194.js";import{M as fe}from"../../../../../chunks/MetaDescriptors-99b66b31.js";import"../../../../../chunks/singletons-12a22614.js";import"../../../../../chunks/uplugin-3ba44138.js";import"../../../../../chunks/api-82c76902.js";import"../../../../../chunks/user-3938001f.js";import"../../../../../chunks/forms-8d025218.js";import"../../../../../chunks/markdown-b0181a82.js";import"../../../../../chunks/stores-44ecde00.js";function G(s){let n,o;return n=new fe({props:{description:"Editing mod version "+s[1].data.getVersion.mod.name+" "+s[1].data.getVersion.version,title:"Edit mod version "+s[1].data.getVersion.mod.name+" "+s[1].data.getVersion.version}}),{c(){q(n.$$.fragment)},l(e){w(n.$$.fragment,e)},m(e,r){D(n,e,r),o=!0},p(e,r){const a={};r&2&&(a.description="Editing mod version "+e[1].data.getVersion.mod.name+" "+e[1].data.getVersion.version),r&2&&(a.title="Edit mod version "+e[1].data.getVersion.mod.name+" "+e[1].data.getVersion.version),n.$set(a)},i(e){o||(g(n.$$.fragment,e),o=!0)},o(e){h(n.$$.fragment,e),o=!1},d(e){N(n,e)}}}function le(s){let n,o;return n=new ae({props:{onSubmit:s[5],initialValues:s[3],modReference:s[1].data.getVersion.mod.mod_reference,editing:!0,submitText:"Save"}}),{c(){q(n.$$.fragment)},l(e){w(n.$$.fragment,e)},m(e,r){D(n,e,r),o=!0},p(e,r){const a={};r&8&&(a.initialValues=e[3]),r&2&&(a.modReference=e[1].data.getVersion.mod.mod_reference),n.$set(a)},i(e){o||(g(n.$$.fragment,e),o=!0)},o(e){h(n.$$.fragment,e),o=!1},d(e){N(n,e)}}}function ue(s){let n,o,e=s[1].error.message+"",r;return{c(){n=S("p"),o=E("Oh no... "),r=E(e)},l(a){n=y(a,"P",{});var i=M(n);o=$(i,"Oh no... "),r=$(i,e),i.forEach(c)},m(a,i){b(a,n,i),V(n,o),V(n,r)},p(a,i){i&2&&e!==(e=a[1].error.message+"")&&C(r,e)},i:I,o:I,d(a){a&&c(n)}}}function de(s){let n,o;return{c(){n=S("p"),o=E("Loading...")},l(e){n=y(e,"P",{});var r=M(n);o=$(r,"Loading..."),r.forEach(c)},m(e,r){b(e,n,r),V(n,o)},p:I,i:I,o:I,d(e){e&&c(n)}}}function ce(s){let n,o;return{c(){n=S("span"),o=E(s[2])},l(e){n=y(e,"SPAN",{});var r=M(n);o=$(r,s[2]),r.forEach(c)},m(e,r){b(e,n,r),V(n,o)},p(e,r){r&4&&C(o,e[2])},d(e){e&&c(n)}}}function pe(s){let n,o,e,r,a,i,l,p,u,j,k,m=!s[1].fetching&&!s[1].error&&s[1].data.getVersion&&G(s);const d=[de,ue,le],_=[];function O(t,f){return t[1].fetching?0:t[1].error?1:2}i=O(s),l=_[i]=d[i](s);function H(t){s[8](t)}let R={$$slots:{default:[ce]},$$scope:{ctx:s}};return s[0]!==void 0&&(R.running=s[0]),u=new se({props:R}),U.push(()=>X(u,"running",H)),{c(){m&&m.c(),n=F(),o=P(),e=S("h1"),r=E("Edit Version"),a=P(),l.c(),p=P(),q(u.$$.fragment),this.h()},l(t){const f=z('[data-svelte="svelte-1gp98ge"]',document.head);m&&m.l(f),n=F(),f.forEach(c),o=L(t),e=y(t,"H1",{class:!0});var v=M(e);r=$(v,"Edit Version"),v.forEach(c),a=L(t),l.l(t),p=L(t),w(u.$$.fragment,t),this.h()},h(){W(e,"class","text-4xl my-4 font-bold")},m(t,f){m&&m.m(document.head,null),V(document.head,n),b(t,o,f),b(t,e,f),V(e,r),b(t,a,f),_[i].m(t,f),b(t,p,f),D(u,t,f),k=!0},p(t,[f]){!t[1].fetching&&!t[1].error&&t[1].data.getVersion?m?(m.p(t,f),f&2&&g(m,1)):(m=G(t),m.c(),g(m,1),m.m(n.parentNode,n)):m&&(B(),h(m,1,1,()=>{m=null}),A());let v=i;i=O(t),i===v?_[i].p(t,f):(B(),h(_[v],1,1,()=>{_[v]=null}),A(),l=_[i],l?l.p(t,f):(l=_[i]=d[i](t),l.c()),g(l,1),l.m(p.parentNode,p));const T={};f&1028&&(T.$$scope={dirty:f,ctx:t}),!j&&f&1&&(j=!0,T.running=t[0],Y(()=>j=!1)),u.$set(T)},i(t){k||(g(m),g(l),g(u.$$.fragment,t),k=!0)},o(t){h(m),h(l),h(u.$$.fragment,t),k=!1},d(t){m&&m.d(t),c(n),t&&c(o),t&&c(e),t&&c(a),_[i].d(t),t&&c(p),N(u,t)}}}const we=te();function _e(s,n,o){let e,r,{modId:a}=n,{versionId:i}=n,l="",p=!1;const u=Z(oe,{version:i});x(s,u,d=>o(1,r=d));const j=ee({query:re}),k=async d=>j({versionId:i,version:d}).then(_=>{if(_.error)console.error(_.error.message),o(2,l="Error editing version: "+_.error.message),o(0,p=!0);else return ie(me+"/mod/"+a+"/version/"+i)});ne(u);function m(d){p=d,o(0,p)}return s.$$set=d=>{"modId"in d&&o(6,a=d.modId),"versionId"in d&&o(7,i=d.versionId)},s.$$.update=()=>{s.$$.dirty&1&&(p||o(2,l="")),s.$$.dirty&2&&o(3,e=r.data?{...r.data.getVersion,logo:void 0}:void 0)},[p,r,l,e,u,k,a,i,m]}class De extends J{constructor(n){super();K(this,n,_e,pe,Q,{modId:6,versionId:7})}}export{De as default,we as load};
//# sourceMappingURL=edit.svelte-214183ea.js.map
