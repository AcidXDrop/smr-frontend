import{S as J,i as K,s as Q,j as q,m as w,o as D,x as g,u as h,v as N,J as U,K as B,l as F,k as P,e as S,t as E,_ as W,d,n as L,c as y,a as M,g as $,b as X,R as V,f as b,w as H,L as Y,N as Z,M as x,Q as ee,O as ne,r as z,h as A,V as I}from"../../../../../chunks/vendor-5e5b2079.js";import{p as te}from"../../../../../chunks/routing-1d144003.js";import{z as oe,H as re}from"../../../../../chunks/graphql-8fe081d6.js";import{T as se}from"../../../../../chunks/Toast-c7c36427.js";import{g as ie}from"../../../../../chunks/navigation-51f4a605.js";import{V as ae}from"../../../../../chunks/VersionForm-9cee0fe8.js";import{b as fe}from"../../../../../chunks/paths-6758d194.js";import{M as me}from"../../../../../chunks/MetaDescriptors-20105bba.js";import"../../../../../chunks/singletons-12a22614.js";import"../../../../../chunks/uplugin-703f60fc.js";import"../../../../../chunks/api-82c76902.js";import"../../../../../chunks/user-ba47f179.js";import"../../../../../chunks/forms-8d025218.js";import"../../../../../chunks/markdown-e6b630bd.js";import"../../../../../chunks/stores-0968c272.js";function C(s){let n,o;return n=new me({props:{description:"Editing mod version "+s[1].data.getVersion.mod.name+" "+s[1].data.getVersion.version,title:"Edit mod version "+s[1].data.getVersion.mod.name+" "+s[1].data.getVersion.version}}),{c(){q(n.$$.fragment)},l(e){w(n.$$.fragment,e)},m(e,r){D(n,e,r),o=!0},p(e,r){const a={};r&2&&(a.description="Editing mod version "+e[1].data.getVersion.mod.name+" "+e[1].data.getVersion.version),r&2&&(a.title="Edit mod version "+e[1].data.getVersion.mod.name+" "+e[1].data.getVersion.version),n.$set(a)},i(e){o||(g(n.$$.fragment,e),o=!0)},o(e){h(n.$$.fragment,e),o=!1},d(e){N(n,e)}}}function le(s){let n,o;return n=new ae({props:{onSubmit:s[5],initialValues:s[3],modReference:s[1].data.getVersion.mod.mod_reference,editing:!0,submitText:"Save"}}),{c(){q(n.$$.fragment)},l(e){w(n.$$.fragment,e)},m(e,r){D(n,e,r),o=!0},p(e,r){const a={};r&8&&(a.initialValues=e[3]),r&2&&(a.modReference=e[1].data.getVersion.mod.mod_reference),n.$set(a)},i(e){o||(g(n.$$.fragment,e),o=!0)},o(e){h(n.$$.fragment,e),o=!1},d(e){N(n,e)}}}function ue(s){let n,o,e=s[1].error.message+"",r;return{c(){n=S("p"),o=E("Oh no... "),r=E(e)},l(a){n=y(a,"P",{});var i=M(n);o=$(i,"Oh no... "),r=$(i,e),i.forEach(d)},m(a,i){b(a,n,i),V(n,o),V(n,r)},p(a,i){i&2&&e!==(e=a[1].error.message+"")&&A(r,e)},i:I,o:I,d(a){a&&d(n)}}}function ce(s){let n,o;return{c(){n=S("p"),o=E("Loading...")},l(e){n=y(e,"P",{});var r=M(n);o=$(r,"Loading..."),r.forEach(d)},m(e,r){b(e,n,r),V(n,o)},p:I,i:I,o:I,d(e){e&&d(n)}}}function de(s){let n,o;return{c(){n=S("span"),o=E(s[2])},l(e){n=y(e,"SPAN",{});var r=M(n);o=$(r,s[2]),r.forEach(d)},m(e,r){b(e,n,r),V(n,o)},p(e,r){r&4&&A(o,e[2])},d(e){e&&d(n)}}}function pe(s){let n,o,e,r,a,i,l,p,u,j,k,f=!s[1].fetching&&!s[1].error&&s[1].data.getVersion&&C(s);const c=[ce,ue,le],_=[];function O(t,m){return t[1].fetching?0:t[1].error?1:2}i=O(s),l=_[i]=c[i](s);function G(t){s[8](t)}let R={$$slots:{default:[de]},$$scope:{ctx:s}};return s[0]!==void 0&&(R.running=s[0]),u=new se({props:R}),U.push(()=>B(u,"running",G)),{c(){f&&f.c(),n=F(),o=P(),e=S("h1"),r=E("Edit Version"),a=P(),l.c(),p=P(),q(u.$$.fragment),this.h()},l(t){const m=W('[data-svelte="svelte-1gp98ge"]',document.head);f&&f.l(m),n=F(),m.forEach(d),o=L(t),e=y(t,"H1",{class:!0});var v=M(e);r=$(v,"Edit Version"),v.forEach(d),a=L(t),l.l(t),p=L(t),w(u.$$.fragment,t),this.h()},h(){X(e,"class","text-4xl my-4 font-bold")},m(t,m){f&&f.m(document.head,null),V(document.head,n),b(t,o,m),b(t,e,m),V(e,r),b(t,a,m),_[i].m(t,m),b(t,p,m),D(u,t,m),k=!0},p(t,[m]){!t[1].fetching&&!t[1].error&&t[1].data.getVersion?f?(f.p(t,m),m&2&&g(f,1)):(f=C(t),f.c(),g(f,1),f.m(n.parentNode,n)):f&&(z(),h(f,1,1,()=>{f=null}),H());let v=i;i=O(t),i===v?_[i].p(t,m):(z(),h(_[v],1,1,()=>{_[v]=null}),H(),l=_[i],l?l.p(t,m):(l=_[i]=c[i](t),l.c()),g(l,1),l.m(p.parentNode,p));const T={};m&1028&&(T.$$scope={dirty:m,ctx:t}),!j&&m&1&&(j=!0,T.running=t[0],Y(()=>j=!1)),u.$set(T)},i(t){k||(g(f),g(l),g(u.$$.fragment,t),k=!0)},o(t){h(f),h(l),h(u.$$.fragment,t),k=!1},d(t){f&&f.d(t),d(n),t&&d(o),t&&d(e),t&&d(a),_[i].d(t),t&&d(p),N(u,t)}}}const we=te();function _e(s,n,o){let e,r,{modId:a}=n,{versionId:i}=n,l="",p=!1;const u=Z(oe,{version:i});x(s,u,c=>o(1,r=c));const j=ee({query:re}),k=async c=>j({versionId:i,version:c}).then(_=>{if(_.error)console.error(_.error.message),o(2,l="Error editing version: "+_.error.message),o(0,p=!0);else return ie(fe+"/mod/"+a+"/version/"+i)});ne(u);function f(c){p=c,o(0,p)}return s.$$set=c=>{"modId"in c&&o(6,a=c.modId),"versionId"in c&&o(7,i=c.versionId)},s.$$.update=()=>{s.$$.dirty&1&&(p||o(2,l="")),s.$$.dirty&2&&o(3,e=r.data?{...r.data.getVersion,logo:void 0}:void 0)},[p,r,l,e,u,k,a,i,f]}class De extends J{constructor(n){super();K(this,n,_e,pe,Q,{modId:6,versionId:7})}}export{De as default,we as load};
//# sourceMappingURL=edit.svelte-0268212b.js.map
