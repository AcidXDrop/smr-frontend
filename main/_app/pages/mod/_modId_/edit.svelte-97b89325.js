import{S as K,i as Q,s as R,j as D,m as I,o as N,x as _,u as h,v as P,J as X,K as B,l as J,k as L,e as T,t as j,$ as U,d as f,n as O,c as q,a as w,g as S,b as W,R as $,f as b,w as z,L as Y,N as Z,M as x,Q as ee,O as te,r as A,h as C,X as v}from"../../../chunks/vendor-bd04eeb5.js";import{p as oe}from"../../../chunks/routing-1d144003.js";import{v as se,J as ne}from"../../../chunks/graphql-44245247.js";import{T as re}from"../../../chunks/Toast-cf8cd1a0.js";import{g as ae}from"../../../chunks/navigation-51f4a605.js";import{M as ie}from"../../../chunks/ModForm-b2319bd6.js";import{b as de}from"../../../chunks/paths-6758d194.js";import{M as me}from"../../../chunks/MetaDescriptors-99b66b31.js";import"../../../chunks/singletons-12a22614.js";import"../../../chunks/forms-8d025218.js";import"../../../chunks/markdown-b0181a82.js";import"../../../chunks/stores-44ecde00.js";function G(r){let t,s;return t=new me({props:{description:"Editing mod "+r[1].data.getMod.name,title:"Edit mod "+r[1].data.getMod.name,image:r[1].data.getMod.logo}}),{c(){D(t.$$.fragment)},l(e){I(t.$$.fragment,e)},m(e,n){N(t,e,n),s=!0},p(e,n){const i={};n&2&&(i.description="Editing mod "+e[1].data.getMod.name),n&2&&(i.title="Edit mod "+e[1].data.getMod.name),n&2&&(i.image=e[1].data.getMod.logo),t.$set(i)},i(e){s||(_(t.$$.fragment,e),s=!0)},o(e){h(t.$$.fragment,e),s=!1},d(e){P(t,e)}}}function le(r){let t,s;return t=new ie({props:{onSubmit:r[5],initialValues:r[3],editing:!0,submitText:"Save"}}),{c(){D(t.$$.fragment)},l(e){I(t.$$.fragment,e)},m(e,n){N(t,e,n),s=!0},p(e,n){const i={};n&8&&(i.initialValues=e[3]),t.$set(i)},i(e){s||(_(t.$$.fragment,e),s=!0)},o(e){h(t.$$.fragment,e),s=!1},d(e){P(t,e)}}}function fe(r){let t,s,e=r[1].error.message+"",n;return{c(){t=T("p"),s=j("Oh no... "),n=j(e)},l(i){t=q(i,"P",{});var d=w(t);s=S(d,"Oh no... "),n=S(d,e),d.forEach(f)},m(i,d){b(i,t,d),$(t,s),$(t,n)},p(i,d){d&2&&e!==(e=i[1].error.message+"")&&C(n,e)},i:v,o:v,d(i){i&&f(t)}}}function ue(r){let t,s;return{c(){t=T("p"),s=j("Loading...")},l(e){t=q(e,"P",{});var n=w(t);s=S(n,"Loading..."),n.forEach(f)},m(e,n){b(e,t,n),$(t,s)},p:v,i:v,o:v,d(e){e&&f(t)}}}function ce(r){let t,s;return{c(){t=T("span"),s=j(r[2])},l(e){t=q(e,"SPAN",{});var n=w(t);s=S(n,r[2]),n.forEach(f)},m(e,n){b(e,t,n),$(t,s)},p(e,n){n&4&&C(s,e[2])},d(e){e&&f(t)}}}function pe(r){let t,s,e,n,i,d,m,c,u,E,k,a=!r[1].fetching&&!r[1].error&&r[1].data.getMod&&G(r);const g=[ue,fe,le],p=[];function V(o,l){return o[1].fetching?0:o[1].error?1:2}d=V(r),m=p[d]=g[d](r);function H(o){r[7](o)}let F={$$slots:{default:[ce]},$$scope:{ctx:r}};return r[0]!==void 0&&(F.running=r[0]),u=new re({props:F}),X.push(()=>B(u,"running",H)),{c(){a&&a.c(),t=J(),s=L(),e=T("h1"),n=j("Edit Mod"),i=L(),m.c(),c=L(),D(u.$$.fragment),this.h()},l(o){const l=U('[data-svelte="svelte-1pecnpz"]',document.head);a&&a.l(l),t=J(),l.forEach(f),s=O(o),e=q(o,"H1",{class:!0});var M=w(e);n=S(M,"Edit Mod"),M.forEach(f),i=O(o),m.l(o),c=O(o),I(u.$$.fragment,o),this.h()},h(){W(e,"class","text-4xl my-4 font-bold")},m(o,l){a&&a.m(document.head,null),$(document.head,t),b(o,s,l),b(o,e,l),$(e,n),b(o,i,l),p[d].m(o,l),b(o,c,l),N(u,o,l),k=!0},p(o,[l]){!o[1].fetching&&!o[1].error&&o[1].data.getMod?a?(a.p(o,l),l&2&&_(a,1)):(a=G(o),a.c(),_(a,1),a.m(t.parentNode,t)):a&&(A(),h(a,1,1,()=>{a=null}),z());let M=d;d=V(o),d===M?p[d].p(o,l):(A(),h(p[M],1,1,()=>{p[M]=null}),z(),m=p[d],m?m.p(o,l):(m=p[d]=g[d](o),m.c()),_(m,1),m.m(c.parentNode,c));const y={};l&516&&(y.$$scope={dirty:l,ctx:o}),!E&&l&1&&(E=!0,y.running=o[0],Y(()=>E=!1)),u.$set(y)},i(o){k||(_(a),_(m),_(u.$$.fragment,o),k=!0)},o(o){h(a),h(m),h(u.$$.fragment,o),k=!1},d(o){a&&a.d(o),f(t),o&&f(s),o&&f(e),o&&f(i),p[d].d(o),o&&f(c),P(u,o)}}}const we=oe();function _e(r,t,s){let e,n,{modId:i}=t,d="",m=!1;const c=Z(se,{mod:i});x(r,c,a=>s(1,n=a));const u=ee({query:ne}),E=a=>{u({modId:i,mod:a}).then(g=>{g.error?(console.error(g.error.message),s(2,d="Error editing mod: "+g.error.message),s(0,m=!0)):ae(de+"/mod/"+g.data.updateMod.id)})};te(c);function k(a){m=a,s(0,m)}return r.$$set=a=>{"modId"in a&&s(6,i=a.modId)},r.$$.update=()=>{r.$$.dirty&1&&(m||s(2,d="")),r.$$.dirty&2&&s(3,e=n.data?{...n.data.getMod,logo:void 0}:void 0)},[m,n,d,e,c,E,i,k]}class ye extends K{constructor(t){super();Q(this,t,_e,pe,R,{modId:6})}}export{ye as default,we as load};
//# sourceMappingURL=edit.svelte-97b89325.js.map
