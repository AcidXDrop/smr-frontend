import{S as B,i as G,s as H,w as M,x as j,y as w,q as g,o as $,B as S,ax as J,M as Q,N as R,l as y,k as C,e as P,t as T,a2 as X,d as c,m as O,c as D,a as I,h as q,b as Z,X as k,g as h,p as V,O as z,R as K,P as U,Q as W,T as Y,ay as x,n as F,j as L,Z as v}from"../../../chunks/vendor-7eb9e018.js";import{p as ee}from"../../../chunks/routing-689f9c1f.js";import{v as te,J as oe}from"../../../chunks/graphql-1af4868d.js";import{T as ne}from"../../../chunks/Toast-2813118c.js";import{g as re}from"../../../chunks/navigation-b10cf5bf.js";import{M as se}from"../../../chunks/ModForm-070730b5.js";import{b as ae}from"../../../chunks/paths-396f020f.js";import{M as ie}from"../../../chunks/MetaDescriptors-2122f7eb.js";import"../../../chunks/singletons-4a680913.js";import"../../../chunks/forms-23812659.js";import"../../../chunks/markdown-e402d3eb.js";import"../../../chunks/stores-82e7e44c.js";function A(s){let t,o;return t=new ie({props:{description:"Editing mod "+s[1].data.mod.name,title:"Edit mod "+s[1].data.mod.name,image:s[1].data.mod.logo}}),{c(){M(t.$$.fragment)},l(e){j(t.$$.fragment,e)},m(e,n){w(t,e,n),o=!0},p(e,n){const a={};n&2&&(a.description="Editing mod "+e[1].data.mod.name),n&2&&(a.title="Edit mod "+e[1].data.mod.name),n&2&&(a.image=e[1].data.mod.logo),t.$set(a)},i(e){o||(g(t.$$.fragment,e),o=!0)},o(e){$(t.$$.fragment,e),o=!1},d(e){S(t,e)}}}function fe(s){let t,o;return t=new se({props:{onSubmit:s[5],initialValues:s[3],editing:!0,submitText:"Save"}}),{c(){M(t.$$.fragment)},l(e){j(t.$$.fragment,e)},m(e,n){w(t,e,n),o=!0},p(e,n){const a={};n&8&&(a.initialValues=e[3]),t.$set(a)},i(e){o||(g(t.$$.fragment,e),o=!0)},o(e){$(t.$$.fragment,e),o=!1},d(e){S(t,e)}}}function me(s){let t,o,e=s[1].error.message+"",n;return{c(){t=P("p"),o=T("Oh no... "),n=T(e)},l(a){t=D(a,"P",{});var f=I(t);o=q(f,"Oh no... "),n=q(f,e),f.forEach(c)},m(a,f){h(a,t,f),k(t,o),k(t,n)},p(a,f){f&2&&e!==(e=a[1].error.message+"")&&L(n,e)},i:v,o:v,d(a){a&&c(t)}}}function le(s){let t,o;return{c(){t=P("p"),o=T("Loading...")},l(e){t=D(e,"P",{});var n=I(t);o=q(n,"Loading..."),n.forEach(c)},m(e,n){h(e,t,n),k(t,o)},p:v,i:v,o:v,d(e){e&&c(t)}}}function ce(s){let t,o,e,n;const a=[le,me,fe],f=[];function u(i,d){return i[1].fetching?0:i[1].error?1:2}return t=u(s),o=f[t]=a[t](s),{c(){o.c(),e=y()},l(i){o.l(i),e=y()},m(i,d){f[t].m(i,d),h(i,e,d),n=!0},p(i,d){let p=t;t=u(i),t===p?f[t].p(i,d):(F(),$(f[p],1,1,()=>{f[p]=null}),V(),o=f[t],o?o.p(i,d):(o=f[t]=a[t](i),o.c()),g(o,1),o.m(e.parentNode,e))},i(i){n||(g(o),n=!0)},o(i){$(o),n=!1},d(i){f[t].d(i),i&&c(e)}}}function ue(s){let t,o;return t=new x({props:{$$slots:{default:[ce]},$$scope:{ctx:s}}}),{c(){M(t.$$.fragment)},l(e){j(t.$$.fragment,e)},m(e,n){w(t,e,n),o=!0},p(e,n){const a={};n&522&&(a.$$scope={dirty:n,ctx:e}),t.$set(a)},i(e){o||(g(t.$$.fragment,e),o=!0)},o(e){$(t.$$.fragment,e),o=!1},d(e){S(t,e)}}}function de(s){let t,o;return{c(){t=P("span"),o=T(s[2])},l(e){t=D(e,"SPAN",{});var n=I(t);o=q(n,s[2]),n.forEach(c)},m(e,n){h(e,t,n),k(t,o)},p(e,n){n&4&&L(o,e[2])},d(e){e&&c(t)}}}function pe(s){let t,o,e,n,a,f,u,i,d,p,m=!s[1].fetching&&!s[1].error&&s[1].data.mod&&A(s);f=new J({props:{$$slots:{default:[ue]},$$scope:{ctx:s}}});function _(r){s[7](r)}let b={$$slots:{default:[de]},$$scope:{ctx:s}};return s[0]!==void 0&&(b.running=s[0]),i=new ne({props:b}),Q.push(()=>R(i,"running",_)),{c(){m&&m.c(),t=y(),o=C(),e=P("h1"),n=T("Edit Mod"),a=C(),M(f.$$.fragment),u=C(),M(i.$$.fragment),this.h()},l(r){const l=X('[data-svelte="svelte-mi1wi5"]',document.head);m&&m.l(l),t=y(),l.forEach(c),o=O(r),e=D(r,"H1",{class:!0});var E=I(e);n=q(E,"Edit Mod"),E.forEach(c),a=O(r),j(f.$$.fragment,r),u=O(r),j(i.$$.fragment,r),this.h()},h(){Z(e,"class","text-4xl my-4 font-bold")},m(r,l){m&&m.m(document.head,null),k(document.head,t),h(r,o,l),h(r,e,l),k(e,n),h(r,a,l),w(f,r,l),h(r,u,l),w(i,r,l),p=!0},p(r,[l]){!r[1].fetching&&!r[1].error&&r[1].data.mod?m?(m.p(r,l),l&2&&g(m,1)):(m=A(r),m.c(),g(m,1),m.m(t.parentNode,t)):m&&(F(),$(m,1,1,()=>{m=null}),V());const E={};l&522&&(E.$$scope={dirty:l,ctx:r}),f.$set(E);const N={};l&516&&(N.$$scope={dirty:l,ctx:r}),!d&&l&1&&(d=!0,N.running=r[0],z(()=>d=!1)),i.$set(N)},i(r){p||(g(m),g(f.$$.fragment,r),g(i.$$.fragment,r),p=!0)},o(r){$(m),$(f.$$.fragment,r),$(i.$$.fragment,r),p=!1},d(r){m&&m.d(r),c(t),r&&c(o),r&&c(e),r&&c(a),S(f,r),r&&c(u),S(i,r)}}}const ve=ee();function _e(s,t,o){let e,n,{modId:a}=t,f="",u=!1;const i=K(te,{mod:a});U(s,i,_=>o(1,n=_));const d=W({query:oe}),p=_=>{d({modId:a,mod:_}).then(b=>{b.error?(console.error(b.error.message),o(2,f="Error editing mod: "+b.error.message),o(0,u=!0)):re(ae+"/mod/"+b.data.updateMod.id)})};Y(i);function m(_){u=_,o(0,u)}return s.$$set=_=>{"modId"in _&&o(6,a=_.modId)},s.$$.update=()=>{s.$$.dirty&1&&(u||o(2,f="")),s.$$.dirty&2&&o(3,e=n.data?{...n.data.mod,logo:void 0}:void 0)},[u,n,f,e,i,p,a,m]}class ye extends B{constructor(t){super();G(this,t,_e,pe,H,{modId:6})}}export{ye as default,ve as load};
//# sourceMappingURL=edit.svelte-6ec10d9f.js.map
