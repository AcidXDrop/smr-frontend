import{S as n,i as t,s,j as e,m as r,o,x as a,u as i,v as d,J as c,K as m,l as u,k as f,e as p,t as g,$ as l,d as h,n as $,c as v,a as j,g as k,b as V,R as E,f as b,w as x,L as I,N as w,M as y,Q as O,O as N,r as P,h as S,X as L}from"../../../../../chunks/vendor-717a693c.js";import{p as M}from"../../../../../chunks/routing-1d144003.js";import{B as T,I as q}from"../../../../../chunks/graphql-7c12eb8b.js";import{T as _}from"../../../../../chunks/Toast-88c84b53.js";import{g as A}from"../../../../../chunks/navigation-51f4a605.js";import{V as B}from"../../../../../chunks/VersionForm-15622f7f.js";import{b as D}from"../../../../../chunks/paths-6758d194.js";import{M as F}from"../../../../../chunks/MetaDescriptors-a7f74224.js";import"../../../../../chunks/singletons-12a22614.js";import"../../../../../chunks/uplugin-a3d41453.js";import"../../../../../chunks/api-82c76902.js";import"../../../../../chunks/user-9208d706.js";import"../../../../../chunks/forms-8d025218.js";import"../../../../../chunks/markdown-5153303f.js";import"../../../../../chunks/stores-ef71dba6.js";function H(n){let t,s;return t=new F({props:{description:"Editing mod version "+n[1].data.getVersion.mod.name+" "+n[1].data.getVersion.version,title:"Edit mod version "+n[1].data.getVersion.mod.name+" "+n[1].data.getVersion.version}}),{c(){e(t.$$.fragment)},l(n){r(t.$$.fragment,n)},m(n,e){o(t,n,e),s=!0},p(n,s){const e={};2&s&&(e.description="Editing mod version "+n[1].data.getVersion.mod.name+" "+n[1].data.getVersion.version),2&s&&(e.title="Edit mod version "+n[1].data.getVersion.mod.name+" "+n[1].data.getVersion.version),t.$set(e)},i(n){s||(a(t.$$.fragment,n),s=!0)},o(n){i(t.$$.fragment,n),s=!1},d(n){d(t,n)}}}function J(n){let t,s;return t=new B({props:{onSubmit:n[5],initialValues:n[3],editing:!0,submitText:"Save"}}),{c(){e(t.$$.fragment)},l(n){r(t.$$.fragment,n)},m(n,e){o(t,n,e),s=!0},p(n,s){const e={};8&s&&(e.initialValues=n[3]),t.$set(e)},i(n){s||(a(t.$$.fragment,n),s=!0)},o(n){i(t.$$.fragment,n),s=!1},d(n){d(t,n)}}}function K(n){let t,s,e,r=n[1].error.message+"";return{c(){t=p("p"),s=g("Oh no... "),e=g(r)},l(n){t=v(n,"P",{});var o=j(t);s=k(o,"Oh no... "),e=k(o,r),o.forEach(h)},m(n,r){b(n,t,r),E(t,s),E(t,e)},p(n,t){2&t&&r!==(r=n[1].error.message+"")&&S(e,r)},i:L,o:L,d(n){n&&h(t)}}}function Q(n){let t,s;return{c(){t=p("p"),s=g("Loading...")},l(n){t=v(n,"P",{});var e=j(t);s=k(e,"Loading..."),e.forEach(h)},m(n,e){b(n,t,e),E(t,s)},p:L,i:L,o:L,d(n){n&&h(t)}}}function R(n){let t,s;return{c(){t=p("span"),s=g(n[2])},l(e){t=v(e,"SPAN",{});var r=j(t);s=k(r,n[2]),r.forEach(h)},m(n,e){b(n,t,e),E(t,s)},p(n,t){4&t&&S(s,n[2])},d(n){n&&h(t)}}}function X(n){let t,s,w,y,O,N,S,L,M,T,q,A=!n[1].fetching&&!n[1].error&&n[1].data.getVersion&&H(n);const B=[Q,K,J],D=[];function F(n,t){return n[1].fetching?0:n[1].error?1:2}function X(t){n[8](t)}N=F(n),S=D[N]=B[N](n);let z={$$slots:{default:[R]},$$scope:{ctx:n}};return void 0!==n[0]&&(z.running=n[0]),M=new _({props:z}),c.push((()=>m(M,"running",X))),{c(){A&&A.c(),t=u(),s=f(),w=p("h1"),y=g("Edit Version"),O=f(),S.c(),L=f(),e(M.$$.fragment),this.h()},l(n){const e=l('[data-svelte="svelte-3csdde"]',document.head);A&&A.l(e),t=u(),e.forEach(h),s=$(n),w=v(n,"H1",{class:!0});var o=j(w);y=k(o,"Edit Version"),o.forEach(h),O=$(n),S.l(n),L=$(n),r(M.$$.fragment,n),this.h()},h(){V(w,"class","text-4xl my-4 font-bold")},m(n,e){A&&A.m(document.head,null),E(document.head,t),b(n,s,e),b(n,w,e),E(w,y),b(n,O,e),D[N].m(n,e),b(n,L,e),o(M,n,e),q=!0},p(n,[s]){n[1].fetching||n[1].error||!n[1].data.getVersion?A&&(P(),i(A,1,1,(()=>{A=null})),x()):A?(A.p(n,s),2&s&&a(A,1)):(A=H(n),A.c(),a(A,1),A.m(t.parentNode,t));let e=N;N=F(n),N===e?D[N].p(n,s):(P(),i(D[e],1,1,(()=>{D[e]=null})),x(),S=D[N],S?S.p(n,s):(S=D[N]=B[N](n),S.c()),a(S,1),S.m(L.parentNode,L));const r={};2052&s&&(r.$$scope={dirty:s,ctx:n}),!T&&1&s&&(T=!0,r.running=n[0],I((()=>T=!1))),M.$set(r)},i(n){q||(a(A),a(S),a(M.$$.fragment,n),q=!0)},o(n){i(A),i(S),i(M.$$.fragment,n),q=!1},d(n){A&&A.d(n),h(t),n&&h(s),n&&h(w),n&&h(O),D[N].d(n),n&&h(L),d(M,n)}}}const z=M();function C(n,t,s){let e,r;var o=this&&this.__awaiter||function(n,t,s,e){return new(s||(s=Promise))((function(r,o){function a(n){try{d(e.next(n))}catch(t){o(t)}}function i(n){try{d(e.throw(n))}catch(t){o(t)}}function d(n){var t;n.done?r(n.value):(t=n.value,t instanceof s?t:new s((function(n){n(t)}))).then(a,i)}d((e=e.apply(n,t||[])).next())}))};let{modId:a}=t,{versionId:i}=t,d="",c=!1;const m=w(T,{version:i});y(n,m,(n=>s(1,r=n)));const u=O({query:q});return N(m),n.$$set=n=>{"modId"in n&&s(6,a=n.modId),"versionId"in n&&s(7,i=n.versionId)},n.$$.update=()=>{1&n.$$.dirty&&(c||s(2,d="")),2&n.$$.dirty&&s(3,e=r.data?Object.assign(Object.assign({},r.data.getVersion),{logo:void 0}):void 0)},[c,r,d,e,m,n=>o(void 0,void 0,void 0,(function*(){return u({versionId:i,version:n}).then((n=>{if(!n.error)return A(D+"/mod/"+a+"/version/"+i);console.error(n.error.message),s(2,d="Error editing version: "+n.error.message),s(0,c=!0)}))})),a,i,function(n){c=n,s(0,c)}]}class G extends n{constructor(n){super(),t(this,n,C,X,s,{modId:6,versionId:7})}}export{G as default,z as load};
//# sourceMappingURL=edit.svelte-f4340ddf.js.map
