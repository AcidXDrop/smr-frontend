import{S as t,i as a,s,j as o,m as e,o as n,x as r,u as d,v as i,J as m,K as c,l as u,k as g,e as f,t as l,$ as p,d as $,n as h,c as M,a as j,g as k,b as v,R as E,f as b,w as x,L as w,N as y,M as I,Q as O,O as N,r as S,h as L,X as P}from"../../../chunks/vendor-717a693c.js";import{p as T}from"../../../chunks/routing-1d144003.js";import{v as q,J}from"../../../chunks/graphql-7c12eb8b.js";import{T as V}from"../../../chunks/Toast-88c84b53.js";import{g as A}from"../../../chunks/navigation-51f4a605.js";import{M as D}from"../../../chunks/ModForm-277e0f76.js";import{b as F}from"../../../chunks/paths-6758d194.js";import{M as H}from"../../../chunks/MetaDescriptors-a7f74224.js";import"../../../chunks/singletons-12a22614.js";import"../../../chunks/forms-8d025218.js";import"../../../chunks/markdown-5153303f.js";import"../../../chunks/stores-ef71dba6.js";function K(t){let a,s;return a=new H({props:{description:"Editing mod "+t[1].data.getMod.name,title:"Edit mod "+t[1].data.getMod.name,image:t[1].data.getMod.logo}}),{c(){o(a.$$.fragment)},l(t){e(a.$$.fragment,t)},m(t,o){n(a,t,o),s=!0},p(t,s){const o={};2&s&&(o.description="Editing mod "+t[1].data.getMod.name),2&s&&(o.title="Edit mod "+t[1].data.getMod.name),2&s&&(o.image=t[1].data.getMod.logo),a.$set(o)},i(t){s||(r(a.$$.fragment,t),s=!0)},o(t){d(a.$$.fragment,t),s=!1},d(t){i(a,t)}}}function Q(t){let a,s;return a=new D({props:{onSubmit:t[5],initialValues:t[3],editing:!0,submitText:"Save"}}),{c(){o(a.$$.fragment)},l(t){e(a.$$.fragment,t)},m(t,o){n(a,t,o),s=!0},p(t,s){const o={};8&s&&(o.initialValues=t[3]),a.$set(o)},i(t){s||(r(a.$$.fragment,t),s=!0)},o(t){d(a.$$.fragment,t),s=!1},d(t){i(a,t)}}}function R(t){let a,s,o,e=t[1].error.message+"";return{c(){a=f("p"),s=l("Oh no... "),o=l(e)},l(t){a=M(t,"P",{});var n=j(a);s=k(n,"Oh no... "),o=k(n,e),n.forEach($)},m(t,e){b(t,a,e),E(a,s),E(a,o)},p(t,a){2&a&&e!==(e=t[1].error.message+"")&&L(o,e)},i:P,o:P,d(t){t&&$(a)}}}function X(t){let a,s;return{c(){a=f("p"),s=l("Loading...")},l(t){a=M(t,"P",{});var o=j(a);s=k(o,"Loading..."),o.forEach($)},m(t,o){b(t,a,o),E(a,s)},p:P,i:P,o:P,d(t){t&&$(a)}}}function z(t){let a,s;return{c(){a=f("span"),s=l(t[2])},l(o){a=M(o,"SPAN",{});var e=j(a);s=k(e,t[2]),e.forEach($)},m(t,o){b(t,a,o),E(a,s)},p(t,a){4&a&&L(s,t[2])},d(t){t&&$(a)}}}function B(t){let a,s,y,I,O,N,L,P,T,q,J,A=!t[1].fetching&&!t[1].error&&t[1].data.getMod&&K(t);const D=[X,R,Q],F=[];function H(t,a){return t[1].fetching?0:t[1].error?1:2}function B(a){t[7](a)}N=H(t),L=F[N]=D[N](t);let C={$$slots:{default:[z]},$$scope:{ctx:t}};return void 0!==t[0]&&(C.running=t[0]),T=new V({props:C}),m.push((()=>c(T,"running",B))),{c(){A&&A.c(),a=u(),s=g(),y=f("h1"),I=l("Edit Mod"),O=g(),L.c(),P=g(),o(T.$$.fragment),this.h()},l(t){const o=p('[data-svelte="svelte-iihisn"]',document.head);A&&A.l(o),a=u(),o.forEach($),s=h(t),y=M(t,"H1",{class:!0});var n=j(y);I=k(n,"Edit Mod"),n.forEach($),O=h(t),L.l(t),P=h(t),e(T.$$.fragment,t),this.h()},h(){v(y,"class","text-4xl my-4 font-bold")},m(t,o){A&&A.m(document.head,null),E(document.head,a),b(t,s,o),b(t,y,o),E(y,I),b(t,O,o),F[N].m(t,o),b(t,P,o),n(T,t,o),J=!0},p(t,[s]){t[1].fetching||t[1].error||!t[1].data.getMod?A&&(S(),d(A,1,1,(()=>{A=null})),x()):A?(A.p(t,s),2&s&&r(A,1)):(A=K(t),A.c(),r(A,1),A.m(a.parentNode,a));let o=N;N=H(t),N===o?F[N].p(t,s):(S(),d(F[o],1,1,(()=>{F[o]=null})),x(),L=F[N],L?L.p(t,s):(L=F[N]=D[N](t),L.c()),r(L,1),L.m(P.parentNode,P));const e={};516&s&&(e.$$scope={dirty:s,ctx:t}),!q&&1&s&&(q=!0,e.running=t[0],w((()=>q=!1))),T.$set(e)},i(t){J||(r(A),r(L),r(T.$$.fragment,t),J=!0)},o(t){d(A),d(L),d(T.$$.fragment,t),J=!1},d(t){A&&A.d(t),$(a),t&&$(s),t&&$(y),t&&$(O),F[N].d(t),t&&$(P),i(T,t)}}}const C=T();function G(t,a,s){let o,e,{modId:n}=a,r="",d=!1;const i=y(q,{mod:n});I(t,i,(t=>s(1,e=t)));const m=O({query:J});return N(i),t.$$set=t=>{"modId"in t&&s(6,n=t.modId)},t.$$.update=()=>{1&t.$$.dirty&&(d||s(2,r="")),2&t.$$.dirty&&s(3,o=e.data?Object.assign(Object.assign({},e.data.getMod),{logo:void 0}):void 0)},[d,e,r,o,i,t=>{m({modId:n,mod:t}).then((t=>{t.error?(console.error(t.error.message),s(2,r="Error editing mod: "+t.error.message),s(0,d=!0)):A(F+"/mod/"+t.data.updateMod.id)}))},n,function(t){d=t,s(0,d)}]}class U extends t{constructor(t){super(),a(this,t,G,B,s,{modId:6})}}export{U as default,C as load};
//# sourceMappingURL=edit.svelte-f4fb31ed.js.map
