import{S as t,i as a,s as o,j as s,m as e,o as n,x as r,u as d,v as i,J as m,K as c,l as u,k as g,e as f,t as l,$ as p,d as $,n as h,c as M,a as j,g as k,b as v,R as b,f as E,w as x,L as w,N as y,M as I,Q as O,O as N,r as S,h as L,X as P}from"../../../chunks/vendor-ae42b6a0.js";import{p as T}from"../../../chunks/routing-1d144003.js";import{v as q,J}from"../../../chunks/graphql-53becde4.js";import{T as V}from"../../../chunks/Toast-1d0b041d.js";import{g as A}from"../../../chunks/navigation-51f4a605.js";import{M as D}from"../../../chunks/ModForm-c80b8258.js";import{b as F}from"../../../chunks/paths-6758d194.js";import{M as H}from"../../../chunks/MetaDescriptors-acbf38a9.js";import"../../../chunks/singletons-12a22614.js";import"../../../chunks/forms-8d025218.js";import"../../../chunks/markdown-70c7c4d4.js";import"../../../chunks/stores-fc868ea7.js";function K(t){let a,o;return a=new H({props:{description:"Editing mod "+t[1].data.getMod.name,title:"Edit mod "+t[1].data.getMod.name,image:t[1].data.getMod.logo}}),{c(){s(a.$$.fragment)},l(t){e(a.$$.fragment,t)},m(t,s){n(a,t,s),o=!0},p(t,o){const s={};2&o&&(s.description="Editing mod "+t[1].data.getMod.name),2&o&&(s.title="Edit mod "+t[1].data.getMod.name),2&o&&(s.image=t[1].data.getMod.logo),a.$set(s)},i(t){o||(r(a.$$.fragment,t),o=!0)},o(t){d(a.$$.fragment,t),o=!1},d(t){i(a,t)}}}function Q(t){let a,o;return a=new D({props:{onSubmit:t[5],initialValues:t[3],editing:!0,submitText:"Save"}}),{c(){s(a.$$.fragment)},l(t){e(a.$$.fragment,t)},m(t,s){n(a,t,s),o=!0},p(t,o){const s={};8&o&&(s.initialValues=t[3]),a.$set(s)},i(t){o||(r(a.$$.fragment,t),o=!0)},o(t){d(a.$$.fragment,t),o=!1},d(t){i(a,t)}}}function R(t){let a,o,s,e=t[1].error.message+"";return{c(){a=f("p"),o=l("Oh no... "),s=l(e)},l(t){a=M(t,"P",{});var n=j(a);o=k(n,"Oh no... "),s=k(n,e),n.forEach($)},m(t,e){E(t,a,e),b(a,o),b(a,s)},p(t,a){2&a&&e!==(e=t[1].error.message+"")&&L(s,e)},i:P,o:P,d(t){t&&$(a)}}}function X(t){let a,o;return{c(){a=f("p"),o=l("Loading...")},l(t){a=M(t,"P",{});var s=j(a);o=k(s,"Loading..."),s.forEach($)},m(t,s){E(t,a,s),b(a,o)},p:P,i:P,o:P,d(t){t&&$(a)}}}function z(t){let a,o;return{c(){a=f("span"),o=l(t[2])},l(s){a=M(s,"SPAN",{});var e=j(a);o=k(e,t[2]),e.forEach($)},m(t,s){E(t,a,s),b(a,o)},p(t,a){4&a&&L(o,t[2])},d(t){t&&$(a)}}}function B(t){let a,o,y,I,O,N,L,P,T,q,J,A=!t[1].fetching&&!t[1].error&&t[1].data.getMod&&K(t);const D=[X,R,Q],F=[];function H(t,a){return t[1].fetching?0:t[1].error?1:2}function B(a){t[7](a)}N=H(t),L=F[N]=D[N](t);let C={$$slots:{default:[z]},$$scope:{ctx:t}};return void 0!==t[0]&&(C.running=t[0]),T=new V({props:C}),m.push((()=>c(T,"running",B))),{c(){A&&A.c(),a=u(),o=g(),y=f("h1"),I=l("Edit Mod"),O=g(),L.c(),P=g(),s(T.$$.fragment),this.h()},l(t){const s=p('[data-svelte="svelte-nm76xt"]',document.head);A&&A.l(s),a=u(),s.forEach($),o=h(t),y=M(t,"H1",{class:!0});var n=j(y);I=k(n,"Edit Mod"),n.forEach($),O=h(t),L.l(t),P=h(t),e(T.$$.fragment,t),this.h()},h(){v(y,"class","text-4xl my-4 font-bold")},m(t,s){A&&A.m(document.head,null),b(document.head,a),E(t,o,s),E(t,y,s),b(y,I),E(t,O,s),F[N].m(t,s),E(t,P,s),n(T,t,s),J=!0},p(t,[o]){t[1].fetching||t[1].error||!t[1].data.getMod?A&&(S(),d(A,1,1,(()=>{A=null})),x()):A?(A.p(t,o),2&o&&r(A,1)):(A=K(t),A.c(),r(A,1),A.m(a.parentNode,a));let s=N;N=H(t),N===s?F[N].p(t,o):(S(),d(F[s],1,1,(()=>{F[s]=null})),x(),L=F[N],L?L.p(t,o):(L=F[N]=D[N](t),L.c()),r(L,1),L.m(P.parentNode,P));const e={};516&o&&(e.$$scope={dirty:o,ctx:t}),!q&&1&o&&(q=!0,e.running=t[0],w((()=>q=!1))),T.$set(e)},i(t){J||(r(A),r(L),r(T.$$.fragment,t),J=!0)},o(t){d(A),d(L),d(T.$$.fragment,t),J=!1},d(t){A&&A.d(t),$(a),t&&$(o),t&&$(y),t&&$(O),F[N].d(t),t&&$(P),i(T,t)}}}const C=T();function G(t,a,o){let s,e,{modId:n}=a,r="",d=!1;const i=y(q,{mod:n});I(t,i,(t=>o(1,e=t)));const m=O({query:J});return N(i),t.$$set=t=>{"modId"in t&&o(6,n=t.modId)},t.$$.update=()=>{1&t.$$.dirty&&(d||o(2,r="")),2&t.$$.dirty&&o(3,s=e.data?Object.assign(Object.assign({},e.data.getMod),{logo:void 0}):void 0)},[d,e,r,s,i,t=>{m({modId:n,mod:t}).then((t=>{t.error?(console.error(t.error.message),o(2,r="Error editing mod: "+t.error.message),o(0,d=!0)):A(F+"/mod/"+t.data.updateMod.id)}))},n,function(t){d=t,o(0,d)}]}class U extends t{constructor(t){super(),a(this,t,G,B,o,{modId:6})}}export{U as default,C as load};
//# sourceMappingURL=edit.svelte-f7685294.js.map
