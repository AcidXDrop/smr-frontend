import{S as te,i as se,s as ae,ap as re,K as X,L as Q,j as q,k as P,e as b,t as L,$ as ne,m as A,d as c,n as U,c as k,a as y,g as x,b as h,o as D,f as E,V as $,M as W,x as N,u as M,v as V,N as oe,R as ie,aF as le,aN as ue,aO as fe,aG as ce,aq as pe,X as K,aK as me,aL as de,aM as _e,aC as $e,l as Y,r as ge,w as he,h as z,aI as Z,aH as ve,aJ as be}from"../../chunks/vendor-287bac90.js";import{U as ke}from"../../chunks/graphql-7003d634.js";import{T as ye}from"../../chunks/Toast-7929c728.js";import{g as Se}from"../../chunks/navigation-51f4a605.js";import{t as we}from"../../chunks/forms-8d025218.js";import{a as Ee}from"../../chunks/user-a3198196.js";import{b as je}from"../../chunks/paths-6758d194.js";import{M as Te}from"../../chunks/MetaDescriptors-33a7a5ce.js";import"../../chunks/singletons-12a22614.js";import"../../chunks/stores-44c857e3.js";function Ie(o){let e,s,t,a,i,f,p,n,m,g,v,_,r,d,l,j,S,C,R,O,B;m=new Z({props:{for:"avatar",$$slots:{default:[Me,({messages:u})=>({10:u}),({messages:u})=>u?1024:0]},$$scope:{ctx:o}}});function ee(u){o[7](u)}let G={label:"Username",required:!0};return o[5].username!==void 0&&(G.value=o[5].username),_=new ve({props:G}),X.push(()=>Q(_,"value",ee)),l=new Z({props:{for:"username",$$slots:{default:[Pe,({messages:u})=>({10:u}),({messages:u})=>u?1024:0]},$$scope:{ctx:o}}}),{c(){e=b("form"),s=b("div"),t=b("div"),a=b("label"),i=L("Avatar:"),f=P(),p=b("input"),n=P(),q(m.$$.fragment),g=P(),v=b("div"),q(_.$$.fragment),d=P(),q(l.$$.fragment),j=P(),S=b("div"),C=b("input"),this.h()},l(u){e=k(u,"FORM",{});var w=y(e);s=k(w,"DIV",{class:!0});var T=y(s);t=k(T,"DIV",{class:!0});var I=y(t);a=k(I,"LABEL",{for:!0});var F=y(a);i=x(F,"Avatar:"),F.forEach(c),f=U(I),p=k(I,"INPUT",{id:!0,class:!0,name:!0,type:!0,accept:!0,placeholder:!0}),n=U(I),A(m.$$.fragment,I),I.forEach(c),g=U(T),v=k(T,"DIV",{class:!0});var H=y(v);A(_.$$.fragment,H),d=U(H),A(l.$$.fragment,H),H.forEach(c),j=U(T),S=k(T,"DIV",{});var J=y(S);C=k(J,"INPUT",{type:!0,class:!0}),J.forEach(c),T.forEach(c),w.forEach(c),this.h()},h(){h(a,"for","avatar"),h(p,"id","avatar"),h(p,"class","base-input"),h(p,"name","avatar"),h(p,"type","file"),h(p,"accept","image/png,image/jpeg,image/gif"),h(p,"placeholder","Avatar"),h(t,"class","grid grid-flow-row gap-2"),h(v,"class","grid grid-flow-row gap-2"),h(C,"type","submit"),C.value="Save",h(C,"class","px-4 py-2 rounded text-base bg-blue-500 cursor-pointer"),h(s,"class","grid grid-flow-row gap-6")},m(u,w){E(u,e,w),$(e,s),$(s,t),$(t,a),$(a,i),$(t,f),$(t,p),$(t,n),D(m,t,null),$(s,g),$(s,v),D(_,v,null),$(v,d),D(l,v,null),$(s,j),$(s,S),$(S,C),R=!0,O||(B=be(o[4].call(null,e)),O=!0)},p(u,w){const T={};w&3072&&(T.$$scope={dirty:w,ctx:u}),m.$set(T);const I={};!r&&w&32&&(r=!0,I.value=u[5].username,W(()=>r=!1)),_.$set(I);const F={};w&3072&&(F.$$scope={dirty:w,ctx:u}),l.$set(F)},i(u){R||(N(m.$$.fragment,u),N(_.$$.fragment,u),N(l.$$.fragment,u),R=!0)},o(u){M(m.$$.fragment,u),M(_.$$.fragment,u),M(l.$$.fragment,u),R=!1},d(u){u&&c(e),V(m),V(_),V(l),O=!1,B()}}}function Ne(o){let e,s;return{c(){e=b("p"),s=L("Please log in")},l(t){e=k(t,"P",{});var a=y(e);s=x(a,"Please log in"),a.forEach(c)},m(t,a){E(t,e,a),$(e,s)},p:K,i:K,o:K,d(t){t&&c(e)}}}function Me(o){let e,s=(o[10]||"")+"",t;return{c(){e=b("span"),t=L(s),this.h()},l(a){e=k(a,"SPAN",{class:!0});var i=y(e);t=x(i,s),i.forEach(c),this.h()},h(){h(e,"class","validation-message")},m(a,i){E(a,e,i),$(e,t)},p(a,i){i&1024&&s!==(s=(a[10]||"")+"")&&z(t,s)},d(a){a&&c(e)}}}function Pe(o){let e,s=(o[10]||"")+"",t;return{c(){e=b("span"),t=L(s),this.h()},l(a){e=k(a,"SPAN",{class:!0});var i=y(e);t=x(i,s),i.forEach(c),this.h()},h(){h(e,"class","validation-message")},m(a,i){E(a,e,i),$(e,t)},p(a,i){i&1024&&s!==(s=(a[10]||"")+"")&&z(t,s)},d(a){a&&c(e)}}}function Ue(o){let e,s,t,a;const i=[Ne,Ie],f=[];function p(n,m){return n[2]===null?0:1}return e=p(o),s=f[e]=i[e](o),{c(){s.c(),t=Y()},l(n){s.l(n),t=Y()},m(n,m){f[e].m(n,m),E(n,t,m),a=!0},p(n,m){let g=e;e=p(n),e===g?f[e].p(n,m):(ge(),M(f[g],1,1,()=>{f[g]=null}),he(),s=f[e],s?s.p(n,m):(s=f[e]=i[e](n),s.c()),N(s,1),s.m(t.parentNode,t))},i(n){a||(N(s),a=!0)},o(n){M(s),a=!1},d(n){f[e].d(n),n&&c(t)}}}function qe(o){let e,s;return e=new pe({props:{$$slots:{default:[Ue]},$$scope:{ctx:o}}}),{c(){q(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,a){D(e,t,a),s=!0},p(t,a){const i={};a&2084&&(i.$$scope={dirty:a,ctx:t}),e.$set(i)},i(t){s||(N(e.$$.fragment,t),s=!0)},o(t){M(e.$$.fragment,t),s=!1},d(t){V(e,t)}}}function Ae(o){let e,s;return{c(){e=b("span"),s=L(o[3])},l(t){e=k(t,"SPAN",{});var a=y(e);s=x(a,o[3]),a.forEach(c)},m(t,a){E(t,e,a),$(e,s)},p(t,a){a&8&&z(s,t[3])},d(t){t&&c(e)}}}function De(o){let e,s,t,a,i,f,p,n,m,g;e=new Te({props:{description:"Change your user settings",title:"Settings"}}),f=new re({props:{$$slots:{default:[qe]},$$scope:{ctx:o}}});function v(r){o[8](r)}let _={$$slots:{default:[Ae]},$$scope:{ctx:o}};return o[0]!==void 0&&(_.running=o[0]),n=new ye({props:_}),X.push(()=>Q(n,"running",v)),{c(){q(e.$$.fragment),s=P(),t=b("h1"),a=L("Settings"),i=P(),q(f.$$.fragment),p=P(),q(n.$$.fragment),this.h()},l(r){const d=ne('[data-svelte="svelte-1ae5i2c"]',document.head);A(e.$$.fragment,d),d.forEach(c),s=U(r),t=k(r,"H1",{class:!0});var l=y(t);a=x(l,"Settings"),l.forEach(c),i=U(r),A(f.$$.fragment,r),p=U(r),A(n.$$.fragment,r),this.h()},h(){h(t,"class","text-4xl my-4 font-bold")},m(r,d){D(e,document.head,null),E(r,s,d),E(r,t,d),$(t,a),E(r,i,d),D(f,r,d),E(r,p,d),D(n,r,d),g=!0},p(r,[d]){const l={};d&2084&&(l.$$scope={dirty:d,ctx:r}),f.$set(l);const j={};d&2056&&(j.$$scope={dirty:d,ctx:r}),!m&&d&1&&(m=!0,j.running=r[0],W(()=>m=!1)),n.$set(j)},i(r){g||(N(e.$$.fragment,r),N(f.$$.fragment,r),N(n.$$.fragment,r),g=!0)},o(r){M(e.$$.fragment,r),M(f.$$.fragment,r),M(n.$$.fragment,r),g=!1},d(r){V(e),r&&c(s),r&&c(t),r&&c(i),V(f,r),r&&c(p),V(n,r)}}}function Ve(o,e,s){let t,a,i=K,f=()=>(i(),i=$e(_,l=>s(5,a=l)),_);oe(o,Ee,l=>s(2,t=l)),o.$$.on_destroy.push(()=>i());let p="",n=!1;const m=ie({query:ke}),g=le({avatar:ue(fe().refine(l=>"name"in l&&"size"in l&&"type"in l)),username:ce().min(3).max(32)});let v,_;function r(l){o.$$.not_equal(a.username,l)&&(a.username=l,_.set(a))}function d(l){n=l,s(0,n),s(2,t)}return o.$$.update=()=>{if(o.$$.dirty&4&&t){const l=me({initialValues:{username:t.username},extend:[de,_e],validateSchema:g,onSubmit:j=>{m({user:we(j,g),userId:t.id}).then(S=>{S.error?(console.error(S.error.message),s(3,p="Error editing guide: "+S.error.message),s(0,n=!0)):Se(je+"/user/"+S.data.updateUser.id)})}});s(4,v=l.form),f(s(1,_=l.data))}o.$$.dirty&1&&(n||s(3,p=""))},[n,_,t,p,v,a,g,r,d]}class Ge extends te{constructor(e){super();se(this,e,Ve,De,ae,{userSchema:6})}get userSchema(){return this.$$.ctx[6]}}export{Ge as default};
//# sourceMappingURL=index.svelte-fca31157.js.map
