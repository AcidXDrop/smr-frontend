import{S as a,i as s,s as e,J as r,K as t,j as n,k as o,e as c,t as i,$ as l,m,d as u,n as f,c as p,a as d,g as $,b as h,o as g,f as v,R as x,u as y,w as b,x as E,L as j,v as w,M as S,Q as k,ar as P,ay as A,az as I,as as U,r as N,av as D,aw as L,ax as T,at as V,au as M,X as q,h as z}from"../../chunks/vendor-717a693c.js";import{U as B}from"../../chunks/graphql-7c12eb8b.js";import{T as R}from"../../chunks/Toast-88c84b53.js";import{g as C}from"../../chunks/navigation-51f4a605.js";import{t as F}from"../../chunks/forms-8d025218.js";import{a as H}from"../../chunks/user-9208d706.js";import{b as J}from"../../chunks/paths-6758d194.js";import{M as K}from"../../chunks/MetaDescriptors-a7f74224.js";import"../../chunks/singletons-12a22614.js";import"../../chunks/stores-ef71dba6.js";function O(a){let s,e,r,t,l,b,j,S,k,P,A,I,U,N,D,L,T,q,z,B,R,C,F;return k=new V({props:{for:"avatar",$$slots:{default:[X,({messages:a})=>({7:a}),({messages:a})=>a?128:0]},$$scope:{ctx:a}}}),T=new V({props:{for:"username",$$slots:{default:[G,({messages:a})=>({7:a}),({messages:a})=>a?128:0]},$$scope:{ctx:a}}}),{c(){s=c("form"),e=c("div"),r=c("div"),t=c("label"),l=i("Avatar:"),b=o(),j=c("input"),S=o(),n(k.$$.fragment),P=o(),A=c("div"),I=c("label"),U=i("Username:"),N=o(),D=c("input"),L=o(),n(T.$$.fragment),q=o(),z=c("div"),B=c("input"),this.h()},l(a){s=p(a,"FORM",{});var n=d(s);e=p(n,"DIV",{class:!0});var o=d(e);r=p(o,"DIV",{class:!0});var c=d(r);t=p(c,"LABEL",{for:!0});var i=d(t);l=$(i,"Avatar:"),i.forEach(u),b=f(c),j=p(c,"INPUT",{id:!0,class:!0,name:!0,type:!0,accept:!0,placeholder:!0}),S=f(c),m(k.$$.fragment,c),c.forEach(u),P=f(o),A=p(o,"DIV",{class:!0});var h=d(A);I=p(h,"LABEL",{for:!0});var g=d(I);U=$(g,"Username:"),g.forEach(u),N=f(h),D=p(h,"INPUT",{id:!0,class:!0,name:!0,type:!0,placeholder:!0}),L=f(h),m(T.$$.fragment,h),h.forEach(u),q=f(o),z=p(o,"DIV",{});var v=d(z);B=p(v,"INPUT",{type:!0,class:!0}),v.forEach(u),o.forEach(u),n.forEach(u),this.h()},h(){h(t,"for","avatar"),h(j,"id","avatar"),h(j,"class","base-input"),h(j,"name","avatar"),h(j,"type","file"),h(j,"accept","image/png,image/jpeg,image/gif"),h(j,"placeholder","Avatar"),h(r,"class","grid grid-flow-row gap-2"),h(I,"for","username"),h(D,"id","username"),h(D,"class","base-input"),h(D,"name","username"),h(D,"type","text"),h(D,"placeholder","Username"),h(A,"class","grid grid-flow-row gap-2"),h(B,"type","submit"),B.value="Save",h(B,"class","px-4 py-2 rounded text-base bg-blue-500 cursor-pointer"),h(e,"class","grid grid-flow-row gap-6")},m(n,o){v(n,s,o),x(s,e),x(e,r),x(r,t),x(t,l),x(r,b),x(r,j),x(r,S),g(k,r,null),x(e,P),x(e,A),x(A,I),x(I,U),x(A,N),x(A,D),x(A,L),g(T,A,null),x(e,q),x(e,z),x(z,B),R=!0,C||(F=M(a[2].call(null,s)),C=!0)},p(a,s){const e={};384&s&&(e.$$scope={dirty:s,ctx:a}),k.$set(e);const r={};384&s&&(r.$$scope={dirty:s,ctx:a}),T.$set(r)},i(a){R||(E(k.$$.fragment,a),E(T.$$.fragment,a),R=!0)},o(a){y(k.$$.fragment,a),y(T.$$.fragment,a),R=!1},d(a){a&&u(s),w(k),w(T),C=!1,F()}}}function Q(a){let s,e;return{c(){s=c("p"),e=i("Please log in")},l(a){s=p(a,"P",{});var r=d(s);e=$(r,"Please log in"),r.forEach(u)},m(a,r){v(a,s,r),x(s,e)},p:q,i:q,o:q,d(a){a&&u(s)}}}function X(a){let s,e,r=(a[7]||"")+"";return{c(){s=c("span"),e=i(r),this.h()},l(a){s=p(a,"SPAN",{class:!0});var t=d(s);e=$(t,r),t.forEach(u),this.h()},h(){h(s,"class","validation-message")},m(a,r){v(a,s,r),x(s,e)},p(a,s){128&s&&r!==(r=(a[7]||"")+"")&&z(e,r)},d(a){a&&u(s)}}}function G(a){let s,e,r=(a[7]||"")+"";return{c(){s=c("span"),e=i(r),this.h()},l(a){s=p(a,"SPAN",{class:!0});var t=d(s);e=$(t,r),t.forEach(u),this.h()},h(){h(s,"class","validation-message")},m(a,r){v(a,s,r),x(s,e)},p(a,s){128&s&&r!==(r=(a[7]||"")+"")&&z(e,r)},d(a){a&&u(s)}}}function W(a){let s,e;return{c(){s=c("span"),e=i(a[1])},l(r){s=p(r,"SPAN",{});var t=d(s);e=$(t,a[1]),t.forEach(u)},m(a,r){v(a,s,r),x(s,e)},p(a,s){2&s&&z(e,a[1])},d(a){a&&u(s)}}}function Y(a){let s,e,S,k,P,A,I,U,D,L,T;s=new K({props:{description:"Change your user settings",title:"Settings"}});const V=[Q,O],M=[];function q(a,s){return a[2]?1:0}function z(s){a[5](s)}A=q(a),I=M[A]=V[A](a);let B={$$slots:{default:[W]},$$scope:{ctx:a}};return void 0!==a[0]&&(B.running=a[0]),D=new R({props:B}),r.push((()=>t(D,"running",z))),{c(){n(s.$$.fragment),e=o(),S=c("h1"),k=i("Settings"),P=o(),I.c(),U=o(),n(D.$$.fragment),this.h()},l(a){const r=l('[data-svelte="svelte-nferlm"]',document.head);m(s.$$.fragment,r),r.forEach(u),e=f(a),S=p(a,"H1",{class:!0});var t=d(S);k=$(t,"Settings"),t.forEach(u),P=f(a),I.l(a),U=f(a),m(D.$$.fragment,a),this.h()},h(){h(S,"class","text-4xl my-4 font-bold")},m(a,r){g(s,document.head,null),v(a,e,r),v(a,S,r),x(S,k),v(a,P,r),M[A].m(a,r),v(a,U,r),g(D,a,r),T=!0},p(a,[s]){let e=A;A=q(a),A===e?M[A].p(a,s):(N(),y(M[e],1,1,(()=>{M[e]=null})),b(),I=M[A],I?I.p(a,s):(I=M[A]=V[A](a),I.c()),E(I,1),I.m(U.parentNode,U));const r={};258&s&&(r.$$scope={dirty:s,ctx:a}),!L&&1&s&&(L=!0,r.running=a[0],j((()=>L=!1))),D.$set(r)},i(a){T||(E(s.$$.fragment,a),E(I),E(D.$$.fragment,a),T=!0)},o(a){y(s.$$.fragment,a),y(I),y(D.$$.fragment,a),T=!1},d(a){w(s),a&&u(e),a&&u(S),a&&u(P),M[A].d(a),a&&u(U),w(D,a)}}}function Z(a,s,e){let r;S(a,H,(a=>e(4,r=a)));let t="",n=!1;const o=k({query:B}),c=P({avatar:A(I().refine((a=>"name"in a&&"size"in a&&"type"in a))),username:U().min(3).max(32)});let i;return a.$$.update=()=>{if(16&a.$$.dirty&&r){const{form:a}=D({initialValues:{username:r.username},extend:[L,T],validateSchema:c,onSubmit:a=>{o({user:F(a,c),userId:r.id}).then((a=>{a.error?(console.error(a.error.message),e(1,t="Error editing guide: "+a.error.message),e(0,n=!0)):C(J+"/user/"+a.data.updateUser.id)}))}});e(2,i=a)}1&a.$$.dirty&&(n||e(1,t=""))},[n,t,i,c,r,function(a){n=a,e(0,n),e(4,r)}]}class _ extends a{constructor(a){super(),s(this,a,Z,Y,e,{userSchema:3})}get userSchema(){return this.$$.ctx[3]}}export{_ as default};
//# sourceMappingURL=index.svelte-22608cdd.js.map
