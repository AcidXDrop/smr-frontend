import{S as Y,i as Z,s as ee,J as te,K as se,j as x,k as I,e as h,t as A,_ as ae,m as B,d as u,n as N,c as $,a as E,g as M,b as p,o as C,f as P,R as c,u as q,w as re,x as F,L as ne,v as H,M as oe,Q as ie,aF as le,aM as ue,aN as ce,aG as pe,r as fe,aJ as me,aK as de,aL as _e,aH as X,aI as ge,V as K,h as z}from"../../chunks/vendor-5e5b2079.js";import{U as he}from"../../chunks/graphql-8fe081d6.js";import{T as $e}from"../../chunks/Toast-c7c36427.js";import{g as ve}from"../../chunks/navigation-51f4a605.js";import{t as be}from"../../chunks/forms-8d025218.js";import{a as ke}from"../../chunks/user-ba47f179.js";import{b as ye}from"../../chunks/paths-6758d194.js";import{M as Ee}from"../../chunks/MetaDescriptors-20105bba.js";import"../../chunks/singletons-12a22614.js";import"../../chunks/stores-0968c272.js";function Se(i){let t,a,e,r,n,d,o,b,f,_,g,v,k,D,S,V,s,m,y,j,R,J,G;return f=new X({props:{for:"avatar",$$slots:{default:[we,({messages:l})=>({7:l}),({messages:l})=>l?128:0]},$$scope:{ctx:i}}}),s=new X({props:{for:"username",$$slots:{default:[Te,({messages:l})=>({7:l}),({messages:l})=>l?128:0]},$$scope:{ctx:i}}}),{c(){t=h("form"),a=h("div"),e=h("div"),r=h("label"),n=A("Avatar:"),d=I(),o=h("input"),b=I(),x(f.$$.fragment),_=I(),g=h("div"),v=h("label"),k=A("Username:"),D=I(),S=h("input"),V=I(),x(s.$$.fragment),m=I(),y=h("div"),j=h("input"),this.h()},l(l){t=$(l,"FORM",{});var w=E(t);a=$(w,"DIV",{class:!0});var T=E(a);e=$(T,"DIV",{class:!0});var U=E(e);r=$(U,"LABEL",{for:!0});var O=E(r);n=M(O,"Avatar:"),O.forEach(u),d=N(U),o=$(U,"INPUT",{id:!0,class:!0,name:!0,type:!0,accept:!0,placeholder:!0}),b=N(U),B(f.$$.fragment,U),U.forEach(u),_=N(T),g=$(T,"DIV",{class:!0});var L=E(g);v=$(L,"LABEL",{for:!0});var Q=E(v);k=M(Q,"Username:"),Q.forEach(u),D=N(L),S=$(L,"INPUT",{id:!0,class:!0,name:!0,type:!0,placeholder:!0}),V=N(L),B(s.$$.fragment,L),L.forEach(u),m=N(T),y=$(T,"DIV",{});var W=E(y);j=$(W,"INPUT",{type:!0,class:!0}),W.forEach(u),T.forEach(u),w.forEach(u),this.h()},h(){p(r,"for","avatar"),p(o,"id","avatar"),p(o,"class","base-input"),p(o,"name","avatar"),p(o,"type","file"),p(o,"accept","image/png,image/jpeg,image/gif"),p(o,"placeholder","Avatar"),p(e,"class","grid grid-flow-row gap-2"),p(v,"for","username"),p(S,"id","username"),p(S,"class","base-input"),p(S,"name","username"),p(S,"type","text"),p(S,"placeholder","Username"),p(g,"class","grid grid-flow-row gap-2"),p(j,"type","submit"),j.value="Save",p(j,"class","px-4 py-2 rounded text-base bg-blue-500 cursor-pointer"),p(a,"class","grid grid-flow-row gap-6")},m(l,w){P(l,t,w),c(t,a),c(a,e),c(e,r),c(r,n),c(e,d),c(e,o),c(e,b),C(f,e,null),c(a,_),c(a,g),c(g,v),c(v,k),c(g,D),c(g,S),c(g,V),C(s,g,null),c(a,m),c(a,y),c(y,j),R=!0,J||(G=ge(i[2].call(null,t)),J=!0)},p(l,w){const T={};w&384&&(T.$$scope={dirty:w,ctx:l}),f.$set(T);const U={};w&384&&(U.$$scope={dirty:w,ctx:l}),s.$set(U)},i(l){R||(F(f.$$.fragment,l),F(s.$$.fragment,l),R=!0)},o(l){q(f.$$.fragment,l),q(s.$$.fragment,l),R=!1},d(l){l&&u(t),H(f),H(s),J=!1,G()}}}function je(i){let t,a;return{c(){t=h("p"),a=A("Please log in")},l(e){t=$(e,"P",{});var r=E(t);a=M(r,"Please log in"),r.forEach(u)},m(e,r){P(e,t,r),c(t,a)},p:K,i:K,o:K,d(e){e&&u(t)}}}function we(i){let t,a=(i[7]||"")+"",e;return{c(){t=h("span"),e=A(a),this.h()},l(r){t=$(r,"SPAN",{class:!0});var n=E(t);e=M(n,a),n.forEach(u),this.h()},h(){p(t,"class","validation-message")},m(r,n){P(r,t,n),c(t,e)},p(r,n){n&128&&a!==(a=(r[7]||"")+"")&&z(e,a)},d(r){r&&u(t)}}}function Te(i){let t,a=(i[7]||"")+"",e;return{c(){t=h("span"),e=A(a),this.h()},l(r){t=$(r,"SPAN",{class:!0});var n=E(t);e=M(n,a),n.forEach(u),this.h()},h(){p(t,"class","validation-message")},m(r,n){P(r,t,n),c(t,e)},p(r,n){n&128&&a!==(a=(r[7]||"")+"")&&z(e,a)},d(r){r&&u(t)}}}function Ue(i){let t,a;return{c(){t=h("span"),a=A(i[1])},l(e){t=$(e,"SPAN",{});var r=E(t);a=M(r,i[1]),r.forEach(u)},m(e,r){P(e,t,r),c(t,a)},p(e,r){r&2&&z(a,e[1])},d(e){e&&u(t)}}}function Ie(i){let t,a,e,r,n,d,o,b,f,_,g;t=new Ee({props:{description:"Change your user settings",title:"Settings"}});const v=[je,Se],k=[];function D(s,m){return s[2]?1:0}d=D(i),o=k[d]=v[d](i);function S(s){i[5](s)}let V={$$slots:{default:[Ue]},$$scope:{ctx:i}};return i[0]!==void 0&&(V.running=i[0]),f=new $e({props:V}),te.push(()=>se(f,"running",S)),{c(){x(t.$$.fragment),a=I(),e=h("h1"),r=A("Settings"),n=I(),o.c(),b=I(),x(f.$$.fragment),this.h()},l(s){const m=ae('[data-svelte="svelte-1ae5i2c"]',document.head);B(t.$$.fragment,m),m.forEach(u),a=N(s),e=$(s,"H1",{class:!0});var y=E(e);r=M(y,"Settings"),y.forEach(u),n=N(s),o.l(s),b=N(s),B(f.$$.fragment,s),this.h()},h(){p(e,"class","text-4xl my-4 font-bold")},m(s,m){C(t,document.head,null),P(s,a,m),P(s,e,m),c(e,r),P(s,n,m),k[d].m(s,m),P(s,b,m),C(f,s,m),g=!0},p(s,[m]){let y=d;d=D(s),d===y?k[d].p(s,m):(fe(),q(k[y],1,1,()=>{k[y]=null}),re(),o=k[d],o?o.p(s,m):(o=k[d]=v[d](s),o.c()),F(o,1),o.m(b.parentNode,b));const j={};m&258&&(j.$$scope={dirty:m,ctx:s}),!_&&m&1&&(_=!0,j.running=s[0],ne(()=>_=!1)),f.$set(j)},i(s){g||(F(t.$$.fragment,s),F(o),F(f.$$.fragment,s),g=!0)},o(s){q(t.$$.fragment,s),q(o),q(f.$$.fragment,s),g=!1},d(s){H(t),s&&u(a),s&&u(e),s&&u(n),k[d].d(s),s&&u(b),H(f,s)}}}function Ne(i,t,a){let e;oe(i,ke,_=>a(4,e=_));let r="",n=!1;const d=ie({query:he}),o=le({avatar:ue(ce().refine(_=>"name"in _&&"size"in _&&"type"in _)),username:pe().min(3).max(32)});let b;function f(_){n=_,a(0,n),a(4,e)}return i.$$.update=()=>{if(i.$$.dirty&16&&e){const{form:_}=me({initialValues:{username:e.username},extend:[de,_e],validateSchema:o,onSubmit:g=>{d({user:be(g,o),userId:e.id}).then(v=>{v.error?(console.error(v.error.message),a(1,r="Error editing guide: "+v.error.message),a(0,n=!0)):ve(ye+"/user/"+v.data.updateUser.id)})}});a(2,b=_)}i.$$.dirty&1&&(n||a(1,r=""))},[n,r,b,o,e,f]}class Be extends Y{constructor(t){super();Z(this,t,Ne,Ie,ee,{userSchema:3})}get userSchema(){return this.$$.ctx[3]}}export{Be as default};
//# sourceMappingURL=index.svelte-0f43ea03.js.map
