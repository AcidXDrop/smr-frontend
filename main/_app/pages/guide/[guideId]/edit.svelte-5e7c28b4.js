import{S as t,i as e,s,j as a,m as r,o as n,x as i,u as o,v as d,J as u,K as c,l as m,k as g,e as f,t as p,$ as l,d as $,n as h,c as k,a as j,g as E,b as G,R as v,f as b,w as x,L as w,N as I,M as y,Q as N,O as S,r as q,h as L,X as M}from"../../../chunks/vendor-717a693c.js";import{p as O}from"../../../chunks/routing-1d144003.js";import{r as P,E as T}from"../../../chunks/graphql-7c12eb8b.js";import{T as V}from"../../../chunks/Toast-88c84b53.js";import{g as _}from"../../../chunks/navigation-51f4a605.js";import{G as A}from"../../../chunks/GuideForm-150ae69c.js";import{b as D}from"../../../chunks/paths-6758d194.js";import{M as F}from"../../../chunks/MetaDescriptors-a7f74224.js";import"../../../chunks/singletons-12a22614.js";import"../../../chunks/forms-8d025218.js";import"../../../chunks/markdown-5153303f.js";import"../../../chunks/stores-ef71dba6.js";function H(t){let e,s;return e=new F({props:{description:"Editing guide '"+t[2].data.getGuide.short_description+"'",title:"Edit guide '"+t[2].data.getGuide.name+"'"}}),{c(){a(e.$$.fragment)},l(t){r(e.$$.fragment,t)},m(t,a){n(e,t,a),s=!0},p(t,s){const a={};4&s&&(a.description="Editing guide '"+t[2].data.getGuide.short_description+"'"),4&s&&(a.title="Edit guide '"+t[2].data.getGuide.name+"'"),e.$set(a)},i(t){s||(i(e.$$.fragment,t),s=!0)},o(t){o(e.$$.fragment,t),s=!1},d(t){d(e,t)}}}function J(t){let e,s;return e=new A({props:{onSubmit:t[4],initialValues:t[2].data.getGuide,submitText:"Save"}}),{c(){a(e.$$.fragment)},l(t){r(e.$$.fragment,t)},m(t,a){n(e,t,a),s=!0},p(t,s){const a={};4&s&&(a.initialValues=t[2].data.getGuide),e.$set(a)},i(t){s||(i(e.$$.fragment,t),s=!0)},o(t){o(e.$$.fragment,t),s=!1},d(t){d(e,t)}}}function K(t){let e,s,a,r=t[2].error.message+"";return{c(){e=f("p"),s=p("Oh no... "),a=p(r)},l(t){e=k(t,"P",{});var n=j(e);s=E(n,"Oh no... "),a=E(n,r),n.forEach($)},m(t,r){b(t,e,r),v(e,s),v(e,a)},p(t,e){4&e&&r!==(r=t[2].error.message+"")&&L(a,r)},i:M,o:M,d(t){t&&$(e)}}}function Q(t){let e,s;return{c(){e=f("p"),s=p("Loading...")},l(t){e=k(t,"P",{});var a=j(e);s=E(a,"Loading..."),a.forEach($)},m(t,a){b(t,e,a),v(e,s)},p:M,i:M,o:M,d(t){t&&$(e)}}}function R(t){let e,s;return{c(){e=f("span"),s=p(t[1])},l(a){e=k(a,"SPAN",{});var r=j(e);s=E(r,t[1]),r.forEach($)},m(t,a){b(t,e,a),v(e,s)},p(t,e){2&e&&L(s,t[1])},d(t){t&&$(e)}}}function X(t){let e,s,I,y,N,S,L,M,O,P,T,_=!t[2].fetching&&!t[2].error&&t[2].data.getGuide&&H(t);const A=[Q,K,J],D=[];function F(t,e){return t[2].fetching?0:t[2].error?1:2}function X(e){t[6](e)}S=F(t),L=D[S]=A[S](t);let z={$$slots:{default:[R]},$$scope:{ctx:t}};return void 0!==t[0]&&(z.running=t[0]),O=new V({props:z}),u.push((()=>c(O,"running",X))),{c(){_&&_.c(),e=m(),s=g(),I=f("h1"),y=p("Edit Guide"),N=g(),L.c(),M=g(),a(O.$$.fragment),this.h()},l(t){const a=l('[data-svelte="svelte-11f8iqo"]',document.head);_&&_.l(a),e=m(),a.forEach($),s=h(t),I=k(t,"H1",{class:!0});var n=j(I);y=E(n,"Edit Guide"),n.forEach($),N=h(t),L.l(t),M=h(t),r(O.$$.fragment,t),this.h()},h(){G(I,"class","text-4xl my-4 font-bold")},m(t,a){_&&_.m(document.head,null),v(document.head,e),b(t,s,a),b(t,I,a),v(I,y),b(t,N,a),D[S].m(t,a),b(t,M,a),n(O,t,a),T=!0},p(t,[s]){t[2].fetching||t[2].error||!t[2].data.getGuide?_&&(q(),o(_,1,1,(()=>{_=null})),x()):_?(_.p(t,s),4&s&&i(_,1)):(_=H(t),_.c(),i(_,1),_.m(e.parentNode,e));let a=S;S=F(t),S===a?D[S].p(t,s):(q(),o(D[a],1,1,(()=>{D[a]=null})),x(),L=D[S],L?L.p(t,s):(L=D[S]=A[S](t),L.c()),i(L,1),L.m(M.parentNode,M));const r={};258&s&&(r.$$scope={dirty:s,ctx:t}),!P&&1&s&&(P=!0,r.running=t[0],w((()=>P=!1))),O.$set(r)},i(t){T||(i(_),i(L),i(O.$$.fragment,t),T=!0)},o(t){o(_),o(L),o(O.$$.fragment,t),T=!1},d(t){_&&_.d(t),$(e),t&&$(s),t&&$(I),t&&$(N),D[S].d(t),t&&$(M),d(O,t)}}}const z=O();function B(t,e,s){let a,{guideId:r}=e,n="",i=!1;const o=I(P,{guide:r});y(t,o,(t=>s(2,a=t)));const d=N({query:T});return S(o),t.$$set=t=>{"guideId"in t&&s(5,r=t.guideId)},t.$$.update=()=>{1&t.$$.dirty&&(i||s(1,n=""))},[i,n,a,o,t=>{d({guideId:r,guide:t}).then((t=>{t.error?(console.error(t.error.message),s(1,n="Error editing guide: "+t.error.message),s(0,i=!0)):_(D+"/guide/"+t.data.updateGuide.id)}))},r,function(t){i=t,s(0,i)}]}class C extends t{constructor(t){super(),e(this,t,B,X,s,{guideId:5})}}export{C as default,z as load};
//# sourceMappingURL=edit.svelte-5e7c28b4.js.map
