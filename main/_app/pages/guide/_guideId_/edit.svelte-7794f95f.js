import{S as A,i as B,s as H,w as G,x as E,y as j,q as _,o as g,B as q,ay as Q,M as R,N as X,l as v,k as D,e as y,t as w,a2 as Z,d as l,m as I,c as M,a as P,h as S,b as z,X as b,g as $,p as O,O as J,R as K,P as U,Q as W,T as Y,aC as x,n as F,j as L,Z as T}from"../../../chunks/vendor-1ba4e540.js";import{p as ee}from"../../../chunks/routing-689f9c1f.js";import{s as te,E as se}from"../../../chunks/graphql-a19cc583.js";import{T as re}from"../../../chunks/Toast-d9f74c91.js";import{g as ne}from"../../../chunks/navigation-b10cf5bf.js";import{G as oe}from"../../../chunks/GuideForm-f28adec3.js";import{b as ae}from"../../../chunks/paths-396f020f.js";import{M as ie}from"../../../chunks/MetaDescriptors-28c89374.js";import"../../../chunks/singletons-4a680913.js";import"../../../chunks/forms-91d48c56.js";import"../../../chunks/markdown-1c881021.js";import"../../../chunks/stores-db79f75e.js";function V(o){let t,s;return t=new ie({props:{description:"Editing guide '"+o[2].data.getGuide.short_description+"'",title:"Edit guide '"+o[2].data.getGuide.name+"'"}}),{c(){G(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,r){j(t,e,r),s=!0},p(e,r){const i={};r&4&&(i.description="Editing guide '"+e[2].data.getGuide.short_description+"'"),r&4&&(i.title="Edit guide '"+e[2].data.getGuide.name+"'"),t.$set(i)},i(e){s||(_(t.$$.fragment,e),s=!0)},o(e){g(t.$$.fragment,e),s=!1},d(e){q(t,e)}}}function ue(o){let t,s;return t=new oe({props:{onSubmit:o[4],initialValues:o[2].data.getGuide,submitText:"Save"}}),{c(){G(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,r){j(t,e,r),s=!0},p(e,r){const i={};r&4&&(i.initialValues=e[2].data.getGuide),t.$set(i)},i(e){s||(_(t.$$.fragment,e),s=!0)},o(e){g(t.$$.fragment,e),s=!1},d(e){q(t,e)}}}function fe(o){let t,s,e=o[2].error.message+"",r;return{c(){t=y("p"),s=w("Oh no... "),r=w(e)},l(i){t=M(i,"P",{});var a=P(t);s=S(a,"Oh no... "),r=S(a,e),a.forEach(l)},m(i,a){$(i,t,a),b(t,s),b(t,r)},p(i,a){a&4&&e!==(e=i[2].error.message+"")&&L(r,e)},i:T,o:T,d(i){i&&l(t)}}}function ce(o){let t,s;return{c(){t=y("p"),s=w("Loading...")},l(e){t=M(e,"P",{});var r=P(t);s=S(r,"Loading..."),r.forEach(l)},m(e,r){$(e,t,r),b(t,s)},p:T,i:T,o:T,d(e){e&&l(t)}}}function le(o){let t,s,e,r;const i=[ce,fe,ue],a=[];function m(u,d){return u[2].fetching?0:u[2].error?1:2}return t=m(o),s=a[t]=i[t](o),{c(){s.c(),e=v()},l(u){s.l(u),e=v()},m(u,d){a[t].m(u,d),$(u,e,d),r=!0},p(u,d){let p=t;t=m(u),t===p?a[t].p(u,d):(F(),g(a[p],1,1,()=>{a[p]=null}),O(),s=a[t],s?s.p(u,d):(s=a[t]=i[t](u),s.c()),_(s,1),s.m(e.parentNode,e))},i(u){r||(_(s),r=!0)},o(u){g(s),r=!1},d(u){a[t].d(u),u&&l(e)}}}function de(o){let t,s;return t=new x({props:{$$slots:{default:[le]},$$scope:{ctx:o}}}),{c(){G(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,r){j(t,e,r),s=!0},p(e,r){const i={};r&260&&(i.$$scope={dirty:r,ctx:e}),t.$set(i)},i(e){s||(_(t.$$.fragment,e),s=!0)},o(e){g(t.$$.fragment,e),s=!1},d(e){q(t,e)}}}function me(o){let t,s;return{c(){t=y("span"),s=w(o[1])},l(e){t=M(e,"SPAN",{});var r=P(t);s=S(r,o[1]),r.forEach(l)},m(e,r){$(e,t,r),b(t,s)},p(e,r){r&2&&L(s,e[1])},d(e){e&&l(t)}}}function pe(o){let t,s,e,r,i,a,m,u,d,p,f=!o[2].fetching&&!o[2].error&&o[2].data.getGuide&&V(o);a=new Q({props:{$$slots:{default:[de]},$$scope:{ctx:o}}});function h(n){o[6](n)}let N={$$slots:{default:[me]},$$scope:{ctx:o}};return o[0]!==void 0&&(N.running=o[0]),u=new re({props:N}),R.push(()=>X(u,"running",h)),{c(){f&&f.c(),t=v(),s=D(),e=y("h1"),r=w("Edit Guide"),i=D(),G(a.$$.fragment),m=D(),G(u.$$.fragment),this.h()},l(n){const c=Z('[data-svelte="svelte-1e0nmq8"]',document.head);f&&f.l(c),t=v(),c.forEach(l),s=I(n),e=M(n,"H1",{class:!0});var k=P(e);r=S(k,"Edit Guide"),k.forEach(l),i=I(n),E(a.$$.fragment,n),m=I(n),E(u.$$.fragment,n),this.h()},h(){z(e,"class","text-4xl my-4 font-bold")},m(n,c){f&&f.m(document.head,null),b(document.head,t),$(n,s,c),$(n,e,c),b(e,r),$(n,i,c),j(a,n,c),$(n,m,c),j(u,n,c),p=!0},p(n,[c]){!n[2].fetching&&!n[2].error&&n[2].data.getGuide?f?(f.p(n,c),c&4&&_(f,1)):(f=V(n),f.c(),_(f,1),f.m(t.parentNode,t)):f&&(F(),g(f,1,1,()=>{f=null}),O());const k={};c&260&&(k.$$scope={dirty:c,ctx:n}),a.$set(k);const C={};c&258&&(C.$$scope={dirty:c,ctx:n}),!d&&c&1&&(d=!0,C.running=n[0],J(()=>d=!1)),u.$set(C)},i(n){p||(_(f),_(a.$$.fragment,n),_(u.$$.fragment,n),p=!0)},o(n){g(f),g(a.$$.fragment,n),g(u.$$.fragment,n),p=!1},d(n){f&&f.d(n),l(t),n&&l(s),n&&l(e),n&&l(i),q(a,n),n&&l(m),q(u,n)}}}const ve=ee();function _e(o,t,s){let e,{guideId:r}=t,i="",a=!1;const m=K(te,{guide:r});U(o,m,f=>s(2,e=f));const u=W({query:se}),d=f=>{u({guideId:r,guide:f}).then(h=>{h.error?(console.error(h.error.message),s(1,i="Error editing guide: "+h.error.message),s(0,a=!0)):ne(ae+"/guide/"+h.data.updateGuide.id)})};Y(m);function p(f){a=f,s(0,a)}return o.$$set=f=>{"guideId"in f&&s(5,r=f.guideId)},o.$$.update=()=>{o.$$.dirty&1&&(a||s(1,i=""))},[a,i,e,m,d,r,p]}class ye extends A{constructor(t){super();B(this,t,_e,pe,H,{guideId:5})}}export{ye as default,ve as load};
//# sourceMappingURL=edit.svelte-7794f95f.js.map
