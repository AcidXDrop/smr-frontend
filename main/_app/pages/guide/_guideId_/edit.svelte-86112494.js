import{S as A,i as H,s as K,j as G,m as E,o as j,x as _,u as g,v as q,at as Q,K as X,L as z,l as T,k as N,e as M,t as w,a1 as B,d as c,n as y,c as P,a as D,g as S,b as J,V as b,f as $,w as L,M as R,P as U,N as W,O as Y,Q as Z,au as x,r as O,h as V,X as v}from"../../../chunks/vendor-897e4d1c.js";import{p as ee}from"../../../chunks/routing-1d144003.js";import{q as te,E as re}from"../../../chunks/graphql-5f517cf7.js";import{T as se}from"../../../chunks/Toast-b49597c0.js";import{g as ne}from"../../../chunks/navigation-51f4a605.js";import{G as oe}from"../../../chunks/GuideForm-dbb13109.js";import{b as ae}from"../../../chunks/paths-6758d194.js";import{M as ie}from"../../../chunks/MetaDescriptors-77020fbf.js";import"../../../chunks/singletons-12a22614.js";import"../../../chunks/forms-8d025218.js";import"../../../chunks/markdown-3b995671.js";import"../../../chunks/stores-786d084c.js";function F(o){let t,r;return t=new ie({props:{description:"Editing guide '"+o[2].data.getGuide.short_description+"'",title:"Edit guide '"+o[2].data.getGuide.name+"'"}}),{c(){G(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,s){j(t,e,s),r=!0},p(e,s){const i={};s&4&&(i.description="Editing guide '"+e[2].data.getGuide.short_description+"'"),s&4&&(i.title="Edit guide '"+e[2].data.getGuide.name+"'"),t.$set(i)},i(e){r||(_(t.$$.fragment,e),r=!0)},o(e){g(t.$$.fragment,e),r=!1},d(e){q(t,e)}}}function ue(o){let t,r;return t=new oe({props:{onSubmit:o[4],initialValues:o[2].data.getGuide,submitText:"Save"}}),{c(){G(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,s){j(t,e,s),r=!0},p(e,s){const i={};s&4&&(i.initialValues=e[2].data.getGuide),t.$set(i)},i(e){r||(_(t.$$.fragment,e),r=!0)},o(e){g(t.$$.fragment,e),r=!1},d(e){q(t,e)}}}function fe(o){let t,r,e=o[2].error.message+"",s;return{c(){t=M("p"),r=w("Oh no... "),s=w(e)},l(i){t=P(i,"P",{});var a=D(t);r=S(a,"Oh no... "),s=S(a,e),a.forEach(c)},m(i,a){$(i,t,a),b(t,r),b(t,s)},p(i,a){a&4&&e!==(e=i[2].error.message+"")&&V(s,e)},i:v,o:v,d(i){i&&c(t)}}}function le(o){let t,r;return{c(){t=M("p"),r=w("Loading...")},l(e){t=P(e,"P",{});var s=D(t);r=S(s,"Loading..."),s.forEach(c)},m(e,s){$(e,t,s),b(t,r)},p:v,i:v,o:v,d(e){e&&c(t)}}}function ce(o){let t,r,e,s;const i=[le,fe,ue],a=[];function m(u,d){return u[2].fetching?0:u[2].error?1:2}return t=m(o),r=a[t]=i[t](o),{c(){r.c(),e=T()},l(u){r.l(u),e=T()},m(u,d){a[t].m(u,d),$(u,e,d),s=!0},p(u,d){let p=t;t=m(u),t===p?a[t].p(u,d):(O(),g(a[p],1,1,()=>{a[p]=null}),L(),r=a[t],r?r.p(u,d):(r=a[t]=i[t](u),r.c()),_(r,1),r.m(e.parentNode,e))},i(u){s||(_(r),s=!0)},o(u){g(r),s=!1},d(u){a[t].d(u),u&&c(e)}}}function de(o){let t,r;return t=new x({props:{$$slots:{default:[ce]},$$scope:{ctx:o}}}),{c(){G(t.$$.fragment)},l(e){E(t.$$.fragment,e)},m(e,s){j(t,e,s),r=!0},p(e,s){const i={};s&260&&(i.$$scope={dirty:s,ctx:e}),t.$set(i)},i(e){r||(_(t.$$.fragment,e),r=!0)},o(e){g(t.$$.fragment,e),r=!1},d(e){q(t,e)}}}function me(o){let t,r;return{c(){t=M("span"),r=w(o[1])},l(e){t=P(e,"SPAN",{});var s=D(t);r=S(s,o[1]),s.forEach(c)},m(e,s){$(e,t,s),b(t,r)},p(e,s){s&2&&V(r,e[1])},d(e){e&&c(t)}}}function pe(o){let t,r,e,s,i,a,m,u,d,p,f=!o[2].fetching&&!o[2].error&&o[2].data.getGuide&&F(o);a=new Q({props:{$$slots:{default:[de]},$$scope:{ctx:o}}});function h(n){o[6](n)}let C={$$slots:{default:[me]},$$scope:{ctx:o}};return o[0]!==void 0&&(C.running=o[0]),u=new se({props:C}),X.push(()=>z(u,"running",h)),{c(){f&&f.c(),t=T(),r=N(),e=M("h1"),s=w("Edit Guide"),i=N(),G(a.$$.fragment),m=N(),G(u.$$.fragment),this.h()},l(n){const l=B('[data-svelte="svelte-1e0nmq8"]',document.head);f&&f.l(l),t=T(),l.forEach(c),r=y(n),e=P(n,"H1",{class:!0});var k=D(e);s=S(k,"Edit Guide"),k.forEach(c),i=y(n),E(a.$$.fragment,n),m=y(n),E(u.$$.fragment,n),this.h()},h(){J(e,"class","text-4xl my-4 font-bold")},m(n,l){f&&f.m(document.head,null),b(document.head,t),$(n,r,l),$(n,e,l),b(e,s),$(n,i,l),j(a,n,l),$(n,m,l),j(u,n,l),p=!0},p(n,[l]){!n[2].fetching&&!n[2].error&&n[2].data.getGuide?f?(f.p(n,l),l&4&&_(f,1)):(f=F(n),f.c(),_(f,1),f.m(t.parentNode,t)):f&&(O(),g(f,1,1,()=>{f=null}),L());const k={};l&260&&(k.$$scope={dirty:l,ctx:n}),a.$set(k);const I={};l&258&&(I.$$scope={dirty:l,ctx:n}),!d&&l&1&&(d=!0,I.running=n[0],R(()=>d=!1)),u.$set(I)},i(n){p||(_(f),_(a.$$.fragment,n),_(u.$$.fragment,n),p=!0)},o(n){g(f),g(a.$$.fragment,n),g(u.$$.fragment,n),p=!1},d(n){f&&f.d(n),c(t),n&&c(r),n&&c(e),n&&c(i),q(a,n),n&&c(m),q(u,n)}}}const Te=ee();function _e(o,t,r){let e,{guideId:s}=t,i="",a=!1;const m=U(te,{guide:s});W(o,m,f=>r(2,e=f));const u=Y({query:re}),d=f=>{u({guideId:s,guide:f}).then(h=>{h.error?(console.error(h.error.message),r(1,i="Error editing guide: "+h.error.message),r(0,a=!0)):ne(ae+"/guide/"+h.data.updateGuide.id)})};Z(m);function p(f){a=f,r(0,a)}return o.$$set=f=>{"guideId"in f&&r(5,s=f.guideId)},o.$$.update=()=>{o.$$.dirty&1&&(a||r(1,i=""))},[a,i,e,m,d,s,p]}class Me extends A{constructor(t){super();H(this,t,_e,pe,K,{guideId:5})}}export{Me as default,Te as load};
//# sourceMappingURL=edit.svelte-86112494.js.map
