import{S as te,i as ne,s as re,ap as se,j as A,m as N,o as P,x as p,u as D,v as M,aq as ae,e as h,t as q,k as H,c as v,a as w,g as T,d as f,n as L,b as V,f as I,V as _,h as X,O as ve,l as Z,$ as be,w as oe,N as ue,aC as ke,R as we,P as De,r as le,X as C,C as Ee,J as Ge,K as fe,L as ce,M as de,W as y,ay as $e,az as Ie,T as je,U as Ve}from"../../../chunks/vendor-287bac90.js";import{l as Ce}from"../../../chunks/gql-161ca5e2.js";import{q as qe,r as Te}from"../../../chunks/graphql-7003d634.js";import{p as Ae}from"../../../chunks/routing-1d144003.js";import{b as x}from"../../../chunks/paths-6758d194.js";import{a as Ne}from"../../../chunks/user-a3198196.js";import{g as ge}from"../../../chunks/navigation-51f4a605.js";import{T as Pe}from"../../../chunks/Toast-7929c728.js";import{m as _e}from"../../../chunks/markdown-b94b05cb.js";import{M as Me}from"../../../chunks/MetaDescriptors-33a7a5ce.js";import"../../../chunks/singletons-12a22614.js";import"../../../chunks/stores-44c857e3.js";function Se(a){let e,n,t,s,r,l,i,m,u=a[0].created_at+"",g,o;return{c(){e=h("div"),n=h("h3"),t=q("Info"),s=H(),r=h("span"),l=h("strong"),i=q("Created:"),m=H(),g=q(u),o=h("br"),this.h()},l(d){e=v(d,"DIV",{class:!0});var b=w(e);n=v(b,"H3",{class:!0});var E=w(n);t=T(E,"Info"),E.forEach(f),s=L(b),r=v(b,"SPAN",{});var S=w(r);l=v(S,"STRONG",{});var j=w(l);i=T(j,"Created:"),j.forEach(f),m=L(S),g=T(S,u),S.forEach(f),o=v(b,"BR",{}),b.forEach(f),this.h()},h(){V(n,"class","text-2xl my-4 font-bold"),V(e,"class","text-lg")},m(d,b){I(d,e,b),_(e,n),_(n,t),_(e,s),_(e,r),_(r,l),_(l,i),_(r,m),_(r,g),_(e,o)},p(d,b){b&1&&u!==(u=d[0].created_at+"")&&X(g,u)},d(d){d&&f(e)}}}function Oe(a){let e,n;return e=new ae({props:{$$slots:{default:[Se]},$$scope:{ctx:a}}}),{c(){A(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,s){P(e,t,s),n=!0},p(t,s){const r={};s&3&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function He(a){let e,n;return e=new se({props:{$$slots:{default:[Oe]},$$scope:{ctx:a}}}),{c(){A(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,s){P(e,t,s),n=!0},p(t,[s]){const r={};s&3&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Le(a,e,n){let{guide:t}=e;return a.$$set=s=>{"guide"in s&&n(0,t=s.guide)},[t]}class We extends te{constructor(e){super();ne(this,e,Le,He,re,{guide:0})}}function Be(a){let e,n,t,s,r,l,i,m,u,g,o,d=a[0].username+"",b,E,S,j,B;return{c(){e=h("div"),n=h("h3"),t=q("Author"),s=H(),r=h("div"),l=h("div"),i=h("div"),u=H(),g=h("div"),o=h("a"),b=q(d),S=H(),j=h("div"),B=q("Writer"),this.h()},l(O){e=v(O,"DIV",{class:!0});var G=w(e);n=v(G,"H3",{class:!0});var F=w(n);t=T(F,"Author"),F.forEach(f),s=L(G),r=v(G,"DIV",{class:!0});var W=w(r);l=v(W,"DIV",{class:!0});var $=w(l);i=v($,"DIV",{class:!0,style:!0}),w(i).forEach(f),u=L($),g=v($,"DIV",{class:!0});var J=w(g);o=v(J,"A",{href:!0,class:!0});var K=w(o);b=T(K,d),K.forEach(f),S=L(J),j=v(J,"DIV",{});var Y=w(j);B=T(Y,"Writer"),Y.forEach(f),J.forEach(f),$.forEach(f),W.forEach(f),G.forEach(f),this.h()},h(){V(n,"class","text-2xl my-4 font-bold"),V(i,"class","rounded-full bg-cover w-14 h-14"),V(i,"style",m=`background-image: url("${a[0].avatar}")`),V(o,"href",E=""+(x+"/user/"+a[0].id+"/")),V(o,"class","text-yellow-500 underline"),V(g,"class","grid grid-flow-row"),V(l,"class","grid grid-flow-col auto-cols-min gap-x-4"),V(r,"class","grid auto-rows-min text-lg gap-y-4"),V(e,"class","grid grid-flow-row gap-y-2")},m(O,G){I(O,e,G),_(e,n),_(n,t),_(e,s),_(e,r),_(r,l),_(l,i),_(l,u),_(l,g),_(g,o),_(o,b),_(g,S),_(g,j),_(j,B)},p(O,G){G&1&&m!==(m=`background-image: url("${O[0].avatar}")`)&&V(i,"style",m),G&1&&d!==(d=O[0].username+"")&&X(b,d),G&1&&E!==(E=""+(x+"/user/"+O[0].id+"/"))&&V(o,"href",E)},d(O){O&&f(e)}}}function Fe(a){let e,n;return e=new ae({props:{$$slots:{default:[Be]},$$scope:{ctx:a}}}),{c(){A(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,s){P(e,t,s),n=!0},p(t,s){const r={};s&3&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Re(a){let e,n;return e=new se({props:{$$slots:{default:[Fe]},$$scope:{ctx:a}}}),{c(){A(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,s){P(e,t,s),n=!0},p(t,[s]){const r={};s&3&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Ue(a,e,n){let{author:t}=e;return a.$$set=s=>{"author"in s&&n(0,t=s.author)},[t]}class ze extends te{constructor(e){super();ne(this,e,Ue,Re,re,{author:0})}}function me(a){let e,n;return e=new Me({props:{description:a[3].data.getGuide.short_description,title:a[3].data.getGuide.name}}),{c(){A(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,s){P(e,t,s),n=!0},p(t,s){const r={};s&8&&(r.description=t[3].data.getGuide.short_description),s&8&&(r.title=t[3].data.getGuide.name),e.$set(r)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Je(a){let e;return{c(){e=q("404")},l(n){e=T(n,"404")},m(n,t){I(n,e,t)},p:C,i:C,o:C,d(n){n&&f(e)}}}function Ke(a){let e,n,t,s,r=a[3].data.getGuide.name+"",l,i,m,u,g,o,d,b,E,S,j,B,O,G,F,W,$=a[5]&&pe(a);u=new se({props:{$$slots:{default:[nt]},$$scope:{ctx:a}}}),d=new We({props:{guide:a[3].data.getGuide}}),E=new ze({props:{author:a[3].data.getGuide.user}});function J(c){a[14](c)}let K={$$slots:{default:[lt]},$$scope:{ctx:a}};a[6]!==void 0&&(K.open=a[6]),j=new Ge({props:K}),fe.push(()=>ce(j,"open",J));function Y(c){a[15](c)}let ie={$$slots:{default:[it]},$$scope:{ctx:a}};return a[2]!==void 0&&(ie.running=a[2]),G=new Pe({props:ie}),fe.push(()=>ce(G,"running",Y)),{c(){e=h("div"),n=h("div"),t=h("div"),s=h("h1"),l=q(r),i=H(),$&&$.c(),m=H(),A(u.$$.fragment),g=H(),o=h("div"),A(d.$$.fragment),b=H(),A(E.$$.fragment),S=H(),A(j.$$.fragment),O=H(),A(G.$$.fragment),this.h()},l(c){e=v(c,"DIV",{class:!0});var k=w(e);n=v(k,"DIV",{class:!0});var U=w(n);t=v(U,"DIV",{class:!0});var z=w(t);s=v(z,"H1",{class:!0});var Q=w(s);l=T(Q,r),Q.forEach(f),i=L(z),$&&$.l(z),z.forEach(f),m=L(U),N(u.$$.fragment,U),U.forEach(f),g=L(k),o=v(k,"DIV",{class:!0});var R=w(o);N(d.$$.fragment,R),b=L(R),N(E.$$.fragment,R),R.forEach(f),k.forEach(f),S=L(c),N(j.$$.fragment,c),O=L(c),N(G.$$.fragment,c),this.h()},h(){V(s,"class","text-4xl my-4 font-bold"),V(t,"class","grid grid-flow-col grid-auto-max h-auto gap-4 items-center svelte-1sejgqw"),V(n,"class","grid grid-cols-1 auto-rows-min gap-4"),V(o,"class","grid grid-cols-1 auto-rows-min gap-8"),V(e,"class","grid gap-8 grid-auto-max svelte-1sejgqw")},m(c,k){I(c,e,k),_(e,n),_(n,t),_(t,s),_(s,l),_(t,i),$&&$.m(t,null),_(n,m),P(u,n,null),_(e,g),_(e,o),P(d,o,null),_(o,b),P(E,o,null),I(c,S,k),P(j,c,k),I(c,O,k),P(G,c,k),W=!0},p(c,k){(!W||k&8)&&r!==(r=c[3].data.getGuide.name+"")&&X(l,r),c[5]?$?($.p(c,k),k&32&&p($,1)):($=pe(c),$.c(),p($,1),$.m(t,null)):$&&(le(),D($,1,1,()=>{$=null}),oe());const U={};k&262152&&(U.$$scope={dirty:k,ctx:c}),u.$set(U);const z={};k&8&&(z.guide=c[3].data.getGuide),d.$set(z);const Q={};k&8&&(Q.author=c[3].data.getGuide.user),E.$set(Q);const R={};k&262144&&(R.$$scope={dirty:k,ctx:c}),!B&&k&64&&(B=!0,R.open=c[6],de(()=>B=!1)),j.$set(R);const ee={};k&262160&&(ee.$$scope={dirty:k,ctx:c}),!F&&k&4&&(F=!0,ee.running=c[2],de(()=>F=!1)),G.$set(ee)},i(c){W||(p($),p(u.$$.fragment,c),p(d.$$.fragment,c),p(E.$$.fragment,c),p(j.$$.fragment,c),p(G.$$.fragment,c),W=!0)},o(c){D($),D(u.$$.fragment,c),D(d.$$.fragment,c),D(E.$$.fragment,c),D(j.$$.fragment,c),D(G.$$.fragment,c),W=!1},d(c){c&&f(e),$&&$.d(),M(u),M(d),M(E),c&&f(S),M(j,c),c&&f(O),M(G,c)}}}function Qe(a){let e,n,t=a[3].error.message+"",s;return{c(){e=h("p"),n=q("Oh no... "),s=q(t)},l(r){e=v(r,"P",{});var l=w(e);n=T(l,"Oh no... "),s=T(l,t),l.forEach(f)},m(r,l){I(r,e,l),_(e,n),_(e,s)},p(r,l){l&8&&t!==(t=r[3].error.message+"")&&X(s,t)},i:C,o:C,d(r){r&&f(e)}}}function Xe(a){let e,n;return{c(){e=h("p"),n=q("Loading...")},l(t){e=v(t,"P",{});var s=w(e);n=T(s,"Loading..."),s.forEach(f)},m(t,s){I(t,e,s),_(e,n)},p:C,i:C,o:C,d(t){t&&f(e)}}}function pe(a){let e,n,t,s;return e=new y({props:{variant:"outlined",$$slots:{default:[Ye]},$$scope:{ctx:a}}}),e.$on("click",a[10]),t=new y({props:{variant:"outlined",$$slots:{default:[Ze]},$$scope:{ctx:a}}}),t.$on("click",a[11]),{c(){A(e.$$.fragment),n=H(),A(t.$$.fragment)},l(r){N(e.$$.fragment,r),n=L(r),N(t.$$.fragment,r)},m(r,l){P(e,r,l),I(r,n,l),P(t,r,l),s=!0},p(r,l){const i={};l&262144&&(i.$$scope={dirty:l,ctx:r}),e.$set(i);const m={};l&262144&&(m.$$scope={dirty:l,ctx:r}),t.$set(m)},i(r){s||(p(e.$$.fragment,r),p(t.$$.fragment,r),s=!0)},o(r){D(e.$$.fragment,r),D(t.$$.fragment,r),s=!1},d(r){M(e,r),r&&f(n),M(t,r)}}}function Ye(a){let e;return{c(){e=q("Edit")},l(n){e=T(n,"Edit")},m(n,t){I(n,e,t)},d(n){n&&f(e)}}}function Ze(a){let e;return{c(){e=q("Delete")},l(n){e=T(n,"Delete")},m(n,t){I(n,e,t)},d(n){n&&f(e)}}}function ye(a){return{c:C,l:C,m:C,p:C,d:C}}function xe(a){let e,n=a[17]+"";return{c(){e=h("p")},l(t){e=v(t,"P",{});var s=w(e);s.forEach(f)},m(t,s){I(t,e,s),e.innerHTML=n},p(t,s){s&8&&n!==(n=t[17]+"")&&(e.innerHTML=n)},d(t){t&&f(e)}}}function et(a){return{c:C,l:C,m:C,p:C,d:C}}function tt(a){let e,n,t={ctx:a,current:null,token:null,hasCatch:!1,pending:et,then:xe,catch:ye,value:17};return $e(n=_e(a[3].data.getGuide.guide),t),{c(){e=h("div"),t.block.c(),this.h()},l(s){e=v(s,"DIV",{class:!0});var r=w(e);t.block.l(r),r.forEach(f),this.h()},h(){V(e,"class","markdown-content")},m(s,r){I(s,e,r),t.block.m(e,t.anchor=null),t.mount=()=>e,t.anchor=null},p(s,r){a=s,t.ctx=a,r&8&&n!==(n=_e(a[3].data.getGuide.guide))&&$e(n,t)||Ie(t,a,r)},d(s){s&&f(e),t.block.d(),t.token=null,t=null}}}function nt(a){let e,n;return e=new ae({props:{$$slots:{default:[tt]},$$scope:{ctx:a}}}),{c(){A(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,s){P(e,t,s),n=!0},p(t,s){const r={};s&262152&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){D(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function rt(a){let e;return{c(){e=q("Delete Guide?")},l(n){e=T(n,"Delete Guide?")},m(n,t){I(n,e,t)},d(n){n&&f(e)}}}function st(a){let e;return{c(){e=q("Cancel")},l(n){e=T(n,"Cancel")},m(n,t){I(n,e,t)},d(n){n&&f(e)}}}function at(a){let e;return{c(){e=q("Delete")},l(n){e=T(n,"Delete")},m(n,t){I(n,e,t)},d(n){n&&f(e)}}}function ot(a){let e,n,t,s,r,l,i,m;return r=new y({props:{variant:"outlined",$$slots:{default:[st]},$$scope:{ctx:a}}}),r.$on("click",a[12]),i=new y({props:{variant:"outlined",$$slots:{default:[at]},$$scope:{ctx:a}}}),i.$on("click",a[13]),{c(){e=h("div"),n=h("span"),t=q("Are you sure you wish to delete this guide"),s=H(),A(r.$$.fragment),l=H(),A(i.$$.fragment),this.h()},l(u){e=v(u,"DIV",{class:!0});var g=w(e);n=v(g,"SPAN",{});var o=w(n);t=T(o,"Are you sure you wish to delete this guide"),o.forEach(f),s=L(g),N(r.$$.fragment,g),l=L(g),N(i.$$.fragment,g),g.forEach(f),this.h()},h(){V(e,"class","grid grid-flow-row gap-4")},m(u,g){I(u,e,g),_(e,n),_(n,t),_(e,s),P(r,e,null),_(e,l),P(i,e,null),m=!0},p(u,g){const o={};g&262144&&(o.$$scope={dirty:g,ctx:u}),r.$set(o);const d={};g&262144&&(d.$$scope={dirty:g,ctx:u}),i.$set(d)},i(u){m||(p(r.$$.fragment,u),p(i.$$.fragment,u),m=!0)},o(u){D(r.$$.fragment,u),D(i.$$.fragment,u),m=!1},d(u){u&&f(e),M(r),M(i)}}}function lt(a){let e,n,t,s;return e=new je({props:{$$slots:{default:[rt]},$$scope:{ctx:a}}}),t=new Ve({props:{$$slots:{default:[ot]},$$scope:{ctx:a}}}),{c(){A(e.$$.fragment),n=H(),A(t.$$.fragment)},l(r){N(e.$$.fragment,r),n=L(r),N(t.$$.fragment,r)},m(r,l){P(e,r,l),I(r,n,l),P(t,r,l),s=!0},p(r,l){const i={};l&262144&&(i.$$scope={dirty:l,ctx:r}),e.$set(i);const m={};l&262144&&(m.$$scope={dirty:l,ctx:r}),t.$set(m)},i(r){s||(p(e.$$.fragment,r),p(t.$$.fragment,r),s=!0)},o(r){D(e.$$.fragment,r),D(t.$$.fragment,r),s=!1},d(r){M(e,r),r&&f(n),M(t,r)}}}function it(a){let e,n;return{c(){e=h("span"),n=q(a[4])},l(t){e=v(t,"SPAN",{});var s=w(e);n=T(s,a[4]),s.forEach(f)},m(t,s){I(t,e,s),_(e,n)},p(t,s){s&16&&X(n,t[4])},d(t){t&&f(e)}}}function ut(a){let e,n,t,s,r,l,i=!a[3].fetching&&!a[3].error&&a[3].data.getGuide&&me(a);const m=[Xe,Qe,Ke,Je],u=[];function g(o,d){return o[3].fetching?0:o[3].error?1:o[3].data.getGuide?2:3}return t=g(a),s=u[t]=m[t](a),{c(){i&&i.c(),e=Z(),n=H(),s.c(),r=Z()},l(o){const d=be('[data-svelte="svelte-bhfvpi"]',document.head);i&&i.l(d),e=Z(),d.forEach(f),n=L(o),s.l(o),r=Z()},m(o,d){i&&i.m(document.head,null),_(document.head,e),I(o,n,d),u[t].m(o,d),I(o,r,d),l=!0},p(o,[d]){!o[3].fetching&&!o[3].error&&o[3].data.getGuide?i?(i.p(o,d),d&8&&p(i,1)):(i=me(o),i.c(),p(i,1),i.m(e.parentNode,e)):i&&(le(),D(i,1,1,()=>{i=null}),oe());let b=t;t=g(o),t===b?u[t].p(o,d):(le(),D(u[b],1,1,()=>{u[b]=null}),oe(),s=u[t],s?s.p(o,d):(s=u[t]=m[t](o),s.c()),p(s,1),s.m(r.parentNode,r))},i(o){l||(p(i),p(s),l=!0)},o(o){D(i),D(s),l=!1},d(o){i&&i.d(o),f(e),o&&f(n),u[t].d(o),o&&f(r)}}}const he=ve(qe,{guide:void 0}),Dt=Ae(async a=>(he.variables.guide=a.page.params.guideId,Ce({guide:he})(a)));function ft(a,e,n){let t,s,r=C,l=()=>(r(),r=ke(g,$=>n(3,s=$)),g),i,m;ue(a,Ne,$=>n(9,i=$)),a.$$.on_destroy.push(()=>r());let{guideId:u}=e,{guide:g}=e;l();let o="",d=!1;const b=we({query:Te}),E=Ee(!1);ue(a,E,$=>n(6,m=$));const S=()=>{b({guideId:u}).then($=>{$.error?(console.error($.error.message),n(4,o="Error deleting guide: "+$.error.message),n(2,d=!0)):ge(x+"/guides")})};De(g);const j=()=>ge(x+"/guide/"+u+"/edit"),B=()=>E.set(!0),O=()=>E.set(!1),G=()=>S();function F($){m=$,E.set(m)}function W($){d=$,n(2,d)}return a.$$set=$=>{"guideId"in $&&n(0,u=$.guideId),"guide"in $&&l(n(1,g=$.guide))},a.$$.update=()=>{a.$$.dirty&520&&n(5,t=i?.roles?.deleteContent||i?.id===s?.data?.getGuide?.user?.id),a.$$.dirty&4&&(d||n(4,o=""))},[u,g,d,s,o,t,m,E,S,i,j,B,O,G,F,W]}class Et extends te{constructor(e){super();ne(this,e,ft,ut,re,{guideId:0,guide:1})}}export{Et as default,Dt as load};
//# sourceMappingURL=index.svelte-8894a267.js.map
