import{S as te,i as se,s as re,e as m,t as N,k as C,c as b,a as k,g as O,d as u,n as M,b as w,f as P,R as l,h as R,X as D,N as ke,j as Q,m as J,o as K,x as S,u as B,v as X,l as Z,$ as $e,w as oe,M as le,ac as Ee,Q as we,O as De,r as ie,C as Ge,W as x,Y as ue,am as de,J as ce,K as fe,an as Ie,L as ge}from"../../../chunks/vendor-bd04eeb5.js";import{M as ye}from"../../../chunks/MetaDescriptors-99b66b31.js";import{l as je}from"../../../chunks/gql-eaa81b41.js";import{r as Te,s as Ve}from"../../../chunks/graphql-44245247.js";import{p as Ne}from"../../../chunks/routing-1d144003.js";import{b as ee}from"../../../chunks/paths-6758d194.js";import{a as Oe}from"../../../chunks/user-3938001f.js";import{g as _e}from"../../../chunks/navigation-51f4a605.js";import{D as Ae}from"../../../chunks/Dialog-12b5db89.js";import{T as qe}from"../../../chunks/Toast-cf8cd1a0.js";import{m as he}from"../../../chunks/markdown-b0181a82.js";import"../../../chunks/stores-44ecde00.js";import"../../../chunks/singletons-12a22614.js";function Ce(r){let e,s,t,a,o,c,i,g,f=r[0].created_at+"",_,n;return{c(){e=m("div"),s=m("h3"),t=N("Info"),a=C(),o=m("span"),c=m("strong"),i=N("Created:"),g=C(),_=N(f),n=m("br"),this.h()},l(d){e=b(d,"DIV",{class:!0});var h=k(e);s=b(h,"H3",{class:!0});var y=k(s);t=O(y,"Info"),y.forEach(u),a=M(h),o=b(h,"SPAN",{});var $=k(o);c=b($,"STRONG",{});var E=k(c);i=O(E,"Created:"),E.forEach(u),g=M($),_=O($,f),$.forEach(u),n=b(h,"BR",{}),h.forEach(u),this.h()},h(){w(s,"class","text-2xl my-4 font-bold"),w(e,"class","text-lg")},m(d,h){P(d,e,h),l(e,s),l(s,t),l(e,a),l(e,o),l(o,c),l(c,i),l(o,g),l(o,_),l(e,n)},p(d,[h]){h&1&&f!==(f=d[0].created_at+"")&&R(_,f)},i:D,o:D,d(d){d&&u(e)}}}function Me(r,e,s){let{guide:t}=e;return r.$$set=a=>{"guide"in a&&s(0,t=a.guide)},[t]}class Pe extends te{constructor(e){super();se(this,e,Me,Ce,re,{guide:0})}}function Se(r){let e,s,t,a,o,c,i,g,f,_,n,d=r[0].username+"",h,y,$,E,T;return{c(){e=m("div"),s=m("h3"),t=N("Author"),a=C(),o=m("div"),c=m("div"),i=m("div"),f=C(),_=m("div"),n=m("a"),h=N(d),$=C(),E=m("div"),T=N("Writer"),this.h()},l(V){e=b(V,"DIV",{class:!0});var j=k(e);s=b(j,"H3",{class:!0});var A=k(s);t=O(A,"Author"),A.forEach(u),a=M(j),o=b(j,"DIV",{class:!0});var H=k(o);c=b(H,"DIV",{class:!0});var v=k(c);i=b(v,"DIV",{class:!0,style:!0}),k(i).forEach(u),f=M(v),_=b(v,"DIV",{class:!0});var I=k(_);n=b(I,"A",{href:!0,class:!0});var q=k(n);h=O(q,d),q.forEach(u),$=M(I),E=b(I,"DIV",{});var Y=k(E);T=O(Y,"Writer"),Y.forEach(u),I.forEach(u),v.forEach(u),H.forEach(u),j.forEach(u),this.h()},h(){w(s,"class","text-2xl my-4 font-bold"),w(i,"class","rounded-full bg-cover w-14 h-14"),w(i,"style",g=`background-image: url("${r[0].avatar}")`),w(n,"href",y=""+(ee+"/user/"+r[0].id+"/")),w(n,"class","text-yellow-500 underline"),w(_,"class","grid grid-flow-row"),w(c,"class","grid grid-flow-col auto-cols-min gap-x-4"),w(o,"class","grid auto-rows-min text-lg gap-y-4"),w(e,"class","grid grid-flow-row gap-y-6")},m(V,j){P(V,e,j),l(e,s),l(s,t),l(e,a),l(e,o),l(o,c),l(c,i),l(c,f),l(c,_),l(_,n),l(n,h),l(_,$),l(_,E),l(E,T)},p(V,[j]){j&1&&g!==(g=`background-image: url("${V[0].avatar}")`)&&w(i,"style",g),j&1&&d!==(d=V[0].username+"")&&R(h,d),j&1&&y!==(y=""+(ee+"/user/"+V[0].id+"/"))&&w(n,"href",y)},i:D,o:D,d(V){V&&u(e)}}}function Be(r,e,s){let{author:t}=e;return r.$$set=a=>{"author"in a&&s(0,t=a.author)},[t]}class He extends te{constructor(e){super();se(this,e,Be,Se,re,{author:0})}}function pe(r){let e,s;return e=new ye({props:{description:r[3].data.getGuide.short_description,title:r[3].data.getGuide.name}}),{c(){Q(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,a){K(e,t,a),s=!0},p(t,a){const o={};a&8&&(o.description=t[3].data.getGuide.short_description),a&8&&(o.title=t[3].data.getGuide.name),e.$set(o)},i(t){s||(S(e.$$.fragment,t),s=!0)},o(t){B(e.$$.fragment,t),s=!1},d(t){X(e,t)}}}function Ue(r){let e;return{c(){e=N("404")},l(s){e=O(s,"404")},m(s,t){P(s,e,t)},p:D,i:D,o:D,d(s){s&&u(e)}}}function Le(r){let e,s,t,a,o=r[3].data.getGuide.name+"",c,i,g,f,_,n,d,h,y,$,E,T,V,j,A,H,v,I=r[5]&&me(r),q={ctx:r,current:null,token:null,hasCatch:!1,pending:Je,then:Qe,catch:Re,value:17};de(_=he(r[3].data.getGuide.guide),q),h=new Pe({props:{guide:r[3].data.getGuide}}),$=new He({props:{author:r[3].data.getGuide.user}});function Y(p){r[14](p)}let ae={$$slots:{default:[Ke]},$$scope:{ctx:r}};r[6]!==void 0&&(ae.open=r[6]),T=new Ae({props:ae}),ce.push(()=>fe(T,"open",Y));function ve(p){r[15](p)}let ne={$$slots:{default:[Xe]},$$scope:{ctx:r}};return r[2]!==void 0&&(ne.running=r[2]),A=new qe({props:ne}),ce.push(()=>fe(A,"running",ve)),{c(){e=m("div"),s=m("div"),t=m("div"),a=m("h1"),c=N(o),i=C(),I&&I.c(),g=C(),f=m("div"),q.block.c(),n=C(),d=m("div"),Q(h.$$.fragment),y=C(),Q($.$$.fragment),E=C(),Q(T.$$.fragment),j=C(),Q(A.$$.fragment),this.h()},l(p){e=b(p,"DIV",{class:!0});var G=k(e);s=b(G,"DIV",{class:!0});var U=k(s);t=b(U,"DIV",{class:!0});var L=k(t);a=b(L,"H1",{class:!0});var W=k(a);c=O(W,o),W.forEach(u),i=M(L),I&&I.l(L),L.forEach(u),g=M(U),f=b(U,"DIV",{class:!0});var F=k(f);q.block.l(F),F.forEach(u),U.forEach(u),n=M(G),d=b(G,"DIV",{class:!0});var z=k(d);J(h.$$.fragment,z),y=M(z),J($.$$.fragment,z),z.forEach(u),G.forEach(u),E=M(p),J(T.$$.fragment,p),j=M(p),J(A.$$.fragment,p),this.h()},h(){w(a,"class","text-4xl my-4 font-bold"),w(t,"class","grid grid-flow-col grid-auto-max h-auto gap-4 items-center svelte-1sejgqw"),w(f,"class","markdown-content"),w(s,"class","grid grid-cols-1 auto-rows-min gap-8"),w(d,"class","grid grid-cols-1 auto-rows-min gap-8"),w(e,"class","grid gap-8 grid-auto-max svelte-1sejgqw")},m(p,G){P(p,e,G),l(e,s),l(s,t),l(t,a),l(a,c),l(t,i),I&&I.m(t,null),l(s,g),l(s,f),q.block.m(f,q.anchor=null),q.mount=()=>f,q.anchor=null,l(e,n),l(e,d),K(h,d,null),l(d,y),K($,d,null),P(p,E,G),K(T,p,G),P(p,j,G),K(A,p,G),v=!0},p(p,G){r=p,(!v||G&8)&&o!==(o=r[3].data.getGuide.name+"")&&R(c,o),r[5]?I?I.p(r,G):(I=me(r),I.c(),I.m(t,null)):I&&(I.d(1),I=null),q.ctx=r,G&8&&_!==(_=he(r[3].data.getGuide.guide))&&de(_,q)||Ie(q,r,G);const U={};G&8&&(U.guide=r[3].data.getGuide),h.$set(U);const L={};G&8&&(L.author=r[3].data.getGuide.user),$.$set(L);const W={};G&262144&&(W.$$scope={dirty:G,ctx:r}),!V&&G&64&&(V=!0,W.open=r[6],ge(()=>V=!1)),T.$set(W);const F={};G&262160&&(F.$$scope={dirty:G,ctx:r}),!H&&G&4&&(H=!0,F.running=r[2],ge(()=>H=!1)),A.$set(F)},i(p){v||(S(h.$$.fragment,p),S($.$$.fragment,p),S(T.$$.fragment,p),S(A.$$.fragment,p),v=!0)},o(p){B(h.$$.fragment,p),B($.$$.fragment,p),B(T.$$.fragment,p),B(A.$$.fragment,p),v=!1},d(p){p&&u(e),I&&I.d(),q.block.d(),q.token=null,q=null,X(h),X($),p&&u(E),X(T,p),p&&u(j),X(A,p)}}}function We(r){let e,s,t=r[3].error.message+"",a;return{c(){e=m("p"),s=N("Oh no... "),a=N(t)},l(o){e=b(o,"P",{});var c=k(e);s=O(c,"Oh no... "),a=O(c,t),c.forEach(u)},m(o,c){P(o,e,c),l(e,s),l(e,a)},p(o,c){c&8&&t!==(t=o[3].error.message+"")&&R(a,t)},i:D,o:D,d(o){o&&u(e)}}}function Fe(r){let e,s;return{c(){e=m("p"),s=N("Loading...")},l(t){e=b(t,"P",{});var a=k(e);s=O(a,"Loading..."),a.forEach(u)},m(t,a){P(t,e,a),l(e,s)},p:D,i:D,o:D,d(t){t&&u(e)}}}function me(r){let e,s,t,a,o,c,i;return{c(){e=m("button"),s=N("Edit"),t=C(),a=m("button"),o=N("Delete"),this.h()},l(g){e=b(g,"BUTTON",{class:!0});var f=k(e);s=O(f,"Edit"),f.forEach(u),t=M(g),a=b(g,"BUTTON",{class:!0});var _=k(a);o=O(_,"Delete"),_.forEach(u),this.h()},h(){w(e,"class","py-2 px-4 rounded text-base bg-yellow-600"),w(a,"class","py-2 px-4 rounded text-base bg-red-500")},m(g,f){P(g,e,f),l(e,s),P(g,t,f),P(g,a,f),l(a,o),c||(i=[x(e,"click",r[10]),x(a,"click",r[11])],c=!0)},p:D,d(g){g&&u(e),g&&u(t),g&&u(a),c=!1,ue(i)}}}function Re(r){return{c:D,l:D,m:D,p:D,d:D}}function Qe(r){let e,s=r[17]+"";return{c(){e=m("p")},l(t){e=b(t,"P",{});var a=k(e);a.forEach(u)},m(t,a){P(t,e,a),e.innerHTML=s},p(t,a){a&8&&s!==(s=t[17]+"")&&(e.innerHTML=s)},d(t){t&&u(e)}}}function Je(r){return{c:D,l:D,m:D,p:D,d:D}}function Ke(r){let e,s,t,a,o,c,i,g,f,_,n,d,h,y;return{c(){e=m("div"),s=m("h3"),t=N("Delete Guide?"),a=C(),o=m("span"),c=N("Are you sure you wish to delete this guide"),i=C(),g=m("button"),f=N("Cancel"),_=C(),n=m("button"),d=N("Delete"),this.h()},l($){e=b($,"DIV",{class:!0});var E=k(e);s=b(E,"H3",{class:!0});var T=k(s);t=O(T,"Delete Guide?"),T.forEach(u),a=M(E),o=b(E,"SPAN",{});var V=k(o);c=O(V,"Are you sure you wish to delete this guide"),V.forEach(u),i=M(E),g=b(E,"BUTTON",{class:!0});var j=k(g);f=O(j,"Cancel"),j.forEach(u),_=M(E),n=b(E,"BUTTON",{class:!0});var A=k(n);d=O(A,"Delete"),A.forEach(u),E.forEach(u),this.h()},h(){w(s,"class","text-2xl font-bold"),w(g,"class","py-1 px-4 rounded text-base bg-yellow-600"),w(n,"class","py-1 px-4 rounded text-base bg-red-500"),w(e,"class","grid grid-flow-row gap-4")},m($,E){P($,e,E),l(e,s),l(s,t),l(e,a),l(e,o),l(o,c),l(e,i),l(e,g),l(g,f),l(e,_),l(e,n),l(n,d),h||(y=[x(g,"click",r[12]),x(n,"click",r[13])],h=!0)},p:D,d($){$&&u(e),h=!1,ue(y)}}}function Xe(r){let e,s;return{c(){e=m("span"),s=N(r[4])},l(t){e=b(t,"SPAN",{});var a=k(e);s=O(a,r[4]),a.forEach(u)},m(t,a){P(t,e,a),l(e,s)},p(t,a){a&16&&R(s,t[4])},d(t){t&&u(e)}}}function Ye(r){let e,s,t,a,o,c,i=!r[3].fetching&&!r[3].error&&r[3].data.getGuide&&pe(r);const g=[Fe,We,Le,Ue],f=[];function _(n,d){return n[3].fetching?0:n[3].error?1:n[3].data.getGuide?2:3}return t=_(r),a=f[t]=g[t](r),{c(){i&&i.c(),e=Z(),s=C(),a.c(),o=Z()},l(n){const d=$e('[data-svelte="svelte-bhfvpi"]',document.head);i&&i.l(d),e=Z(),d.forEach(u),s=M(n),a.l(n),o=Z()},m(n,d){i&&i.m(document.head,null),l(document.head,e),P(n,s,d),f[t].m(n,d),P(n,o,d),c=!0},p(n,[d]){!n[3].fetching&&!n[3].error&&n[3].data.getGuide?i?(i.p(n,d),d&8&&S(i,1)):(i=pe(n),i.c(),S(i,1),i.m(e.parentNode,e)):i&&(ie(),B(i,1,1,()=>{i=null}),oe());let h=t;t=_(n),t===h?f[t].p(n,d):(ie(),B(f[h],1,1,()=>{f[h]=null}),oe(),a=f[t],a?a.p(n,d):(a=f[t]=g[t](n),a.c()),S(a,1),a.m(o.parentNode,o))},i(n){c||(S(i),S(a),c=!0)},o(n){B(i),B(a),c=!1},d(n){i&&i.d(n),u(e),n&&u(s),f[t].d(n),n&&u(o)}}}const be=ke(Te,{guide:void 0}),ct=Ne(async r=>(be.variables.guide=r.page.params.guideId,je({guide:be})(r)));function ze(r,e,s){let t,a,o=D,c=()=>(o(),o=Ee(_,v=>s(3,a=v)),_),i,g;le(r,Oe,v=>s(9,i=v)),r.$$.on_destroy.push(()=>o());let{guideId:f}=e,{guide:_}=e;c();let n="",d=!1;const h=we({query:Ve}),y=Ge(!1);le(r,y,v=>s(6,g=v));const $=()=>{h({guideId:f}).then(v=>{v.error?(console.error(v.error.message),s(4,n="Error deleting guide: "+v.error.message),s(2,d=!0)):_e(ee+"/guides")})};De(_);const E=()=>_e(ee+"/guide/"+f+"/edit"),T=()=>y.set(!0),V=()=>y.set(!1),j=()=>$();function A(v){g=v,y.set(g)}function H(v){d=v,s(2,d)}return r.$$set=v=>{"guideId"in v&&s(0,f=v.guideId),"guide"in v&&c(s(1,_=v.guide))},r.$$.update=()=>{r.$$.dirty&520&&s(5,t=i?.roles?.deleteContent||i?.id===a?.data?.getGuide?.user?.id),r.$$.dirty&4&&(d||s(4,n=""))},[f,_,d,a,n,t,g,y,$,i,E,T,V,j,A,H]}class ft extends te{constructor(e){super();se(this,e,ze,Ye,re,{guideId:0,guide:1})}}export{ft as default,ct as load};
//# sourceMappingURL=index.svelte-c973fd54.js.map
