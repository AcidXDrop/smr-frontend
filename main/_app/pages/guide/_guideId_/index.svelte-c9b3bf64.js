import{S as te,i as ne,s as re,as as se,j as P,m as q,o as M,x as k,u as E,v as S,at as ae,e as h,t as C,k as O,c as v,a as w,g as T,d as u,n as H,b as j,f as G,V as g,h as Y,P as be,l as y,a0 as ke,w as oe,N as ue,aF as we,O as De,Q as Ee,r as le,X as V,C as Ge,J as Ie,K as fe,L as ce,M as de,W as x,aB as $e,aC as je,T as Ve,U as Ce}from"../../../chunks/vendor-b961c41b.js";import{l as Te}from"../../../chunks/gql-b22d39b4.js";import{q as Ae,r as Ne}from"../../../chunks/graphql-06a000cd.js";import{p as Pe}from"../../../chunks/routing-1d144003.js";import{b as ee}from"../../../chunks/paths-6758d194.js";import{a as qe}from"../../../chunks/user-551a19d6.js";import{g as ge}from"../../../chunks/navigation-51f4a605.js";import{T as Me}from"../../../chunks/Toast-2eaebd96.js";import{m as _e}from"../../../chunks/markdown-f101d836.js";import{M as Se}from"../../../chunks/MetaDescriptors-cd1dea74.js";import"../../../chunks/singletons-12a22614.js";import"../../../chunks/stores-2cd2bb89.js";function Oe(a){let e,n,t,s,r,o,l,_,$=a[0].created_at+"",f,i;return{c(){e=h("div"),n=h("h3"),t=C("Info"),s=O(),r=h("span"),o=h("strong"),l=C("Created:"),_=O(),f=C($),i=h("br"),this.h()},l(d){e=v(d,"DIV",{class:!0});var m=w(e);n=v(m,"H3",{class:!0});var A=w(n);t=T(A,"Info"),A.forEach(u),s=H(m),r=v(m,"SPAN",{});var I=w(r);o=v(I,"STRONG",{});var L=w(o);l=T(L,"Created:"),L.forEach(u),_=H(I),f=T(I,$),I.forEach(u),i=v(m,"BR",{}),m.forEach(u),this.h()},h(){j(n,"class","text-2xl my-4 font-bold"),j(e,"class","text-lg")},m(d,m){G(d,e,m),g(e,n),g(n,t),g(e,s),g(e,r),g(r,o),g(o,l),g(r,_),g(r,f),g(e,i)},p(d,m){m&1&&$!==($=d[0].created_at+"")&&Y(f,$)},d(d){d&&u(e)}}}function He(a){let e,n;return e=new ae({props:{$$slots:{default:[Oe]},$$scope:{ctx:a}}}),{c(){P(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const r={};s&3&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function Le(a){let e,n;return e=new se({props:{$$slots:{default:[He]},$$scope:{ctx:a}}}),{c(){P(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,[s]){const r={};s&3&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function Be(a,e,n){let{guide:t}=e;return a.$$set=s=>{"guide"in s&&n(0,t=s.guide)},[t]}class Fe extends te{constructor(e){super();ne(this,e,Be,Le,re,{guide:0})}}function We(a){let e,n,t,s,r,o,l,_,$,f,i,d=a[0].username+"",m,A,I,L,B;return{c(){e=h("div"),n=h("h3"),t=C("Author"),s=O(),r=h("div"),o=h("div"),l=h("div"),$=O(),f=h("div"),i=h("a"),m=C(d),I=O(),L=h("div"),B=C("Writer"),this.h()},l(F){e=v(F,"DIV",{class:!0});var N=w(e);n=v(N,"H3",{class:!0});var W=w(n);t=T(W,"Author"),W.forEach(u),s=H(N),r=v(N,"DIV",{class:!0});var U=w(r);o=v(U,"DIV",{class:!0});var p=w(o);l=v(p,"DIV",{class:!0,style:!0}),w(l).forEach(u),$=H(p),f=v(p,"DIV",{class:!0});var b=w(f);i=v(b,"A",{href:!0,class:!0});var Z=w(i);m=T(Z,d),Z.forEach(u),I=H(b),L=v(b,"DIV",{});var X=w(L);B=T(X,"Writer"),X.forEach(u),b.forEach(u),p.forEach(u),U.forEach(u),N.forEach(u),this.h()},h(){j(n,"class","text-2xl my-4 font-bold"),j(l,"class","rounded-full bg-cover w-14 h-14"),j(l,"style",_=`background-image: url("${a[0].avatar}")`),j(i,"href",A=""+(ee+"/user/"+a[0].id+"/")),j(i,"class","text-yellow-500 underline"),j(f,"class","grid grid-flow-row"),j(o,"class","grid grid-flow-col auto-cols-min gap-x-4"),j(r,"class","grid auto-rows-min text-lg gap-y-4"),j(e,"class","grid grid-flow-row gap-y-2")},m(F,N){G(F,e,N),g(e,n),g(n,t),g(e,s),g(e,r),g(r,o),g(o,l),g(o,$),g(o,f),g(f,i),g(i,m),g(f,I),g(f,L),g(L,B)},p(F,N){N&1&&_!==(_=`background-image: url("${F[0].avatar}")`)&&j(l,"style",_),N&1&&d!==(d=F[0].username+"")&&Y(m,d),N&1&&A!==(A=""+(ee+"/user/"+F[0].id+"/"))&&j(i,"href",A)},d(F){F&&u(e)}}}function Ue(a){let e,n;return e=new ae({props:{$$slots:{default:[We]},$$scope:{ctx:a}}}),{c(){P(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const r={};s&3&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function Qe(a){let e,n;return e=new se({props:{$$slots:{default:[Ue]},$$scope:{ctx:a}}}),{c(){P(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,[s]){const r={};s&3&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function Re(a,e,n){let{author:t}=e;return a.$$set=s=>{"author"in s&&n(0,t=s.author)},[t]}class Je extends te{constructor(e){super();ne(this,e,Re,Qe,re,{author:0})}}function me(a){let e,n;return e=new Se({props:{description:a[3].data.getGuide.short_description,title:a[3].data.getGuide.name}}),{c(){P(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const r={};s&8&&(r.description=t[3].data.getGuide.short_description),s&8&&(r.title=t[3].data.getGuide.name),e.$set(r)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function Ke(a){let e;return{c(){e=C("404")},l(n){e=T(n,"404")},m(n,t){G(n,e,t)},p:V,i:V,o:V,d(n){n&&u(e)}}}function Xe(a){let e,n,t,s,r=a[3].data.getGuide.name+"",o,l,_,$,f,i,d,m,A,I,L,B,F,N,W,U,p,b=a[5]&&pe(a);f=new se({props:{$$slots:{default:[rt]},$$scope:{ctx:a}}}),m=new Fe({props:{guide:a[3].data.getGuide}}),I=new Je({props:{author:a[3].data.getGuide.user}});function Z(c){a[14](c)}let X={$$slots:{default:[it]},$$scope:{ctx:a}};a[6]!==void 0&&(X.open=a[6]),B=new Ie({props:X}),fe.push(()=>ce(B,"open",Z));function ve(c){a[15](c)}let ie={$$slots:{default:[ut]},$$scope:{ctx:a}};return a[2]!==void 0&&(ie.running=a[2]),W=new Me({props:ie}),fe.push(()=>ce(W,"running",ve)),{c(){e=h("div"),n=h("div"),t=h("div"),s=h("h1"),o=C(r),l=O(),_=h("div"),b&&b.c(),$=O(),P(f.$$.fragment),i=O(),d=h("div"),P(m.$$.fragment),A=O(),P(I.$$.fragment),L=O(),P(B.$$.fragment),N=O(),P(W.$$.fragment),this.h()},l(c){e=v(c,"DIV",{class:!0});var D=w(e);n=v(D,"DIV",{class:!0});var R=w(n);t=v(R,"DIV",{class:!0});var J=w(t);s=v(J,"H1",{class:!0});var z=w(s);o=T(z,r),z.forEach(u),l=H(J),_=v(J,"DIV",{});var K=w(_);b&&b.l(K),K.forEach(u),J.forEach(u),$=H(R),q(f.$$.fragment,R),R.forEach(u),i=H(D),d=v(D,"DIV",{class:!0});var Q=w(d);q(m.$$.fragment,Q),A=H(Q),q(I.$$.fragment,Q),Q.forEach(u),D.forEach(u),L=H(c),q(B.$$.fragment,c),N=H(c),q(W.$$.fragment,c),this.h()},h(){j(s,"class","text-4xl my-4 font-bold"),j(t,"class","flex flex-wrap h-auto justify-between"),j(n,"class","grid grid-cols-1 auto-rows-min gap-4"),j(d,"class","grid grid-cols-1 auto-rows-min gap-8"),j(e,"class","grid gap-8 grid-auto-max xlx:grid-flow-row svelte-1jsc039")},m(c,D){G(c,e,D),g(e,n),g(n,t),g(t,s),g(s,o),g(t,l),g(t,_),b&&b.m(_,null),g(n,$),M(f,n,null),g(e,i),g(e,d),M(m,d,null),g(d,A),M(I,d,null),G(c,L,D),M(B,c,D),G(c,N,D),M(W,c,D),p=!0},p(c,D){(!p||D&8)&&r!==(r=c[3].data.getGuide.name+"")&&Y(o,r),c[5]?b?(b.p(c,D),D&32&&k(b,1)):(b=pe(c),b.c(),k(b,1),b.m(_,null)):b&&(le(),E(b,1,1,()=>{b=null}),oe());const R={};D&262152&&(R.$$scope={dirty:D,ctx:c}),f.$set(R);const J={};D&8&&(J.guide=c[3].data.getGuide),m.$set(J);const z={};D&8&&(z.author=c[3].data.getGuide.user),I.$set(z);const K={};D&262144&&(K.$$scope={dirty:D,ctx:c}),!F&&D&64&&(F=!0,K.open=c[6],de(()=>F=!1)),B.$set(K);const Q={};D&262160&&(Q.$$scope={dirty:D,ctx:c}),!U&&D&4&&(U=!0,Q.running=c[2],de(()=>U=!1)),W.$set(Q)},i(c){p||(k(b),k(f.$$.fragment,c),k(m.$$.fragment,c),k(I.$$.fragment,c),k(B.$$.fragment,c),k(W.$$.fragment,c),p=!0)},o(c){E(b),E(f.$$.fragment,c),E(m.$$.fragment,c),E(I.$$.fragment,c),E(B.$$.fragment,c),E(W.$$.fragment,c),p=!1},d(c){c&&u(e),b&&b.d(),S(f),S(m),S(I),c&&u(L),S(B,c),c&&u(N),S(W,c)}}}function ze(a){let e,n,t=a[3].error.message+"",s;return{c(){e=h("p"),n=C("Oh no... "),s=C(t)},l(r){e=v(r,"P",{});var o=w(e);n=T(o,"Oh no... "),s=T(o,t),o.forEach(u)},m(r,o){G(r,e,o),g(e,n),g(e,s)},p(r,o){o&8&&t!==(t=r[3].error.message+"")&&Y(s,t)},i:V,o:V,d(r){r&&u(e)}}}function Ye(a){let e,n;return{c(){e=h("p"),n=C("Loading...")},l(t){e=v(t,"P",{});var s=w(e);n=T(s,"Loading..."),s.forEach(u)},m(t,s){G(t,e,s),g(e,n)},p:V,i:V,o:V,d(t){t&&u(e)}}}function pe(a){let e,n,t,s;return e=new x({props:{variant:"outlined",$$slots:{default:[Ze]},$$scope:{ctx:a}}}),e.$on("click",a[10]),t=new x({props:{variant:"outlined",$$slots:{default:[ye]},$$scope:{ctx:a}}}),t.$on("click",a[11]),{c(){P(e.$$.fragment),n=O(),P(t.$$.fragment)},l(r){q(e.$$.fragment,r),n=H(r),q(t.$$.fragment,r)},m(r,o){M(e,r,o),G(r,n,o),M(t,r,o),s=!0},p(r,o){const l={};o&262144&&(l.$$scope={dirty:o,ctx:r}),e.$set(l);const _={};o&262144&&(_.$$scope={dirty:o,ctx:r}),t.$set(_)},i(r){s||(k(e.$$.fragment,r),k(t.$$.fragment,r),s=!0)},o(r){E(e.$$.fragment,r),E(t.$$.fragment,r),s=!1},d(r){S(e,r),r&&u(n),S(t,r)}}}function Ze(a){let e;return{c(){e=C("Edit")},l(n){e=T(n,"Edit")},m(n,t){G(n,e,t)},d(n){n&&u(e)}}}function ye(a){let e;return{c(){e=C("Delete")},l(n){e=T(n,"Delete")},m(n,t){G(n,e,t)},d(n){n&&u(e)}}}function xe(a){return{c:V,l:V,m:V,p:V,d:V}}function et(a){let e,n=a[17]+"";return{c(){e=h("p")},l(t){e=v(t,"P",{});var s=w(e);s.forEach(u)},m(t,s){G(t,e,s),e.innerHTML=n},p(t,s){s&8&&n!==(n=t[17]+"")&&(e.innerHTML=n)},d(t){t&&u(e)}}}function tt(a){return{c:V,l:V,m:V,p:V,d:V}}function nt(a){let e,n,t={ctx:a,current:null,token:null,hasCatch:!1,pending:tt,then:et,catch:xe,value:17};return $e(n=_e(a[3].data.getGuide.guide),t),{c(){e=h("div"),t.block.c(),this.h()},l(s){e=v(s,"DIV",{class:!0});var r=w(e);t.block.l(r),r.forEach(u),this.h()},h(){j(e,"class","markdown-content break-all")},m(s,r){G(s,e,r),t.block.m(e,t.anchor=null),t.mount=()=>e,t.anchor=null},p(s,r){a=s,t.ctx=a,r&8&&n!==(n=_e(a[3].data.getGuide.guide))&&$e(n,t)||je(t,a,r)},d(s){s&&u(e),t.block.d(),t.token=null,t=null}}}function rt(a){let e,n;return e=new ae({props:{$$slots:{default:[nt]},$$scope:{ctx:a}}}),{c(){P(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,s){M(e,t,s),n=!0},p(t,s){const r={};s&262152&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function st(a){let e;return{c(){e=C("Delete Guide?")},l(n){e=T(n,"Delete Guide?")},m(n,t){G(n,e,t)},d(n){n&&u(e)}}}function at(a){let e;return{c(){e=C("Cancel")},l(n){e=T(n,"Cancel")},m(n,t){G(n,e,t)},d(n){n&&u(e)}}}function ot(a){let e;return{c(){e=C("Delete")},l(n){e=T(n,"Delete")},m(n,t){G(n,e,t)},d(n){n&&u(e)}}}function lt(a){let e,n,t,s,r,o,l,_;return r=new x({props:{variant:"outlined",$$slots:{default:[at]},$$scope:{ctx:a}}}),r.$on("click",a[12]),l=new x({props:{variant:"outlined",$$slots:{default:[ot]},$$scope:{ctx:a}}}),l.$on("click",a[13]),{c(){e=h("div"),n=h("span"),t=C("Are you sure you wish to delete this guide"),s=O(),P(r.$$.fragment),o=O(),P(l.$$.fragment),this.h()},l($){e=v($,"DIV",{class:!0});var f=w(e);n=v(f,"SPAN",{});var i=w(n);t=T(i,"Are you sure you wish to delete this guide"),i.forEach(u),s=H(f),q(r.$$.fragment,f),o=H(f),q(l.$$.fragment,f),f.forEach(u),this.h()},h(){j(e,"class","grid grid-flow-row gap-4")},m($,f){G($,e,f),g(e,n),g(n,t),g(e,s),M(r,e,null),g(e,o),M(l,e,null),_=!0},p($,f){const i={};f&262144&&(i.$$scope={dirty:f,ctx:$}),r.$set(i);const d={};f&262144&&(d.$$scope={dirty:f,ctx:$}),l.$set(d)},i($){_||(k(r.$$.fragment,$),k(l.$$.fragment,$),_=!0)},o($){E(r.$$.fragment,$),E(l.$$.fragment,$),_=!1},d($){$&&u(e),S(r),S(l)}}}function it(a){let e,n,t,s;return e=new Ve({props:{$$slots:{default:[st]},$$scope:{ctx:a}}}),t=new Ce({props:{$$slots:{default:[lt]},$$scope:{ctx:a}}}),{c(){P(e.$$.fragment),n=O(),P(t.$$.fragment)},l(r){q(e.$$.fragment,r),n=H(r),q(t.$$.fragment,r)},m(r,o){M(e,r,o),G(r,n,o),M(t,r,o),s=!0},p(r,o){const l={};o&262144&&(l.$$scope={dirty:o,ctx:r}),e.$set(l);const _={};o&262144&&(_.$$scope={dirty:o,ctx:r}),t.$set(_)},i(r){s||(k(e.$$.fragment,r),k(t.$$.fragment,r),s=!0)},o(r){E(e.$$.fragment,r),E(t.$$.fragment,r),s=!1},d(r){S(e,r),r&&u(n),S(t,r)}}}function ut(a){let e,n;return{c(){e=h("span"),n=C(a[4])},l(t){e=v(t,"SPAN",{});var s=w(e);n=T(s,a[4]),s.forEach(u)},m(t,s){G(t,e,s),g(e,n)},p(t,s){s&16&&Y(n,t[4])},d(t){t&&u(e)}}}function ft(a){let e,n,t,s,r,o,l=!a[3].fetching&&!a[3].error&&a[3].data.getGuide&&me(a);const _=[Ye,ze,Xe,Ke],$=[];function f(i,d){return i[3].fetching?0:i[3].error?1:i[3].data.getGuide?2:3}return t=f(a),s=$[t]=_[t](a),{c(){l&&l.c(),e=y(),n=O(),s.c(),r=y()},l(i){const d=ke('[data-svelte="svelte-bhfvpi"]',document.head);l&&l.l(d),e=y(),d.forEach(u),n=H(i),s.l(i),r=y()},m(i,d){l&&l.m(document.head,null),g(document.head,e),G(i,n,d),$[t].m(i,d),G(i,r,d),o=!0},p(i,[d]){!i[3].fetching&&!i[3].error&&i[3].data.getGuide?l?(l.p(i,d),d&8&&k(l,1)):(l=me(i),l.c(),k(l,1),l.m(e.parentNode,e)):l&&(le(),E(l,1,1,()=>{l=null}),oe());let m=t;t=f(i),t===m?$[t].p(i,d):(le(),E($[m],1,1,()=>{$[m]=null}),oe(),s=$[t],s?s.p(i,d):(s=$[t]=_[t](i),s.c()),k(s,1),s.m(r.parentNode,r))},i(i){o||(k(l),k(s),o=!0)},o(i){E(l),E(s),o=!1},d(i){l&&l.d(i),u(e),i&&u(n),$[t].d(i),i&&u(r)}}}const he=be(Ae,{guide:void 0}),Et=Pe(async a=>(he.variables.guide=a.page.params.guideId,Te({guide:he})(a)));function ct(a,e,n){let t,s,r=V,o=()=>(r(),r=we(f,p=>n(3,s=p)),f),l,_;ue(a,qe,p=>n(9,l=p)),a.$$.on_destroy.push(()=>r());let{guideId:$}=e,{guide:f}=e;o();let i="",d=!1;const m=De({query:Ne}),A=Ge(!1);ue(a,A,p=>n(6,_=p));const I=()=>{m({guideId:$}).then(p=>{p.error?(console.error(p.error.message),n(4,i="Error deleting guide: "+p.error.message),n(2,d=!0)):ge(ee+"/guides")})};Ee(f);const L=()=>ge(ee+"/guide/"+$+"/edit"),B=()=>A.set(!0),F=()=>A.set(!1),N=()=>I();function W(p){_=p,A.set(_)}function U(p){d=p,n(2,d)}return a.$$set=p=>{"guideId"in p&&n(0,$=p.guideId),"guide"in p&&o(n(1,f=p.guide))},a.$$.update=()=>{a.$$.dirty&520&&n(5,t=l?.roles?.deleteContent||l?.id===s?.data?.getGuide?.user?.id),a.$$.dirty&4&&(d||n(4,i=""))},[$,f,d,s,i,t,_,A,I,l,L,B,F,N,W,U]}class Gt extends te{constructor(e){super();ne(this,e,ct,ft,re,{guideId:0,guide:1})}}export{Gt as default,Et as load};
//# sourceMappingURL=index.svelte-c9b3bf64.js.map
