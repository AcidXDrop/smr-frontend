{"version":3,"file":"index.svelte-046001b4.js","sources":["../../../../../../../src/routes/admin/sml-versions/index.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { DeleteSmlVersionDocument, GetSmlVersionsAdminDocument } from '$lib/generated';\n  import { mutation, operationStore, query } from '@urql/svelte';\n  import { writable } from 'svelte/store';\n  import PageControls from '$lib/components/utils/PageControls.svelte';\n  import { base } from '$app/paths';\n  import MetaDescriptors from '$lib/components/utils/MetaDescriptors.svelte';\n\n  // TODO Selectable\n  const perPage = 20;\n\n  const versions = operationStore(GetSmlVersionsAdminDocument, {\n    filter: {\n      offset: 0,\n      limit: perPage\n    }\n  });\n\n  const page = writable(1);\n  let totalVersions: number;\n\n  page.subscribe((p) => ($versions.variables.filter.offset = (p - 1) * perPage));\n\n  $: totalVersions = $versions?.data?.getSMLVersions?.count;\n\n  const deleteVersionMut = mutation({\n    query: DeleteSmlVersionDocument\n  });\n\n  const deleteVersion = (smlVersionID: string) => {\n    deleteVersionMut({ smlVersionID }).then(() => {\n      versions.reexecute();\n    });\n  };\n\n  query(versions);\n</script>\n\n<svelte:head>\n  <MetaDescriptors description=\"SML Versions\" title=\"Admin: SML Versions\" />\n</svelte:head>\n\n<div class=\"flex justify-between items-center\">\n  <h1 class=\"text-4xl my-4 font-bold\">SML Versions</h1>\n  <a href=\"{base}/admin/sml-versions/new\" class=\"rounded text-base bg-blue-500 py-2 px-4 h-fit\">New SML Version</a>\n</div>\n\n{#if totalVersions}\n  <div class=\"mt-5 ml-auto flex justify-end\">\n    <PageControls totalPages={Math.ceil(totalVersions / perPage)} currentPage={page} />\n  </div>\n{/if}\n\n{#if $versions.fetching}\n  <p>Loading...</p>\n{:else if $versions.error}\n  <p>Oh no... {$versions.error.message}</p>\n{:else}\n  <div class=\"grid grid-cols-6 itemList\">\n    <!-- Header -->\n    <div>Version</div>\n    <div>Stability</div>\n    <div>Satisfactory Version</div>\n    <div>Bootstrap Version</div>\n    <div>Release Date</div>\n    <div><!-- Buttons --></div>\n\n    {#each $versions.data.getSMLVersions.sml_versions as version}\n      <div class=\"contents itemHeader\">\n        <div>{version.version}</div>\n        <div>{version.stability}</div>\n        <div>{version.satisfactory_version}</div>\n        <div>{version.bootstrap_version}</div>\n        <!-- TODO Pretty Date -->\n        <div>{version.created_at}</div>\n        <div class=\"grid grid-flow-col gap-4\">\n          <button\n            class=\"py-1 px-4 rounded text-base bg-red-600 text-center cursor-pointer\"\n            on:click={() => deleteVersion(version.id)}\n          >\n            Delete\n          </button>\n          <a\n            href={base + '/admin/sml-versions/' + version.id + '/edit'}\n            class=\"py-1 px-4 rounded text-base bg-blue-500 text-center cursor-pointer\">Edit</a\n          >\n        </div>\n      </div>\n    {/each}\n  </div>\n{/if}\n\n{#if totalVersions}\n  <div class=\"mt-5 ml-auto flex justify-end\">\n    <PageControls totalPages={Math.ceil(totalVersions / perPage)} currentPage={page} />\n  </div>\n{/if}\n\n<style lang=\"postcss\">\n  .itemList {\n    grid-template-columns: auto auto auto auto max-content auto;\n\n    & .itemHeader {\n      & > div {\n        @apply border-t-2 border-white p-4;\n      }\n\n      &:hover > div {\n        background: rgba(255, 255, 255, 0.25);\n      }\n    }\n  }\n</style>\n"],"names":[],"mappings":"qsBAiD8B,KAAK,KAAK,KAAgB,eAAuB,8LAD7E,gEAC4B,KAAK,KAAK,KAAgB,6JAkB7C,KAAU,KAAK,eAAe,kCAAnC,oEAPG,gCACA,kCACA,6CACA,0CACA,+JAJA,gEACA,kEACA,6EACA,0EACA,mNANP,SAEE,qBACA,qBACA,qBACA,qBACA,qBACA,4EAEO,KAAU,KAAK,eAAe,+BAAnC,+HAAA,yDAXS,KAAU,MAAM,qCAA1B,yDAAA,2CAAH,2CAAa,KAAU,MAAM,mFAF1B,mDAAA,mCAAH,8DAeY,KAAQ,mBACR,KAAQ,qBACR,KAAQ,gCACR,KAAQ,6BAER,KAAQ,kPAKZ,6BAK6E,geAL7E,gFAK6E,oTADrE,EAAO,uBAAyB,KAAQ,GAAK,0MAfzD,SACE,qBACA,qBACA,qBACA,qBAEA,qBACA,OACE,qBAMA,2EAbI,KAAQ,gCACR,KAAQ,kCACR,KAAQ,6CACR,KAAQ,0CAER,KAAQ,mCASJ,EAAO,uBAAyB,KAAQ,GAAK,8GAWjC,KAAK,KAAK,KAAgB,eAAuB,8LAD7E,gEAC4B,KAAK,KAAK,KAAgB,kOA/CnD,kCAMA,MAAU,YAEL,KAAU,gCAqCf,uEAjDiC,mCAC0D,gQAD1D,mFAC0D,uKAApF,sLAFZ,SACE,qBACA,kGAGG,sLA6CA,gSAnFL,GAAA,iCAEA,GAAA,GAAA,IACA,QACA,OAAA,EACA,MAAA,8BAIA,GAAA,GAAA,MACA,GAEA,EAAA,UAAA,QAAA,EAAA,UAAA,OAAA,OAAA,GAAA,GAAA,WAIA,GAAA,IACA,MAAA,KAGA,EAAA,IACA,GAAA,iBAAA,UACA,EAAA,eAIA,GAAA,cA2C4B,EAAc,EAAQ,8CAvDlD,EAAA,GAAA,MAAA,gBAAA"}