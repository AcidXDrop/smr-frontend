{"version":3,"file":"index.svelte-c9a13ce1.js","sources":["../../../../../../src/routes/sml-versions/index.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { GetSmlVersionsDocument } from '$lib/generated';\n  import { operationStore, query } from '@urql/svelte';\n  import { writable } from 'svelte/store';\n  import PageControls from '$lib/components/utils/PageControls.svelte';\n  import { markdown } from '$lib/utils/markdown';\n  import MetaDescriptors from '$lib/components/utils/MetaDescriptors.svelte';\n  import Card, { Content } from '@smui/card';\n  import DataTable, { Head, Body, Row, Cell } from '@smui/data-table';\n  import Button from '@smui/button';\n\n  let expandedVersions = new Set<string>();\n\n  // TODO Selectable\n  const perPage = 20;\n\n  // TODO Pagination\n  const versions = operationStore(GetSmlVersionsDocument, { offset: 0, limit: perPage });\n\n  const page = writable(1);\n  let totalVersions: number;\n\n  page.subscribe((p) => ($versions.variables.offset = (p - 1) * perPage));\n\n  $: totalVersions = $versions?.data?.getSMLVersions?.count;\n\n  query(versions);\n\n  const toggleRow = (versionId: string) => {\n    if (expandedVersions.has(versionId)) {\n      expandedVersions.delete(versionId);\n    } else {\n      expandedVersions.add(versionId);\n    }\n    expandedVersions = expandedVersions;\n  };\n</script>\n\n<svelte:head>\n  <title>SML Versions - SMR</title>\n  <MetaDescriptors description=\"Versions of the Satisfactory Mod Loader\" title=\"Satisfactory Mod Loader versions\" />\n</svelte:head>\n\n{#if totalVersions}\n  <div class=\"mb-5 ml-auto flex justify-end\">\n    <div>\n      <PageControls totalPages={Math.ceil(totalVersions / perPage)} currentPage={page} />\n    </div>\n  </div>\n{/if}\n\n<Card>\n  {#if $versions.fetching}\n    <Content>Loading...</Content>\n  {:else if $versions.error}\n    <Content>Oh no... {$versions.error.message}</Content>\n  {:else}\n    <DataTable class=\"max-w-full\">\n      <Head>\n        <Row>\n          <Cell>Version</Cell>\n          <Cell>Stability</Cell>\n          <Cell>Game Version</Cell>\n          <Cell>Release Date</Cell>\n          <Cell><!-- Buttons --></Cell>\n        </Row>\n      </Head>\n      <Body>\n        {#each $versions.data.getSMLVersions.sml_versions as version}\n          <Row on:click={() => toggleRow(version.id)}>\n            <Cell>{version.version}</Cell>\n            <Cell>{version.stability}</Cell>\n            <Cell>{version.satisfactory_version}</Cell>\n            <!-- TODO Pretty Date -->\n            <Cell>{version.date}</Cell>\n            <Cell>\n              <div class=\"grid grid-flow-col gap-4\">\n                <Button variant=\"outlined\" href={version.link}>View</Button>\n              </div>\n            </Cell>\n          </Row>\n\n          {#if expandedVersions.has(version.id)}\n            <Row>\n              <Cell colspan={5} class=\"p-2 markdown-content\">\n                {#await markdown(version.changelog) then changelogRendered}\n                  {@html changelogRendered}\n                {/await}\n              </Cell>\n            </Row>\n          {/if}\n        {/each}\n      </Body>\n    </DataTable>\n  {/if}\n</Card>\n\n{#if totalVersions}\n  <div class=\"mt-5 ml-auto flex justify-end\">\n    <div>\n      <PageControls totalPages={Math.ceil(totalVersions / perPage)} currentPage={page} />\n    </div>\n  </div>\n{/if}\n"],"names":[],"mappings":"qyBA8CgC,KAAK,KAAK,KAAgB,eAAuB,iPAF/E,SACE,8DAC4B,KAAK,KAAK,KAAgB,siCAc1C,uBAAA,gFACA,yBAAA,kFACA,4BAAA,qFACA,4BAAA,u/CAOG,KAAQ,mFAAR,KAAQ,yDACR,KAAQ,qFAAR,KAAQ,2DACR,KAAQ,gGAAR,KAAQ,sEAER,KAAQ,gFAAR,KAAQ,qEAGoC,oBAAA,kHAAd,KAAQ,gOAD3C,0DACmC,KAAQ,muDAShC,sIAAA,2MADD,EAAS,KAAQ,2KAAjB,EAAS,KAAQ,wIADZ,qVAFd,KAAiB,IAAI,KAAQ,kWAA7B,KAAiB,IAAI,KAAQ,0PAd7B,KAAU,KAAK,eAAe,kCAAnC,6PAAK,KAAU,KAAK,eAAe,+BAAnC,6HAAA,8DAAA,2qBAba,KAAU,MAAM,4BAA1B,gCAAA,oEAAU,KAAU,MAAM,gFAF1B,0BAAA,wHADN,MAAU,WAEL,KAAU,2XA8CU,KAAK,KAAK,KAAgB,eAAuB,iPAF/E,SACE,8DAC4B,KAAK,KAAK,KAAgB,8PAzDrD,4EAsDA,obAtDA,oKAsDA,mTAnFL,GAAA,4BAHA,KAAA,UAMA,GAAA,GAAA,IAAA,OAAA,EAAA,MAAA,6BAEA,GAAA,GAAA,MACA,GAEA,EAAA,UAAA,QAAA,EAAA,UAAA,OAAA,GAAA,GAAA,MAIA,GAAA,QAEA,GAAA,IACA,EAAA,IAAA,GACA,EAAA,OAAA,GAEA,EAAA,IAAA,gBAqC+B,EAAU,EAAQ,8CA7CjD,EAAA,GAAA,MAAA,gBAAA"}