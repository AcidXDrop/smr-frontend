{"version":3,"file":"index.svelte-3fe40c13.js","sources":["../../../../../../src/routes/new-guide/index.svelte"],"sourcesContent":["<svelte:head>\n  <MetaDescriptors \n    description=\"Creating a new guide\"\n    title=\"New guide\" \n  />\n</svelte:head>\n\n<script lang=\"ts\">\n  import {mutation} from '@urql/svelte';\n  import {NewGuideDocument} from \"$lib/generated\";\n  import Toast from \"$lib/components/general/Toast.svelte\";\n  import {goto} from '$app/navigation';\n  import GuideForm from \"$lib/components/guides/GuideForm.svelte\";\n  import type {GuideData} from \"$lib/models/guides\";\n  import {base} from \"$app/paths\";\n  import MetaDescriptors from \"$lib/components/utils/MetaDescriptors.svelte\";\n\n  let errorMessage = '';\n  let errorToast = false;\n\n  const newGuide = mutation({\n    query: NewGuideDocument\n  });\n\n  const onSubmit = (data: GuideData) => {\n    newGuide({\n      guide: data\n    }).then(value => {\n      if (value.error) {\n        console.error(value.error.message);\n        errorMessage = 'Error creating guide: ' + value.error.message;\n        errorToast = true;\n      } else {\n        // TODO Toast or something\n        goto(base + '/guide/' + value.data.createGuide.id);\n      }\n    });\n  }\n\n  $: if (!errorToast) errorMessage = '';\n</script>\n\n<h1 class=\"text-4xl my-4 font-bold\">New Guide</h1>\n\n<GuideForm onSubmit={onSubmit}/>\n\n<Toast bind:running={errorToast}>\n  <span>{errorMessage}</span>\n</Toast>\n"],"names":["ctx","ctx2","errorMessage","errorToast","newGuide","mutation","query","NewGuideDocument","guide","data","then","value","error","message","base","createGuide","id"],"mappings":"svBA+CSA,8CAAAA,4DAAAC,mLAHYD,sEAEAA,iBAAAA,kGAJe,mNAAA,qTAIfC,4PA7BfC,EAAe,GACfC,GAAa,QAEXC,EAAWC,GACfC,MAAOC,2CAkBDJ,OAAYD,EAAe,kBAb/BM,MAAOC,IACNC,UACGC,EAAMC,eACAA,MAAMD,EAAMC,MAAMC,aAC1BX,EAAe,yBAA2BS,EAAMC,MAAMC,aACtDV,GAAa,MAGRW,EAAO,UAAYH,EAAMF,KAAKM,YAAYC"}