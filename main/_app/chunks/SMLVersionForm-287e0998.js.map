{"version":3,"file":"SMLVersionForm-287e0998.js","sources":["../../../../../src/lib/models/sml-versions.ts","../../../../../src/lib/components/sml-versions/SMLVersionForm.svelte"],"sourcesContent":["import * as zod from 'zod';\nimport type { VersionStabilities } from '$lib/generated';\n\nexport type SMLVersionData = {\n  version: string;\n  satisfactory_version: number;\n  bootstrap_version?: string;\n  stability: VersionStabilities;\n  link: string;\n  changelog: string;\n  date: Date;\n};\n\nconst versionRegex =\n  /^(<=|<|>|>=|\\^)?(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$/;\n\nexport const smlVersionSchema = zod.object({\n  version: zod.string().regex(versionRegex),\n  satisfactory_version: zod.number(),\n  bootstrap_version: zod.string().regex(versionRegex),\n  stability: zod.string(),\n  link: zod.string().url(),\n  changelog: zod.string(),\n  date: zod.string()\n});\n","<script lang=\"ts\">\n  import { createForm } from 'felte';\n  import { validator } from '@felte/validator-zod';\n  import { svelteReporter, ValidationMessage } from '@felte/reporter-svelte';\n  import { trimNonSchema } from '$lib/utils/forms';\n  import { markdown } from '$lib/utils/markdown';\n  import type { SMLVersionData } from '$lib/models/sml-versions';\n  import { smlVersionSchema } from '$lib/models/sml-versions';\n\n  export let onSubmit: (data: SMLVersionData) => void;\n  export let initialValues: SMLVersionData | undefined = undefined;\n  export let submitText = 'Create';\n\n  const { form, data } = createForm<SMLVersionData>({\n    initialValues: initialValues,\n    extend: [validator, svelteReporter],\n    validateSchema: smlVersionSchema,\n    onSubmit: (data) => onSubmit(trimNonSchema(data, smlVersionSchema))\n  });\n\n  $: preview = ($data.changelog as string) || '';\n</script>\n\n<form use:form>\n  <div class=\"grid grid-flow-row gap-6\">\n    <div class=\"grid grid-flow-row gap-2\">\n      <label for=\"version\">Version:</label>\n      <input id=\"version\" class=\"base-input\" name=\"version\" type=\"text\" placeholder=\"Version\" />\n      <ValidationMessage for=\"version\" let:messages={message}>\n        <span class=\"validation-message\">{message || ''}</span>\n      </ValidationMessage>\n    </div>\n\n    <div class=\"grid grid-flow-row gap-2\">\n      <label for=\"satisfactory_version\">Satisfactory Version:</label>\n      <input\n        id=\"satisfactory_version\"\n        class=\"base-input\"\n        name=\"satisfactory_version\"\n        type=\"number\"\n        placeholder=\"Satisfactory Version\"\n      />\n      <ValidationMessage for=\"satisfactory_version\" let:messages={message}>\n        <span class=\"validation-message\">{message || ''}</span>\n      </ValidationMessage>\n    </div>\n\n    <div class=\"grid grid-flow-row gap-2\">\n      <label for=\"bootstrap_version\">Bootstrap Version:</label>\n      <input\n        id=\"bootstrap_version\"\n        class=\"base-input\"\n        name=\"bootstrap_version\"\n        type=\"text\"\n        placeholder=\"Bootstrap Version\"\n      />\n      <ValidationMessage for=\"bootstrap_version\" let:messages={message}>\n        <span class=\"validation-message\">{message || ''}</span>\n      </ValidationMessage>\n    </div>\n\n    <div class=\"grid grid-flow-row gap-2\">\n      <label for=\"stability\">Stability:</label>\n      <select id=\"stability\" class=\"base-input\" name=\"stability\">\n        <option value=\"alpha\">Alpha</option>\n        <option value=\"beta\">Beta</option>\n        <option value=\"release\">Release</option>\n      </select>\n      <ValidationMessage for=\"stability\" let:messages={message}>\n        <span class=\"validation-message\">{message || ''}</span>\n      </ValidationMessage>\n    </div>\n\n    <div class=\"grid gap-6 split\">\n      <div class=\"grid grid-flow-row gap-2 auto-rows-max\">\n        <label for=\"changelog\">Changelog:</label>\n        <textarea class=\"base-input\" id=\"changelog\" name=\"changelog\" placeholder=\"Changelog\" rows=\"10\" />\n        <ValidationMessage for=\"changelog\" let:messages={message}>\n          <span class=\"validation-message\">{message || ''}</span>\n        </ValidationMessage>\n      </div>\n      <div class=\"grid grid-flow-row gap-2 auto-rows-max\">\n        <span>Preview:</span>\n        {#await markdown(preview) then previewRendered}\n          <div class=\"markdown-content right\">{@html previewRendered}</div>\n        {/await}\n      </div>\n    </div>\n\n    <div class=\"grid grid-flow-row gap-2\">\n      <label for=\"date\">Date and Time:</label>\n      <input id=\"date\" class=\"base-input\" name=\"date\" type=\"text\" placeholder=\"Date and Time\" />\n      <ValidationMessage for=\"date\" let:messages={message}>\n        <span class=\"validation-message\">{message || ''}</span>\n      </ValidationMessage>\n    </div>\n\n    <div class=\"grid grid-flow-row gap-2\">\n      <label for=\"link\">Link:</label>\n      <input id=\"link\" class=\"base-input\" name=\"link\" type=\"text\" placeholder=\"Link\" />\n      <ValidationMessage for=\"link\" let:messages={message}>\n        <span class=\"validation-message\">{message || ''}</span>\n      </ValidationMessage>\n    </div>\n\n    <div>\n      <input type=\"submit\" value={submitText} class=\"px-4 py-2 rounded text-base bg-blue-500 cursor-pointer\" />\n    </div>\n  </div>\n</form>\n\n<style lang=\"postcss\">\n  .split {\n    grid-template-columns: 50% 50%;\n\n    & .right {\n      max-height: 75vh;\n      overflow: auto;\n    }\n  }\n</style>\n"],"names":["zod.object","zod.string","zod.number","createForm","validator"],"mappings":"4XAaA,KAAM,IACJ,qMAEW,GAAmBA,GAAW,CACzC,QAASC,KAAa,MAAM,IAC5B,qBAAsBC,KACtB,kBAAmBD,KAAa,MAAM,IACtC,UAAWA,KACX,KAAMA,KAAa,MACnB,UAAWA,KACX,KAAMA,8BCMkC,OAAW,wKAA7C,sCAAkC,OAAW,wDAcX,OAAW,wKAA7C,sCAAkC,OAAW,wDAcX,OAAW,wKAA7C,sCAAkC,OAAW,wDAYX,OAAW,wKAA7C,sCAAkC,OAAW,wDAST,OAAW,wKAA7C,sCAAkC,OAAW,mGAMF,wKAA3C,2CAA2C,4GASX,OAAW,wKAA7C,sCAAkC,OAAW,wDAQX,OAAW,wKAA7C,sCAAkC,OAAW,qTAzEA,wBAAA,6GAca,wBAAA,0GAcH,wBAAA,kGAYR,wBAAA,kGASE,wBAAA,qIAMzC,GAAS,oEASyB,wBAAA,6FAQA,wBAAA,0FA1EvB,4FAQa,2GAcH,wGAcR,sDAEC,4BACD,2BACG,oFASD,kGAOjB,oEAQU,oGAQA,kPAxEG,iOAQa,gPAcH,+OAcR,mIAEC,+DACD,8DACG,mNASD,0PAOjB,wKAQU,gPAQA,gxDAQU,2HAnFlC,SACE,OACE,OACE,qBACA,mCAMF,OACE,yBACA,oCAYF,OACE,yBACA,oCAYF,OACE,yBACA,OACE,eACA,eACA,4CAOJ,OACE,OACE,yBACA,oCAKF,OACE,wFAOJ,OACE,yBACA,oCAMF,OACE,yBACA,oCAMF,QACE,qXAvBU,GAAS,oKAuBS,6bAjGlC,eACA,gBAAA,WACA,aAAA,kBAEA,QAAA,QAAAE,IACA,gBACA,QAAAC,GAAA,IACA,eAAA,GACA,SAAA,GAAA,EAAA,GAAA,EAAA,uMAGA,EAAA,EAAA,WAAA"}