{"version":3,"file":"ModGrid-fe679ce0.js","sources":["../../../../../src/lib/components/mods/ModGrid.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { operationStore, query } from '@urql/svelte';\n  import { GetModsDocument } from '$lib/generated';\n  import ModCard from './ModCard.svelte';\n  import PageControls from '$lib/components/utils/PageControls.svelte';\n  import { writable } from 'svelte/store';\n  import FakeCard from '../general/FakeCard.svelte';\n\n  export let colCount: 4 | 5 = 4;\n  export let search: string | undefined = undefined;\n\n  // TODO Selectable\n  const perPage = 40;\n\n  const mods = operationStore(GetModsDocument, { offset: 0, limit: perPage, search });\n\n  const page = writable(1);\n  let totalMods: number;\n\n  $: {\n    $mods.variables.search = search;\n    $mods.reexecute();\n  }\n\n  page.subscribe((p) => {\n    $mods.variables.offset = (p - 1) * perPage;\n    $mods.reexecute();\n  });\n\n  $: totalMods = $mods?.data?.getMods?.count || 0;\n\n  query(mods);\n\n  $: gridClasses =\n    colCount == 4\n      ? '2xl:grid-cols-4 xl:grid-cols-3 lg:grid-cols-2 grid-cols-1'\n      : '2xl:grid-cols-5 xl:grid-cols-4 lg:grid-cols-3 grid-cols-1';\n</script>\n\n<div class=\"mb-5 ml-auto flex justify-end\">\n  <PageControls totalPages={Math.ceil(totalMods / perPage)} currentPage={page} />\n</div>\n\n{#if $mods.fetching}\n  <div class=\"grid {gridClasses} gap-4\">\n    {#each Array(perPage) as _}\n      <FakeCard />\n    {/each}\n  </div>\n{:else if $mods.error}\n  <p>Oh no... {$mods.error.message}</p>\n{:else}\n  <div class=\"grid {gridClasses} gap-4\">\n    {#each $mods.data.getMods.mods as mod}\n      <ModCard {mod} />\n    {/each}\n  </div>\n{/if}\n\n<div class=\"mt-5 ml-auto flex justify-end\">\n  <PageControls totalPages={Math.ceil(totalMods / perPage)} currentPage={page} />\n</div>\n"],"names":[],"mappings":"gjBAqDW,KAAM,KAAK,QAAQ,0BAAxB,wQADc,uBAAlB,2EACS,KAAM,KAAK,QAAQ,uBAAxB,qHAAA,yDADc,6DACd,6IAHS,KAAM,MAAM,qCAAtB,yDAAA,2CAAH,2CAAa,KAAM,MAAM,uEALhB,MAAM,wBAAX,mOADc,uBAAlB,0FAAkB,6DACd,mnBALsB,KAAK,KAAK,KAAY,eAAuB,sDAGpE,MAAM,WAMD,KAAM,kEAWY,KAAK,KAAK,KAAY,eAAuB,iXArBzE,mDAoBA,kEAnB4B,KAAK,KAAK,KAAY,uLAoBtB,KAAK,KAAK,KAAY,gMAhDlD,GAAA,+BAJA,WAAA,MACA,SAAA,eAKA,GAAA,EAAA,GAAA,OAAA,EAAA,MAAA,EAAA,mCAEA,GAAA,EAAA,MACA,GAOA,SAAA,UAAA,QACA,EAAA,UAAA,OAAA,GAAA,GAAA,KACA,EAAA,cAKA,EAAA,qHAXA,EAAA,UAAA,OAAA,KACA,EAAA,+BAQA,EAAA,GAAA,MAAA,SAAA,OAAA,sBAIA,EACA,GAAA,EACA,4DACA"}