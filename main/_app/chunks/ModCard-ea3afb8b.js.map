{"version":3,"file":"ModCard-ea3afb8b.js","sources":["../../../../../src/lib/components/mods/ModCard.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import type { Mod, Maybe, Version } from '$lib/generated';\n  import downloadIcon from '@iconify/icons-mdi/download.js';\n  import eyeIcon from '@iconify/icons-mdi/eye.js';\n  import openInNewIcon from '@iconify/icons-mdi/open-in-new.js';\n  import { assets, base } from '$app/paths';\n  import Icon from '@iconify/svelte';\n  import { getImageCornerColors } from '$lib/utils/image';\n\n  export let mod: Pick<Mod, 'id' | 'name' | 'logo' | 'views' | 'downloads' | 'short_description'> & {\n    latestVersions: {\n      alpha?: Maybe<Pick<Version, 'id'>>;\n      beta?: Maybe<Pick<Version, 'id'>>;\n      release?: Maybe<Pick<Version, 'id'>>;\n    };\n  };\n  export let expanded = false;\n\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n  $: logo = mod.logo || assets + '/images/no_image.png';\n\n  $: installable =\n    'latestVersions' in mod ? mod.latestVersions.alpha || mod.latestVersions.beta || mod.latestVersions.release : false;\n\n  let hovering = false;\n\n  $: shouldExpand = expanded || hovering;\n\n  let logoElement: HTMLImageElement;\n  let activeBackground: string | undefined;\n  let light = false;\n\n  let loading = false;\n  $: {\n    if (shouldExpand && logoElement && !loading) {\n      loading = true;\n      if (logoElement.naturalWidth != 0 && logoElement.naturalHeight != 0) {\n        getImageCornerColors(logoElement).then((color) => {\n          activeBackground = color.background;\n          light = color.light;\n        });\n      } else {\n        logoElement.onload = () =>\n          getImageCornerColors(logoElement).then((color) => {\n            activeBackground = color.background;\n            light = color.light;\n          });\n      }\n    }\n  }\n</script>\n\n<div class:h-36={!expanded} class=\"relative\">\n  <div\n    class=\"mod-card shadowed grid grid-flow-row p-3 bg-gray-700 gap-3 relative min-h-full overflow-hidden\"\n    style={shouldExpand && activeBackground ? 'background:' + activeBackground : undefined}\n    class:max-h-72={shouldExpand}\n    class:max-h-36={!shouldExpand}\n    class:z-10={shouldExpand}\n    on:mouseover={() => (hovering = true)}\n    on:mouseleave={() => (hovering = false)}\n    on:focus={() => (hovering = true)}\n    on:focusout={() => (hovering = false)}\n  >\n    <div class=\"top grid grid-flow-col gap-4\">\n      <div class=\"shadowed\">\n        <img bind:this={logoElement} crossorigin=\"anonymous\" src={logo} alt=\"{mod.name} Logo\" />\n      </div>\n      <div>\n        <div>\n          <span class:text-gray-50={!light} class:text-gray-800={light && shouldExpand} class=\"text-xl\">{mod.name}</span\n          >\n        </div>\n        <div class:text-gray-50={!light} class:text-gray-800={light && shouldExpand} class=\"text-sm\">\n          <span><Icon icon={eyeIcon} inline={true} class=\"inline-block\" /> {mod.views}</span>\n          <span><Icon icon={downloadIcon} inline={true} class=\"inline-block\" /> {mod.downloads}</span>\n        </div>\n      </div>\n    </div>\n    {#if shouldExpand}\n      <div class=\"expanded grid grid-flow-row content-between gap-3\">\n        <div>\n          <span class:text-gray-50={!light} class:text-gray-800={light && shouldExpand} class=\"text-base\"\n            >{mod.short_description}</span\n          >\n        </div>\n        <div class=\"grid grid-flow-col gap-4\">\n          <a href=\"{base}/mod/{mod.id}/\">\n            <button class=\"shadowed py-1 px-4 rounded text-base bg-blue-500\">\n              <span>More info <Icon icon={openInNewIcon} inline={true} class=\"inline-block\" /></span>\n            </button>\n          </a>\n          {#if installable}\n            <!-- TODO SMM Button -->\n            <button class=\"shadowed py-1 px-4 rounded text-base bg-lime-600\">\n              <span>Install <Icon icon={downloadIcon} inline={true} class=\"inline-block\" /></span>\n            </button>\n          {/if}\n        </div>\n      </div>\n    {/if}\n  </div>\n</div>\n\n<style lang=\"postcss\">\n  .shadowed {\n    box-shadow: 0 5px 15px -5px rgba(0, 0, 0, 1);\n  }\n\n  .mod-card {\n    grid-template-rows: min-content auto;\n\n    & .top {\n      grid-template-columns: 30% auto;\n    }\n  }\n</style>\n"],"names":["openInNewIcon","downloadIcon","eyeIcon"],"mappings":"oZAmFc,KAAI,gEAMwBA,UAAuB,iCAGlD,uHAHK,oVAAA,8KAPiB,0BAA4B,MAAS,qGAKtD,YAAW,KAAI,0HAP7B,UACE,OACE,qBAIF,OACE,OACE,OACE,gFANA,KAAI,yDADmB,gCAA4B,MAAS,0BAKtD,YAAW,KAAI,yBAKpB,0QAGyBC,UAAsB,8DAA1C,oHAAA,8JADR,UACE,uKAzB2F,KAAI,sBAIjC,KAAI,qBACC,KAAI,iDADzDC,UAAiB,gDACjBD,UAAsB,iCAIzC,s7BAbyD,mCAAY,MAAI,iGAI7C,0BAA4B,MAAS,iDAGxC,0BAA4B,MAAS,4MAlB5D,MAAgB,KAAmB,cAAgB,KAAmB,uBAC7D,sBACC,iBACL,0CANE,cAAlB,UACE,OAWE,OACE,OACE,uBAEF,OACE,OACE,qBAGF,OACE,yCACA,6MATwD,yCAAY,MAAI,gDAIuB,KAAI,4CAAxE,gCAA4B,MAAS,wBAIE,KAAI,qCACC,KAAI,iDAFnD,gCAA4B,MAAS,MAM9D,yHAxBE,MAAgB,KAAmB,cAAgB,KAAmB,8CAC7D,4BACC,uBACL,uBANE,mNA3ClB,UAOA,WAAA,MAQA,EAAA,GAIA,EACA,EACA,EAAA,GAEA,EAAA,6CAkCwB,yDAPC,EAAW,cACV,EAAW,cAChB,EAAW,cACR,EAAW,qHA3CnC,EAAA,EAAA,MAAA,GAAA,0CAEA,EACA,kBAAA,GAAA,EAAA,eAAA,OAAA,EAAA,eAAA,MAAA,EAAA,eAAA,QAAA,sBAIA,EAAA,GAAA,mBAQA,GAAA,IAAA,QACA,EAAA,IACA,EAAA,cAAA,GAAA,EAAA,eAAA,EACA,GAAA,GAAA,KAAA,QACA,EAAA,EAAA,gBACA,EAAA,EAAA,aAGA,EAAA,WAAA,GAAA,GAAA,KAAA,QAEA,EAAA,EAAA,gBACA,EAAA,EAAA"}