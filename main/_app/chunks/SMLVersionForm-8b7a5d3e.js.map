{"version":3,"file":"SMLVersionForm-8b7a5d3e.js","sources":["../../../../../src/lib/models/sml-versions.ts","../../../../../src/lib/components/sml-versions/SMLVersionForm.svelte"],"sourcesContent":["import * as zod from \"zod\";\nimport type {VersionStabilities} from \"$lib/generated\";\n\nexport type SMLVersionData = {\n  version: string;\n  satisfactory_version: number;\n  bootstrap_version?: string;\n  stability: VersionStabilities;\n  link: string;\n  changelog: string;\n  date: Date;\n}\n\nconst versionRegex = /^(<=|<|>|>=|\\^)?(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$/;\n\nexport const smlVersionSchema = zod.object({\n  version: zod.string().regex(versionRegex),\n  satisfactory_version: zod.number(),\n  bootstrap_version: zod.string().regex(versionRegex),\n  stability: zod.string(),\n  link: zod.string().url(),\n  changelog: zod.string(),\n  date: zod.string(),\n});\n","<script lang=\"ts\">\n  import {createForm} from 'felte';\n  import {validator} from '@felte/validator-zod';\n  import {svelteReporter, ValidationMessage} from '@felte/reporter-svelte';\n  import {trimNonSchema} from \"$lib/utils/forms\";\n  import {markdown} from '$lib/utils/markdown';\n  import type {SMLVersionData} from \"$lib/models/sml-versions\";\n  import {smlVersionSchema} from \"$lib/models/sml-versions\";\n\n  export let onSubmit: (data: SMLVersionData) => void;\n  export let initialValues: SMLVersionData | undefined = undefined;\n  export let submitText = 'Create';\n\n  const {form, data} = createForm<SMLVersionData>({\n    initialValues: initialValues,\n    extend: [validator, svelteReporter],\n    validateSchema: smlVersionSchema,\n    onSubmit: (data) => onSubmit(trimNonSchema(data, smlVersionSchema)),\n  });\n\n  $: preview = ($data.changelog as string) || '';\n</script>\n\n<form use:form>\n  <div class=\"grid grid-flow-row gap-6\">\n    <div class=\"grid grid-flow-row gap-2\">\n      <label for=\"version\">Version:</label>\n      <input id=\"version\" class=\"base-input\" name=\"version\" type=\"text\" placeholder=\"Version\">\n      <ValidationMessage for=\"version\" let:messages={message}>\n        <span class=\"validation-message\">{message || ''}</span>\n      </ValidationMessage>\n    </div>\n\n    <div class=\"grid grid-flow-row gap-2\">\n      <label for=\"satisfactory_version\">Satisfactory Version:</label>\n      <input id=\"satisfactory_version\" class=\"base-input\" name=\"satisfactory_version\" type=\"number\"\n             placeholder=\"Satisfactory Version\">\n      <ValidationMessage for=\"satisfactory_version\" let:messages={message}>\n        <span class=\"validation-message\">{message || ''}</span>\n      </ValidationMessage>\n    </div>\n\n    <div class=\"grid grid-flow-row gap-2\">\n      <label for=\"bootstrap_version\">Bootstrap Version:</label>\n      <input id=\"bootstrap_version\" class=\"base-input\" name=\"bootstrap_version\" type=\"text\"\n             placeholder=\"Bootstrap Version\">\n      <ValidationMessage for=\"bootstrap_version\" let:messages={message}>\n        <span class=\"validation-message\">{message || ''}</span>\n      </ValidationMessage>\n    </div>\n\n    <div class=\"grid grid-flow-row gap-2\">\n      <label for=\"stability\">Stability:</label>\n      <select id=\"stability\" class=\"base-input\" name=\"stability\">\n        <option value=\"alpha\">Alpha</option>\n        <option value=\"beta\">Beta</option>\n        <option value=\"release\">Release</option>\n      </select>\n      <ValidationMessage for=\"stability\" let:messages={message}>\n        <span class=\"validation-message\">{message || ''}</span>\n      </ValidationMessage>\n    </div>\n\n    <div class=\"grid gap-6 split\">\n      <div class=\"grid grid-flow-row gap-2 auto-rows-max\">\n        <label for=\"changelog\">Changelog:</label>\n        <textarea class=\"base-input\" id=\"changelog\" name=\"changelog\" placeholder=\"Changelog\" rows=\"10\"></textarea>\n        <ValidationMessage for=\"changelog\" let:messages={message}>\n          <span class=\"validation-message\">{message || ''}</span>\n        </ValidationMessage>\n      </div>\n      <div class=\"grid grid-flow-row gap-2 auto-rows-max\">\n        <span>Preview:</span>\n        {#await markdown(preview) then previewRendered}\n          <div class=\"markdown-content right\">{ @html previewRendered}</div>\n        {/await}\n      </div>\n    </div>\n\n    <div class=\"grid grid-flow-row gap-2\">\n      <label for=\"date\">Date and Time:</label>\n      <input id=\"date\" class=\"base-input\" name=\"date\" type=\"text\" placeholder=\"Date and Time\">\n      <ValidationMessage for=\"date\" let:messages={message}>\n        <span class=\"validation-message\">{message || ''}</span>\n      </ValidationMessage>\n    </div>\n\n    <div class=\"grid grid-flow-row gap-2\">\n      <label for=\"link\">Link:</label>\n      <input id=\"link\" class=\"base-input\" name=\"link\" type=\"text\" placeholder=\"Link\">\n      <ValidationMessage for=\"link\" let:messages={message}>\n        <span class=\"validation-message\">{message || ''}</span>\n      </ValidationMessage>\n    </div>\n\n    <div>\n      <input type=\"submit\" value={submitText} class=\"px-4 py-2 rounded text-base bg-blue-500 cursor-pointer\">\n    </div>\n  </div>\n</form>\n\n<style lang=\"postcss\">\n  .split {\n    grid-template-columns: 50% 50%;\n\n    & .right {\n      max-height: 75vh;\n      overflow: auto;\n    }\n  }\n</style>\n"],"names":["versionRegex","smlVersionSchema","zod.object","version","zod.string","regex","satisfactory_version","zod.number","bootstrap_version","stability","link","url","changelog","date","ctx","ctx2","message","markdown","onSubmit","initialValues","submitText","form","data","createForm","extend","validator","svelteReporter","validateSchema","trimNonSchema","data2","preview","$data"],"mappings":"sWAaA,MAAMA,EAAe,qMAERC,EAAmBC,EAAW,CACzCC,QAASC,IAAaC,MAAML,GAC5BM,qBAAsBC,IACtBC,kBAAmBJ,IAAaC,MAAML,GACtCS,UAAWL,IACXM,KAAMN,IAAaO,MACnBC,UAAWR,IACXS,KAAMT,qCCO6C,mNAAA,+DASA,mNAAA,+DASA,mNAAA,+DAYA,mNAAA,+DASE,mNAAA,gGAMDU,2MAAAC,mHASD,mNAAA,+DAQA,mNAAA,8TA/DAC,wBAAAA,4GASaA,wBAAAA,0GASHA,wBAAAA,kGAYRA,wBAAAA,kGASEA,wBAAAA,kIAMzCC,EAASH,qEASyBE,wBAAAA,6FAQAA,wBAAAA,0FAhEvB,wFAQa,qGASH,0GASR,wDAEC,6BACD,4BACG,sFASD,oGAOjB,sEAQU,sGAQA,kPA9DG,yNAQa,sOASH,6OASR,gIAEC,6DACD,4DACG,4MASD,kPAOjB,kKAQU,yOAQA,+yDAQUF,wpCAvBlBG,EAASH,oKAuBSA,kcAvFrBI,oBACAC,iBACAC,EAAa,uBAEjBC,OAAMC,GAAQC,GACJJ,cAAAA,EACfK,QAASC,EAAWC,GACpBC,eAAgB1B,EAChBiB,YAAoBA,EAASU,EAAcC,EAAM5B,uMAGhD6B,EAAWC,EAAMnB,WAAwB"}