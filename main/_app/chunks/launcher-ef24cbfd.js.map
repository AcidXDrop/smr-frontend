{"version":3,"file":"launcher-ef24cbfd.js","sources":["../../../../../src/lib/stores/launcher.ts"],"sourcesContent":["import { get, writable } from 'svelte/store';\nimport { browser } from '$app/env';\n\nexport const customProtocolCheck = writable<unknown | null>(null);\nexport const hasLauncher = writable<boolean>(false);\nexport const launcherOpen = writable<boolean>(false);\nexport const launcherWs = writable<WebSocket | null>(null);\n\nconst connectToLauncher = () => {\n  new Promise(() => {\n    const ws = new WebSocket('ws://localhost:33642');\n    launcherWs.set(ws);\n\n    ws.onopen = () => {\n      hasLauncher.set(true);\n      launcherOpen.set(true);\n    };\n\n    ws.onclose = () => {\n      launcherOpen.set(false);\n      setTimeout(() => {\n        connectToLauncher();\n      }, 10000);\n    };\n  }).catch(console.error);\n};\n\nconst open = (link: string, fallback?: () => void) => {\n  if (browser) {\n    new Promise(() => {\n      get(customProtocolCheck)['protocolCheck'](link, () => {\n        hasLauncher.set(false);\n        if (fallback) {\n          fallback();\n        }\n      });\n    }).catch(console.error);\n  }\n};\n\nconst modLoaderLink = 'https://smm.ficsit.app/';\n\nexport const pingLauncher = () => {\n  open('smmanager://ping', () => {\n    window.open(modLoaderLink, '_blank');\n  });\n};\n\nexport const installMod = (modId: string) => {\n  open('smmanager://install?modID=' + modId, () => {\n    window.open(modLoaderLink, '_blank');\n  });\n};\n\nif (browser) {\n  connectToLauncher();\n}\n"],"names":[],"mappings":"qDAGa,GAAsB,EAAyB,MAC/C,EAAc,EAAkB,IAChC,EAAe,EAAkB,IACjC,EAAa,EAA2B,MAE/C,EAAoB,IAAM,IAC1B,SAAQ,IAAM,MACV,GAAK,GAAI,WAAU,0BACd,IAAI,KAEZ,OAAS,IAAM,GACJ,IAAI,MACH,IAAI,OAGhB,QAAU,IAAM,GACJ,IAAI,eACN,IAAM,MAEd,QAEJ,MAAM,QAAQ,QAGb,EAAO,CAAC,EAAc,IAA0B,IAE9C,SAAQ,IAAM,GACZ,GAAqB,cAAiB,EAAM,IAAM,GACxC,IAAI,IACZ,WAIL,MAAM,QAAQ,QAIf,EAAgB,0BAET,EAAe,IAAM,GAC3B,mBAAoB,IAAM,QACtB,KAAK,EAAe,aAIlB,EAAa,AAAC,GAAkB,GACtC,6BAA+B,EAAO,IAAM,QACxC,KAAK,EAAe"}