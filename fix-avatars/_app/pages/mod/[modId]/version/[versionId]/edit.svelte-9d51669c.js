import{S as n,i as t,s,j as e,m as r,o,x as a,u as i,v as c,J as d,K as m,l as u,k as f,e as p,t as g,$ as l,d as h,n as $,c as v,a as j,g as k,b as V,R as b,f as E,w,L as x,N as I,M as y,Q as O,O as N,r as P,h as S,X as L}from"../../../../../chunks/vendor-ae42b6a0.js";import{p as M}from"../../../../../chunks/routing-1d144003.js";import{B as T,I as q}from"../../../../../chunks/graphql-53becde4.js";import{T as _}from"../../../../../chunks/Toast-1d0b041d.js";import{g as z}from"../../../../../chunks/navigation-51f4a605.js";import{V as A}from"../../../../../chunks/VersionForm-d0a4924e.js";import{b as B}from"../../../../../chunks/paths-6758d194.js";import{M as D}from"../../../../../chunks/MetaDescriptors-acbf38a9.js";import"../../../../../chunks/singletons-12a22614.js";import"../../../../../chunks/uplugin-071a9263.js";import"../../../../../chunks/api-82c76902.js";import"../../../../../chunks/user-c2fb5a94.js";import"../../../../../chunks/forms-8d025218.js";import"../../../../../chunks/markdown-70c7c4d4.js";import"../../../../../chunks/stores-fc868ea7.js";function F(n){let t,s;return t=new D({props:{description:"Editing mod version "+n[1].data.getVersion.mod.name+" "+n[1].data.getVersion.version,title:"Edit mod version "+n[1].data.getVersion.mod.name+" "+n[1].data.getVersion.version}}),{c(){e(t.$$.fragment)},l(n){r(t.$$.fragment,n)},m(n,e){o(t,n,e),s=!0},p(n,s){const e={};2&s&&(e.description="Editing mod version "+n[1].data.getVersion.mod.name+" "+n[1].data.getVersion.version),2&s&&(e.title="Edit mod version "+n[1].data.getVersion.mod.name+" "+n[1].data.getVersion.version),t.$set(e)},i(n){s||(a(t.$$.fragment,n),s=!0)},o(n){i(t.$$.fragment,n),s=!1},d(n){c(t,n)}}}function H(n){let t,s;return t=new A({props:{onSubmit:n[5],initialValues:n[3],editing:!0,submitText:"Save"}}),{c(){e(t.$$.fragment)},l(n){r(t.$$.fragment,n)},m(n,e){o(t,n,e),s=!0},p(n,s){const e={};8&s&&(e.initialValues=n[3]),t.$set(e)},i(n){s||(a(t.$$.fragment,n),s=!0)},o(n){i(t.$$.fragment,n),s=!1},d(n){c(t,n)}}}function J(n){let t,s,e,r=n[1].error.message+"";return{c(){t=p("p"),s=g("Oh no... "),e=g(r)},l(n){t=v(n,"P",{});var o=j(t);s=k(o,"Oh no... "),e=k(o,r),o.forEach(h)},m(n,r){E(n,t,r),b(t,s),b(t,e)},p(n,t){2&t&&r!==(r=n[1].error.message+"")&&S(e,r)},i:L,o:L,d(n){n&&h(t)}}}function K(n){let t,s;return{c(){t=p("p"),s=g("Loading...")},l(n){t=v(n,"P",{});var e=j(t);s=k(e,"Loading..."),e.forEach(h)},m(n,e){E(n,t,e),b(t,s)},p:L,i:L,o:L,d(n){n&&h(t)}}}function Q(n){let t,s;return{c(){t=p("span"),s=g(n[2])},l(e){t=v(e,"SPAN",{});var r=j(t);s=k(r,n[2]),r.forEach(h)},m(n,e){E(n,t,e),b(t,s)},p(n,t){4&t&&S(s,n[2])},d(n){n&&h(t)}}}function R(n){let t,s,I,y,O,N,S,L,M,T,q,z=!n[1].fetching&&!n[1].error&&n[1].data.getVersion&&F(n);const A=[K,J,H],B=[];function D(n,t){return n[1].fetching?0:n[1].error?1:2}function R(t){n[8](t)}N=D(n),S=B[N]=A[N](n);let X={$$slots:{default:[Q]},$$scope:{ctx:n}};return void 0!==n[0]&&(X.running=n[0]),M=new _({props:X}),d.push((()=>m(M,"running",R))),{c(){z&&z.c(),t=u(),s=f(),I=p("h1"),y=g("Edit Version"),O=f(),S.c(),L=f(),e(M.$$.fragment),this.h()},l(n){const e=l('[data-svelte="svelte-wzsk0g"]',document.head);z&&z.l(e),t=u(),e.forEach(h),s=$(n),I=v(n,"H1",{class:!0});var o=j(I);y=k(o,"Edit Version"),o.forEach(h),O=$(n),S.l(n),L=$(n),r(M.$$.fragment,n),this.h()},h(){V(I,"class","text-4xl my-4 font-bold")},m(n,e){z&&z.m(document.head,null),b(document.head,t),E(n,s,e),E(n,I,e),b(I,y),E(n,O,e),B[N].m(n,e),E(n,L,e),o(M,n,e),q=!0},p(n,[s]){n[1].fetching||n[1].error||!n[1].data.getVersion?z&&(P(),i(z,1,1,(()=>{z=null})),w()):z?(z.p(n,s),2&s&&a(z,1)):(z=F(n),z.c(),a(z,1),z.m(t.parentNode,t));let e=N;N=D(n),N===e?B[N].p(n,s):(P(),i(B[e],1,1,(()=>{B[e]=null})),w(),S=B[N],S?S.p(n,s):(S=B[N]=A[N](n),S.c()),a(S,1),S.m(L.parentNode,L));const r={};2052&s&&(r.$$scope={dirty:s,ctx:n}),!T&&1&s&&(T=!0,r.running=n[0],x((()=>T=!1))),M.$set(r)},i(n){q||(a(z),a(S),a(M.$$.fragment,n),q=!0)},o(n){i(z),i(S),i(M.$$.fragment,n),q=!1},d(n){z&&z.d(n),h(t),n&&h(s),n&&h(I),n&&h(O),B[N].d(n),n&&h(L),c(M,n)}}}const X=M();function C(n,t,s){let e,r;var o=this&&this.__awaiter||function(n,t,s,e){return new(s||(s=Promise))((function(r,o){function a(n){try{c(e.next(n))}catch(t){o(t)}}function i(n){try{c(e.throw(n))}catch(t){o(t)}}function c(n){var t;n.done?r(n.value):(t=n.value,t instanceof s?t:new s((function(n){n(t)}))).then(a,i)}c((e=e.apply(n,t||[])).next())}))};let{modId:a}=t,{versionId:i}=t,c="",d=!1;const m=I(T,{version:i});y(n,m,(n=>s(1,r=n)));const u=O({query:q});return N(m),n.$$set=n=>{"modId"in n&&s(6,a=n.modId),"versionId"in n&&s(7,i=n.versionId)},n.$$.update=()=>{1&n.$$.dirty&&(d||s(2,c="")),2&n.$$.dirty&&s(3,e=r.data?Object.assign(Object.assign({},r.data.getVersion),{logo:void 0}):void 0)},[d,r,c,e,m,n=>o(void 0,void 0,void 0,(function*(){return u({versionId:i,version:n}).then((n=>{if(!n.error)return z(B+"/mod/"+a+"/version/"+i);console.error(n.error.message),s(2,c="Error editing version: "+n.error.message),s(0,d=!0)}))})),a,i,function(n){d=n,s(0,d)}]}class G extends n{constructor(n){super(),t(this,n,C,R,s,{modId:6,versionId:7})}}export{G as default,X as load};
//# sourceMappingURL=edit.svelte-9d51669c.js.map
