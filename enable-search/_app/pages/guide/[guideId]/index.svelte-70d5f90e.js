import{S as e,i as t,s as a,e as r,t as s,k as n,c as o,a as c,g as i,d,n as l,b as u,f as g,R as f,h,X as m,N as p,j as v,m as $,o as x,x as b,u as E,v as w,l as k,$ as y,w as D,M as I,ac as G,Q as j,O as T,r as V,C as N,W as A,Y as O,am as C,J as P,K as H,an as q,L as B}from"../../../chunks/vendor-ae42b6a0.js";import{M as L}from"../../../chunks/MetaDescriptors-acbf38a9.js";import{l as M}from"../../../chunks/gql-189fcb81.js";import{r as S,s as _}from"../../../chunks/graphql-53becde4.js";import{p as U}from"../../../chunks/routing-1d144003.js";import{b as R}from"../../../chunks/paths-6758d194.js";import{a as W}from"../../../chunks/user-c2fb5a94.js";import{g as J}from"../../../chunks/navigation-51f4a605.js";import{D as K}from"../../../chunks/Dialog-6451af81.js";import{T as Q}from"../../../chunks/Toast-1d0b041d.js";import{m as X}from"../../../chunks/markdown-70c7c4d4.js";import"../../../chunks/stores-fc868ea7.js";import"../../../chunks/singletons-12a22614.js";function Y(e){let t,a,p,v,$,x,b,E,w,k,y=e[0].created_at+"";return{c(){t=r("div"),a=r("h3"),p=s("Info"),v=n(),$=r("span"),x=r("strong"),b=s("Created:"),E=n(),w=s(y),k=r("br"),this.h()},l(e){t=o(e,"DIV",{class:!0});var r=c(t);a=o(r,"H3",{class:!0});var s=c(a);p=i(s,"Info"),s.forEach(d),v=l(r),$=o(r,"SPAN",{});var n=c($);x=o(n,"STRONG",{});var u=c(x);b=i(u,"Created:"),u.forEach(d),E=l(n),w=i(n,y),n.forEach(d),k=o(r,"BR",{}),r.forEach(d),this.h()},h(){u(a,"class","text-2xl my-4 font-bold"),u(t,"class","text-lg")},m(e,r){g(e,t,r),f(t,a),f(a,p),f(t,v),f(t,$),f($,x),f(x,b),f($,E),f($,w),f(t,k)},p(e,[t]){1&t&&y!==(y=e[0].created_at+"")&&h(w,y)},i:m,o:m,d(e){e&&d(t)}}}function z(e,t,a){let{guide:r}=t;return e.$$set=e=>{"guide"in e&&a(0,r=e.guide)},[r]}class F extends e{constructor(e){super(),t(this,e,z,Y,a,{guide:0})}}function Z(e){let t,a,p,v,$,x,b,E,w,k,y,D,I,G,j,T,V=e[0].username+"";return{c(){t=r("div"),a=r("h3"),p=s("Author"),v=n(),$=r("div"),x=r("div"),b=r("div"),w=n(),k=r("div"),y=r("a"),D=s(V),G=n(),j=r("div"),T=s("Writer"),this.h()},l(e){t=o(e,"DIV",{class:!0});var r=c(t);a=o(r,"H3",{class:!0});var s=c(a);p=i(s,"Author"),s.forEach(d),v=l(r),$=o(r,"DIV",{class:!0});var n=c($);x=o(n,"DIV",{class:!0});var u=c(x);b=o(u,"DIV",{class:!0,style:!0}),c(b).forEach(d),w=l(u),k=o(u,"DIV",{class:!0});var g=c(k);y=o(g,"A",{href:!0,class:!0});var f=c(y);D=i(f,V),f.forEach(d),G=l(g),j=o(g,"DIV",{});var h=c(j);T=i(h,"Writer"),h.forEach(d),g.forEach(d),u.forEach(d),n.forEach(d),r.forEach(d),this.h()},h(){u(a,"class","text-2xl my-4 font-bold"),u(b,"class","rounded-full bg-cover w-14 h-14"),u(b,"style",E=`background-image: url("${e[0].avatar}")`),u(y,"href",I=R+"/user/"+e[0].id+"/"),u(y,"class","text-yellow-500 underline"),u(k,"class","grid grid-flow-row"),u(x,"class","grid grid-flow-col auto-cols-min gap-x-4"),u($,"class","grid auto-rows-min text-lg gap-y-4"),u(t,"class","grid grid-flow-row gap-y-6")},m(e,r){g(e,t,r),f(t,a),f(a,p),f(t,v),f(t,$),f($,x),f(x,b),f(x,w),f(x,k),f(k,y),f(y,D),f(k,G),f(k,j),f(j,T)},p(e,[t]){1&t&&E!==(E=`background-image: url("${e[0].avatar}")`)&&u(b,"style",E),1&t&&V!==(V=e[0].username+"")&&h(D,V),1&t&&I!==(I=R+"/user/"+e[0].id+"/")&&u(y,"href",I)},i:m,o:m,d(e){e&&d(t)}}}function ee(e,t,a){let{author:r}=t;return e.$$set=e=>{"author"in e&&a(0,r=e.author)},[r]}class te extends e{constructor(e){super(),t(this,e,ee,Z,a,{author:0})}}function ae(e){let t,a;return t=new L({props:{description:e[3].data.getGuide.short_description,title:e[3].data.getGuide.name}}),{c(){v(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,r){x(t,e,r),a=!0},p(e,a){const r={};8&a&&(r.description=e[3].data.getGuide.short_description),8&a&&(r.title=e[3].data.getGuide.name),t.$set(r)},i(e){a||(b(t.$$.fragment,e),a=!0)},o(e){E(t.$$.fragment,e),a=!1},d(e){w(t,e)}}}function re(e){let t;return{c(){t=s("404")},l(e){t=i(e,"404")},m(e,a){g(e,t,a)},p:m,i:m,o:m,d(e){e&&d(t)}}}function se(e){let t,a,m,p,k,y,D,I,G,j,T,V,N,A,O,L,M,S,_,U,R,W=e[3].data.getGuide.name+"",J=e[5]&&ce(e),Y={ctx:e,current:null,token:null,hasCatch:!1,pending:le,then:de,catch:ie,value:21};function z(t){e[18](t)}C(G=X(e[3].data.getGuide.guide),Y),V=new F({props:{guide:e[3].data.getGuide}}),A=new te({props:{author:e[3].data.getGuide.user}});let Z={$$slots:{default:[ue]},$$scope:{ctx:e}};function ee(t){e[19](t)}void 0!==e[6]&&(Z.open=e[6]),L=new K({props:Z}),P.push((()=>H(L,"open",z)));let ae={$$slots:{default:[ge]},$$scope:{ctx:e}};return void 0!==e[2]&&(ae.running=e[2]),_=new Q({props:ae}),P.push((()=>H(_,"running",ee))),{c(){t=r("div"),a=r("div"),m=r("div"),p=r("h1"),k=s(W),y=n(),J&&J.c(),D=n(),I=r("div"),Y.block.c(),j=n(),T=r("div"),v(V.$$.fragment),N=n(),v(A.$$.fragment),O=n(),v(L.$$.fragment),S=n(),v(_.$$.fragment),this.h()},l(e){t=o(e,"DIV",{class:!0});var r=c(t);a=o(r,"DIV",{class:!0});var s=c(a);m=o(s,"DIV",{class:!0});var n=c(m);p=o(n,"H1",{class:!0});var u=c(p);k=i(u,W),u.forEach(d),y=l(n),J&&J.l(n),n.forEach(d),D=l(s),I=o(s,"DIV",{class:!0});var g=c(I);Y.block.l(g),g.forEach(d),s.forEach(d),j=l(r),T=o(r,"DIV",{class:!0});var f=c(T);$(V.$$.fragment,f),N=l(f),$(A.$$.fragment,f),f.forEach(d),r.forEach(d),O=l(e),$(L.$$.fragment,e),S=l(e),$(_.$$.fragment,e),this.h()},h(){u(p,"class","text-4xl my-4 font-bold"),u(m,"class","grid grid-flow-col grid-auto-max h-auto gap-4 items-center svelte-1sejgqw"),u(I,"class","markdown-content"),u(a,"class","grid grid-cols-1 auto-rows-min gap-8"),u(T,"class","grid grid-cols-1 auto-rows-min gap-8"),u(t,"class","grid gap-8 grid-auto-max svelte-1sejgqw")},m(e,r){g(e,t,r),f(t,a),f(a,m),f(m,p),f(p,k),f(m,y),J&&J.m(m,null),f(a,D),f(a,I),Y.block.m(I,Y.anchor=null),Y.mount=()=>I,Y.anchor=null,f(t,j),f(t,T),x(V,T,null),f(T,N),x(A,T,null),g(e,O,r),x(L,e,r),g(e,S,r),x(_,e,r),R=!0},p(t,a){e=t,(!R||8&a)&&W!==(W=e[3].data.getGuide.name+"")&&h(k,W),e[5]?J?J.p(e,a):(J=ce(e),J.c(),J.m(m,null)):J&&(J.d(1),J=null),Y.ctx=e,8&a&&G!==(G=X(e[3].data.getGuide.guide))&&C(G,Y)||q(Y,e,a);const r={};8&a&&(r.guide=e[3].data.getGuide),V.$set(r);const s={};8&a&&(s.author=e[3].data.getGuide.user),A.$set(s);const n={};4194304&a&&(n.$$scope={dirty:a,ctx:e}),!M&&64&a&&(M=!0,n.open=e[6],B((()=>M=!1))),L.$set(n);const o={};4194320&a&&(o.$$scope={dirty:a,ctx:e}),!U&&4&a&&(U=!0,o.running=e[2],B((()=>U=!1))),_.$set(o)},i(e){R||(b(V.$$.fragment,e),b(A.$$.fragment,e),b(L.$$.fragment,e),b(_.$$.fragment,e),R=!0)},o(e){E(V.$$.fragment,e),E(A.$$.fragment,e),E(L.$$.fragment,e),E(_.$$.fragment,e),R=!1},d(e){e&&d(t),J&&J.d(),Y.block.d(),Y.token=null,Y=null,w(V),w(A),e&&d(O),w(L,e),e&&d(S),w(_,e)}}}function ne(e){let t,a,n,l=e[3].error.message+"";return{c(){t=r("p"),a=s("Oh no... "),n=s(l)},l(e){t=o(e,"P",{});var r=c(t);a=i(r,"Oh no... "),n=i(r,l),r.forEach(d)},m(e,r){g(e,t,r),f(t,a),f(t,n)},p(e,t){8&t&&l!==(l=e[3].error.message+"")&&h(n,l)},i:m,o:m,d(e){e&&d(t)}}}function oe(e){let t,a;return{c(){t=r("p"),a=s("Loading...")},l(e){t=o(e,"P",{});var r=c(t);a=i(r,"Loading..."),r.forEach(d)},m(e,r){g(e,t,r),f(t,a)},p:m,i:m,o:m,d(e){e&&d(t)}}}function ce(e){let t,a,h,p,v,$,x;return{c(){t=r("button"),a=s("Edit"),h=n(),p=r("button"),v=s("Delete"),this.h()},l(e){t=o(e,"BUTTON",{class:!0});var r=c(t);a=i(r,"Edit"),r.forEach(d),h=l(e),p=o(e,"BUTTON",{class:!0});var s=c(p);v=i(s,"Delete"),s.forEach(d),this.h()},h(){u(t,"class","py-2 px-4 rounded text-base bg-yellow-600"),u(p,"class","py-2 px-4 rounded text-base bg-red-500")},m(r,s){g(r,t,s),f(t,a),g(r,h,s),g(r,p,s),f(p,v),$||(x=[A(t,"click",e[14]),A(p,"click",e[15])],$=!0)},p:m,d(e){e&&d(t),e&&d(h),e&&d(p),$=!1,O(x)}}}function ie(e){return{c:m,l:m,m:m,p:m,d:m}}function de(e){let t,a=e[21]+"";return{c(){t=r("p")},l(e){t=o(e,"P",{}),c(t).forEach(d)},m(e,r){g(e,t,r),t.innerHTML=a},p(e,r){8&r&&a!==(a=e[21]+"")&&(t.innerHTML=a)},d(e){e&&d(t)}}}function le(e){return{c:m,l:m,m:m,p:m,d:m}}function ue(e){let t,a,h,p,v,$,x,b,E,w,k,y,D,I;return{c(){t=r("div"),a=r("h3"),h=s("Delete Guide?"),p=n(),v=r("span"),$=s("Are you sure you wish to delete this guide"),x=n(),b=r("button"),E=s("Cancel"),w=n(),k=r("button"),y=s("Delete"),this.h()},l(e){t=o(e,"DIV",{class:!0});var r=c(t);a=o(r,"H3",{class:!0});var s=c(a);h=i(s,"Delete Guide?"),s.forEach(d),p=l(r),v=o(r,"SPAN",{});var n=c(v);$=i(n,"Are you sure you wish to delete this guide"),n.forEach(d),x=l(r),b=o(r,"BUTTON",{class:!0});var u=c(b);E=i(u,"Cancel"),u.forEach(d),w=l(r),k=o(r,"BUTTON",{class:!0});var g=c(k);y=i(g,"Delete"),g.forEach(d),r.forEach(d),this.h()},h(){u(a,"class","text-2xl font-bold"),u(b,"class","py-1 px-4 rounded text-base bg-yellow-600"),u(k,"class","py-1 px-4 rounded text-base bg-red-500"),u(t,"class","grid grid-flow-row gap-4")},m(r,s){g(r,t,s),f(t,a),f(a,h),f(t,p),f(t,v),f(v,$),f(t,x),f(t,b),f(b,E),f(t,w),f(t,k),f(k,y),D||(I=[A(b,"click",e[16]),A(k,"click",e[17])],D=!0)},p:m,d(e){e&&d(t),D=!1,O(I)}}}function ge(e){let t,a;return{c(){t=r("span"),a=s(e[4])},l(r){t=o(r,"SPAN",{});var s=c(t);a=i(s,e[4]),s.forEach(d)},m(e,r){g(e,t,r),f(t,a)},p(e,t){16&t&&h(a,e[4])},d(e){e&&d(t)}}}function fe(e){let t,a,r,s,o,c,i=!e[3].fetching&&!e[3].error&&e[3].data.getGuide&&ae(e);const u=[oe,ne,se,re],h=[];function m(e,t){return e[3].fetching?0:e[3].error?1:e[3].data.getGuide?2:3}return r=m(e),s=h[r]=u[r](e),{c(){i&&i.c(),t=k(),a=n(),s.c(),o=k()},l(e){const r=y('[data-svelte="svelte-bhfvpi"]',document.head);i&&i.l(r),t=k(),r.forEach(d),a=l(e),s.l(e),o=k()},m(e,s){i&&i.m(document.head,null),f(document.head,t),g(e,a,s),h[r].m(e,s),g(e,o,s),c=!0},p(e,[a]){e[3].fetching||e[3].error||!e[3].data.getGuide?i&&(V(),E(i,1,1,(()=>{i=null})),D()):i?(i.p(e,a),8&a&&b(i,1)):(i=ae(e),i.c(),b(i,1),i.m(t.parentNode,t));let n=r;r=m(e),r===n?h[r].p(e,a):(V(),E(h[n],1,1,(()=>{h[n]=null})),D(),s=h[r],s?s.p(e,a):(s=h[r]=u[r](e),s.c()),b(s,1),s.m(o.parentNode,o))},i(e){c||(b(i),b(s),c=!0)},o(e){E(i),E(s),c=!1},d(e){i&&i.d(e),d(t),e&&d(a),h[r].d(e),e&&d(o)}}}var he=function(e,t,a,r){return new(a||(a=Promise))((function(s,n){function o(e){try{i(r.next(e))}catch(t){n(t)}}function c(e){try{i(r.throw(e))}catch(t){n(t)}}function i(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,c)}i((r=r.apply(e,t||[])).next())}))};const me=p(S,{guide:void 0}),pe=U((e=>he(void 0,void 0,void 0,(function*(){return me.variables.guide=e.page.params.guideId,M({guide:me})(e)}))));function ve(e,t,a){let r,s,n,o,c=m,i=()=>(c(),c=G(h,(e=>a(3,s=e))),h);var d,l,u,g;I(e,W,(e=>a(13,n=e))),e.$$.on_destroy.push((()=>c()));let{guideId:f}=t,{guide:h}=t;i();let p="",v=!1;const $=j({query:_}),x=N(!1);I(e,x,(e=>a(6,o=e)));const b=()=>{$({guideId:f}).then((e=>{e.error?(console.error(e.error.message),a(4,p="Error deleting guide: "+e.error.message),a(2,v=!0)):J(R+"/guides")}))};T(h);return e.$$set=e=>{"guideId"in e&&a(0,f=e.guideId),"guide"in e&&i(a(1,h=e.guide))},e.$$.update=()=>{15880&e.$$.dirty&&a(5,r=(null===a(9,d=null==n?void 0:n.roles)||void 0===d?void 0:d.deleteContent)||(null==n?void 0:n.id)===(null===a(12,g=null===a(11,u=null===a(10,l=null==s?void 0:s.data)||void 0===l?void 0:l.getGuide)||void 0===u?void 0:u.user)||void 0===g?void 0:g.id)),4&e.$$.dirty&&(v||a(4,p=""))},[f,h,v,s,p,r,o,x,b,d,l,u,g,n,()=>J(R+"/guide/"+f+"/edit"),()=>x.set(!0),()=>x.set(!1),()=>b(),function(e){o=e,x.set(o)},function(e){v=e,a(2,v)}]}class $e extends e{constructor(e){super(),t(this,e,ve,fe,a,{guideId:0,guide:1})}}export{$e as default,pe as load};
//# sourceMappingURL=index.svelte-70d5f90e.js.map
